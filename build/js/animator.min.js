/*!
  * https://github.com/paulmillr/es6-shim
  * @license es6-shim Copyright 2013-2015 by Paul Miller (http://paulmillr.com)
  *   and contributors,  MIT License
  * es6-shim: v0.27.1
  * see https://github.com/paulmillr/es6-shim/blob/0.27.1/LICENSE
  * Details and documentation:
  * https://github.com/paulmillr/es6-shim/
  */
(function(e,t){if(typeof define==="function"&&define.amd){define(t)}else if(typeof exports==="object"){module.exports=t()}else{e.returnExports=t()}})(this,function(){"use strict";var e=function Kt(e){return function t(){return!e.apply(this,arguments)}};var t=function(e){try{e();return false}catch(t){return true}};var r=function Bt(e){try{return e()}catch(t){return false}};var n=e(t);var o=function(){return!t(function(){Object.defineProperty({},"x",{})})};var i=!!Object.defineProperty&&o();var a=Function.call.bind(Array.prototype.forEach);var u=Function.call.bind(Array.prototype.map);var s=Function.call.bind(Array.prototype.reduce);var f=Function.call.bind(Array.prototype.filter);var c=function(e,t,r,n){if(!n&&t in e){return}if(i){Object.defineProperty(e,t,{configurable:true,enumerable:false,writable:true,value:r})}else{e[t]=r}};var l=function(e,t){a(Object.keys(t),function(r){var n=t[r];c(e,r,n,false)})};var p=Object.create||function(e,t){function r(){}r.prototype=e;var n=new r;if(typeof t!=="undefined"){l(n,t)}return n};var v=function(e,t){if(!Object.setPrototypeOf){return false}return r(function(){var r=function n(t){var r=new e(t);Object.setPrototypeOf(r,n.prototype);return r};r.prototype=p(e.prototype,{constructor:{value:e}});return t(r)})};var h=function(){return String.prototype.startsWith&&t(function(){"/a/".startsWith(/a/)})};var y=function(){return String.prototype.startsWith&&"abc".startsWith("a",Infinity)===false}();var b=new Function("return this;");var g=b();var d=g.isFinite;var m=function(){return this===null}.call(null);var O=h()&&y;var w=Function.call.bind(String.prototype.indexOf);var j=Function.call.bind(Object.prototype.toString);var M=Function.call.bind(Object.prototype.hasOwnProperty);var T;var I=function(){};var S=g.Symbol||{};var E=S.species||"@@species";var x={object:function(e){return e!==null&&typeof e==="object"},string:function(e){return j(e)==="[object String]"},regex:function(e){return j(e)==="[object RegExp]"},symbol:function(e){return typeof g.Symbol==="function"&&typeof e==="symbol"}};var _=Number.isNaN||function Jt(e){return e!==e};var P=Number.isFinite||function Qt(e){return typeof e==="number"&&d(e)};var N={getter:function(e,t,r){if(!i){throw new TypeError("getters require true ES5 support")}Object.defineProperty(e,t,{configurable:true,enumerable:false,get:r})},proxy:function(e,t,r){if(!i){throw new TypeError("getters require true ES5 support")}var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,{configurable:n.configurable,enumerable:n.enumerable,get:function o(){return e[t]},set:function a(r){e[t]=r}})},redefine:function(e,t,r){if(i){var n=Object.getOwnPropertyDescriptor(e,t);n.value=r;Object.defineProperty(e,t,n)}else{e[t]=r}},preserveToString:function(e,t){c(e,"toString",t.toString.bind(t),true)}};var C=function Yt(e,t,r){var n=e[t];c(e,t,r,true);N.preserveToString(e[t],n)};var A=x.symbol(S.iterator)?S.iterator:"_es6-shim iterator_";if(g.Set&&typeof(new g.Set)["@@iterator"]==="function"){A="@@iterator"}var k=function(e,t){var r=t||function o(){return this};var n={};n[A]=r;l(e,n);if(!e[A]&&x.symbol(A)){e[A]=r}};var R=function er(e){var t=j(e);var r=t==="[object Arguments]";if(!r){r=t!=="[object Array]"&&e!==null&&typeof e==="object"&&typeof e.length==="number"&&e.length>=0&&j(e.callee)==="[object Function]"}return r};var L=Function.call.bind(Function.apply);var z={Call:function tr(e,t){var r=arguments.length>2?arguments[2]:[];if(!z.IsCallable(e)){throw new TypeError(e+" is not a function")}return L(e,t,r)},RequireObjectCoercible:function(e,t){if(e==null){throw new TypeError(t||"Cannot call method on "+e)}},TypeIsObject:function(e){return e!=null&&Object(e)===e},ToObject:function(e,t){z.RequireObjectCoercible(e,t);return Object(e)},IsCallable:function(e){return typeof e==="function"&&j(e)==="[object Function]"},ToInt32:function(e){return z.ToNumber(e)>>0},ToUint32:function(e){return z.ToNumber(e)>>>0},ToNumber:function(e){if(j(e)==="[object Symbol]"){throw new TypeError("Cannot convert a Symbol value to a number")}return+e},ToInteger:function(e){var t=z.ToNumber(e);if(_(t)){return 0}if(t===0||!P(t)){return t}return(t>0?1:-1)*Math.floor(Math.abs(t))},ToLength:function(e){var t=z.ToInteger(e);if(t<=0){return 0}if(t>Number.MAX_SAFE_INTEGER){return Number.MAX_SAFE_INTEGER}return t},SameValue:function(e,t){if(e===t){if(e===0){return 1/e===1/t}return true}return _(e)&&_(t)},SameValueZero:function(e,t){return e===t||_(e)&&_(t)},IsIterable:function(e){return z.TypeIsObject(e)&&(typeof e[A]!=="undefined"||R(e))},GetIterator:function(e){if(R(e)){return new T(e,"value")}var t=e[A];if(!z.IsCallable(t)){throw new TypeError("value is not an iterable")}var r=t.call(e);if(!z.TypeIsObject(r)){throw new TypeError("bad iterator")}return r},IteratorNext:function(e){var t=arguments.length>1?e.next(arguments[1]):e.next();if(!z.TypeIsObject(t)){throw new TypeError("bad iterator")}return t},Construct:function(e,t){var r;if(z.IsCallable(e[E])){r=e[E]()}else{r=p(e.prototype||null)}l(r,{_es6construct:true});var n=z.Call(e,r,t);return z.TypeIsObject(n)?n:r},CreateHTML:function(e,t,r,n){var o=String(e);var i="<"+t;if(r!==""){var a=String(n);var u=a.replace(/"/g,"&quot;");i+=" "+r+'="'+u+'"'}var s=i+">";var f=s+o;return f+"</"+t+">"}};var F=function(e){if(!z.TypeIsObject(e)){throw new TypeError("bad object")}var t=e;if(!t._es6construct){if(t.constructor&&z.IsCallable(t.constructor[E])){t=t.constructor[E](t)}l(t,{_es6construct:true})}return t};if(String.fromCodePoint&&String.fromCodePoint.length!==1){var D=Function.apply.bind(String.fromCodePoint);C(String,"fromCodePoint",function rr(e){return D(this,arguments)})}var q={fromCodePoint:function nr(e){var t=[];var r;for(var n=0,o=arguments.length;n<o;n++){r=Number(arguments[n]);if(!z.SameValue(r,z.ToInteger(r))||r<0||r>1114111){throw new RangeError("Invalid code point "+r)}if(r<65536){t.push(String.fromCharCode(r))}else{r-=65536;t.push(String.fromCharCode((r>>10)+55296));t.push(String.fromCharCode(r%1024+56320))}}return t.join("")},raw:function or(e){var t=z.ToObject(e,"bad callSite");var r=z.ToObject(t.raw,"bad raw value");var n=r.length;var o=z.ToLength(n);if(o<=0){return""}var i=[];var a=0;var u,s,f,c;while(a<o){u=String(a);f=String(r[u]);i.push(f);if(a+1>=o){break}s=a+1<arguments.length?arguments[a+1]:"";c=String(s);i.push(c);a++}return i.join("")}};l(String,q);if(String.raw({raw:{0:"x",1:"y",length:2}})!=="xy"){C(String,"raw",q.raw)}var G=function ir(e,t){if(t<1){return""}if(t%2){return ir(e,t-1)+e}var r=ir(e,t/2);return r+r};var H=Infinity;var W={repeat:function ar(e){z.RequireObjectCoercible(this);var t=String(this);var r=z.ToInteger(e);if(r<0||r>=H){throw new RangeError("repeat count must be less than infinity and not overflow maximum string size")}return G(t,r)},startsWith:function ur(e){z.RequireObjectCoercible(this);var t=String(this);if(x.regex(e)){throw new TypeError('Cannot call method "startsWith" with a regex')}var r=String(e);var n=arguments.length>1?arguments[1]:void 0;var o=Math.max(z.ToInteger(n),0);return t.slice(o,o+r.length)===r},endsWith:function sr(e){z.RequireObjectCoercible(this);var t=String(this);if(x.regex(e)){throw new TypeError('Cannot call method "endsWith" with a regex')}var r=String(e);var n=t.length;var o=arguments.length>1?arguments[1]:void 0;var i=typeof o==="undefined"?n:z.ToInteger(o);var a=Math.min(Math.max(i,0),n);return t.slice(a-r.length,a)===r},includes:function fr(e){var t=arguments.length>1?arguments[1]:void 0;return w(this,e,t)!==-1},codePointAt:function cr(e){z.RequireObjectCoercible(this);var t=String(this);var r=z.ToInteger(e);var n=t.length;if(r>=0&&r<n){var o=t.charCodeAt(r);var i=r+1===n;if(o<55296||o>56319||i){return o}var a=t.charCodeAt(r+1);if(a<56320||a>57343){return o}return(o-55296)*1024+(a-56320)+65536}}};l(String.prototype,W);if("a".includes("a",Infinity)!==false){C(String.prototype,"includes",W.includes)}var V="\x85".trim().length!==1;if(V){delete String.prototype.trim;var $=["	\n\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028","\u2029\ufeff"].join("");var U=new RegExp("(^["+$+"]+)|(["+$+"]+$)","g");l(String.prototype,{trim:function lr(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}return String(this).replace(U,"")}})}var X=function(e){z.RequireObjectCoercible(e);this._s=String(e);this._i=0};X.prototype.next=function(){var e=this._s,t=this._i;if(typeof e==="undefined"||t>=e.length){this._s=void 0;return{value:void 0,done:true}}var r=e.charCodeAt(t),n,o;if(r<55296||r>56319||t+1===e.length){o=1}else{n=e.charCodeAt(t+1);o=n<56320||n>57343?1:2}this._i=t+o;return{value:e.substr(t,o),done:false}};k(X.prototype);k(String.prototype,function(){return new X(this)});if(!O){C(String.prototype,"startsWith",W.startsWith);C(String.prototype,"endsWith",W.endsWith)}var Z={from:function pr(e){var t=arguments.length>1?arguments[1]:void 0;var r=z.ToObject(e,"bad iterable");if(typeof t!=="undefined"&&!z.IsCallable(t)){throw new TypeError("Array.from: when provided, the second argument must be a function")}var n=arguments.length>2;var o=n?arguments[2]:void 0;var i=z.IsIterable(r);var a;var u,s,f;if(i){s=0;u=z.IsCallable(this)?Object(new this):[];var c=i?z.GetIterator(r):null;var l;do{l=z.IteratorNext(c);if(!l.done){f=l.value;if(t){u[s]=n?t.call(o,f,s):t(f,s)}else{u[s]=f}s+=1}}while(!l.done);a=s}else{a=z.ToLength(r.length);u=z.IsCallable(this)?Object(new this(a)):new Array(a);for(s=0;s<a;++s){f=r[s];if(t){u[s]=n?t.call(o,f,s):t(f,s)}else{u[s]=f}}}u.length=a;return u},of:function vr(){return Array.from.call(this,arguments)}};l(Array,Z);var K=function(e){return{value:e,done:arguments.length===0}};T=function(e,t){this.i=0;this.array=e;this.kind=t};l(T.prototype,{next:function(){var e=this.i,t=this.array;if(!(this instanceof T)){throw new TypeError("Not an ArrayIterator")}if(typeof t!=="undefined"){var r=z.ToLength(t.length);for(;e<r;e++){var n=this.kind;var o;if(n==="key"){o=e}else if(n==="value"){o=t[e]}else if(n==="entry"){o=[e,t[e]]}this.i=e+1;return{value:o,done:false}}}this.array=void 0;return{value:void 0,done:true}}});k(T.prototype);var B=function(e,t){this.object=e;this.array=null;this.kind=t};function J(e){var t=[];for(var r in e){t.push(r)}return t}l(B.prototype,{next:function(){var e,t=this.array;if(!(this instanceof B)){throw new TypeError("Not an ObjectIterator")}if(t===null){t=this.array=J(this.object)}while(z.ToLength(t.length)>0){e=t.shift();if(!(e in this.object)){continue}if(this.kind==="key"){return K(e)}else if(this.kind==="value"){return K(this.object[e])}else{return K([e,this.object[e]])}}return K()}});k(B.prototype);var Q=function(){var e=function r(e){this.length=e};e.prototype=[];var t=Array.of.apply(e,[1,2]);return t instanceof e&&t.length===2}();if(!Q){C(Array,"of",Z.of)}var Y={copyWithin:function hr(e,t){var r=arguments[2];var n=z.ToObject(this);var o=z.ToLength(n.length);var i=z.ToInteger(e);var a=z.ToInteger(t);var u=i<0?Math.max(o+i,0):Math.min(i,o);var s=a<0?Math.max(o+a,0):Math.min(a,o);r=typeof r==="undefined"?o:z.ToInteger(r);var f=r<0?Math.max(o+r,0):Math.min(r,o);var c=Math.min(f-s,o-u);var l=1;if(s<u&&u<s+c){l=-1;s+=c-1;u+=c-1}while(c>0){if(M(n,s)){n[u]=n[s]}else{delete n[s]}s+=l;u+=l;c-=1}return n},fill:function yr(e){var t=arguments.length>1?arguments[1]:void 0;var r=arguments.length>2?arguments[2]:void 0;var n=z.ToObject(this);var o=z.ToLength(n.length);t=z.ToInteger(typeof t==="undefined"?0:t);r=z.ToInteger(typeof r==="undefined"?o:r);var i=t<0?Math.max(o+t,0):Math.min(t,o);var a=r<0?o+r:r;for(var u=i;u<o&&u<a;++u){n[u]=e}return n},find:function br(e){var t=z.ToObject(this);var r=z.ToLength(t.length);if(!z.IsCallable(e)){throw new TypeError("Array#find: predicate must be a function")}var n=arguments.length>1?arguments[1]:null;for(var o=0,i;o<r;o++){i=t[o];if(n){if(e.call(n,i,o,t)){return i}}else if(e(i,o,t)){return i}}},findIndex:function gr(e){var t=z.ToObject(this);var r=z.ToLength(t.length);if(!z.IsCallable(e)){throw new TypeError("Array#findIndex: predicate must be a function")}var n=arguments.length>1?arguments[1]:null;for(var o=0;o<r;o++){if(n){if(e.call(n,t[o],o,t)){return o}}else if(e(t[o],o,t)){return o}}return-1},keys:function dr(){return new T(this,"key")},values:function mr(){return new T(this,"value")},entries:function Or(){return new T(this,"entry")}};if(Array.prototype.keys&&!z.IsCallable([1].keys().next)){delete Array.prototype.keys}if(Array.prototype.entries&&!z.IsCallable([1].entries().next)){delete Array.prototype.entries}if(Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[A]){l(Array.prototype,{values:Array.prototype[A]});if(x.symbol(S.unscopables)){Array.prototype[S.unscopables].values=true}}if(Array.prototype.values&&Array.prototype.values.name!=="values"){var ee=Array.prototype.values;C(Array.prototype,"values",function wr(){return ee.call(this)});c(Array.prototype,A,Array.prototype.values,true)}l(Array.prototype,Y);k(Array.prototype,function(){return this.values()});if(Object.getPrototypeOf){k(Object.getPrototypeOf([].values()))}var te=function(){return r(function(){return Array.from({length:-1}).length===0})}();var re=function(){var e=Array.from([0].entries());return e.length===1&&e[0][0]===0&&e[0][1]===1}();if(!te||!re){C(Array,"from",Z.from)}var ne=function(e,t){var n={length:-1};n[t?(-1>>>0)-1:0]=true;return r(function(){e.call(n,function(){throw new RangeError("should not reach here")},[])})};if(!ne(Array.prototype.forEach)){var oe=Array.prototype.forEach;C(Array.prototype,"forEach",function jr(e){return oe.apply(this.length>=0?this:[],arguments)},true)}if(!ne(Array.prototype.map)){var ie=Array.prototype.map;C(Array.prototype,"map",function Mr(e){return ie.apply(this.length>=0?this:[],arguments)},true)}if(!ne(Array.prototype.filter)){var ae=Array.prototype.filter;C(Array.prototype,"filter",function Tr(e){return ae.apply(this.length>=0?this:[],arguments)},true)}if(!ne(Array.prototype.some)){var ue=Array.prototype.some;C(Array.prototype,"some",function Ir(e){return ue.apply(this.length>=0?this:[],arguments)},true)}if(!ne(Array.prototype.every)){var se=Array.prototype.every;C(Array.prototype,"every",function Sr(e){return se.apply(this.length>=0?this:[],arguments)},true)}if(!ne(Array.prototype.reduce)){var fe=Array.prototype.reduce;C(Array.prototype,"reduce",function Er(e){return fe.apply(this.length>=0?this:[],arguments)},true)}if(!ne(Array.prototype.reduceRight,true)){var ce=Array.prototype.reduceRight;C(Array.prototype,"reduceRight",function xr(e){return ce.apply(this.length>=0?this:[],arguments)},true)}var le=Math.pow(2,53)-1;l(Number,{MAX_SAFE_INTEGER:le,MIN_SAFE_INTEGER:-le,EPSILON:2.220446049250313e-16,parseInt:g.parseInt,parseFloat:g.parseFloat,isFinite:P,isInteger:function _r(e){return P(e)&&z.ToInteger(e)===e},isSafeInteger:function Pr(e){return Number.isInteger(e)&&Math.abs(e)<=Number.MAX_SAFE_INTEGER},isNaN:_});c(Number,"parseInt",g.parseInt,Number.parseInt!==g.parseInt);if(![,1].find(function(e,t){return t===0})){C(Array.prototype,"find",Y.find)}if([,1].findIndex(function(e,t){return t===0})!==0){C(Array.prototype,"findIndex",Y.findIndex)}var pe=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable);var ve=function Nr(){var e=Number(this);var t=arguments.length;var r=t-e;var n=new Array(r<0?0:r);for(var o=e;o<t;++o){n[o-e]=arguments[o]}return n};var he=function Cr(e){return function t(r,n){r[n]=e[n];return r}};var ye=function(e,t){var r=Object.keys(Object(t));var n;if(z.IsCallable(Object.getOwnPropertySymbols)){n=f(Object.getOwnPropertySymbols(Object(t)),pe(t))}return s(r.concat(n||[]),he(t),e)};var be={assign:function(e,t){if(!z.TypeIsObject(e)){throw new TypeError("target must be an object")}return s(ve.apply(0,arguments),ye)},is:function Ar(e,t){return z.SameValue(e,t)}};var ge=Object.assign&&Object.preventExtensions&&function(){var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return e[1]==="y"}}();if(ge){C(Object,"assign",be.assign)}l(Object,be);if(i){var de={setPrototypeOf:function(e,t){var r;var n=function(e,t){if(!z.TypeIsObject(e)){throw new TypeError("cannot set prototype on a non-object")}if(!(t===null||z.TypeIsObject(t))){throw new TypeError("can only set prototype to an object or null"+t)}};var o=function(e,t){n(e,t);r.call(e,t);return e};try{r=e.getOwnPropertyDescriptor(e.prototype,t).set;r.call({},null)}catch(i){if(e.prototype!=={}[t]){return}r=function(e){this[t]=e};o.polyfill=o(o({},null),e.prototype)instanceof e}return o}(Object,"__proto__")};l(Object,de)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&Object.getPrototypeOf(Object.setPrototypeOf({},null))!==null&&Object.getPrototypeOf(Object.create(null))===null){(function(){var e=Object.create(null);var t=Object.getPrototypeOf,r=Object.setPrototypeOf;Object.getPrototypeOf=function(r){var n=t(r);return n===e?null:n};Object.setPrototypeOf=function(t,n){var o=n===null?e:n;return r(t,o)};Object.setPrototypeOf.polyfill=false})()}var me=!t(function(){Object.keys("foo")});if(!me){var Oe=Object.keys;C(Object,"keys",function kr(e){return Oe(z.ToObject(e))})}if(Object.getOwnPropertyNames){var we=!t(function(){Object.getOwnPropertyNames("foo")});if(!we){var je=Object.getOwnPropertyNames;C(Object,"getOwnPropertyNames",function Rr(e){return je(z.ToObject(e))})}}if(Object.getOwnPropertyDescriptor){var Me=!t(function(){Object.getOwnPropertyDescriptor("foo","bar")});if(!Me){var Te=Object.getOwnPropertyDescriptor;C(Object,"getOwnPropertyDescriptor",function Lr(e,t){return Te(z.ToObject(e),t)})}}if(Object.seal){var Ie=!t(function(){Object.seal("foo")});if(!Ie){var Se=Object.seal;C(Object,"seal",function zr(e){if(!x.object(e)){return e}return Se(e)})}}if(Object.isSealed){var Ee=!t(function(){Object.isSealed("foo")});if(!Ee){var xe=Object.isSealed;C(Object,"isSealed",function Fr(e){if(!x.object(e)){return true}return xe(e)})}}if(Object.freeze){var _e=!t(function(){Object.freeze("foo")});if(!_e){var Pe=Object.freeze;C(Object,"freeze",function Dr(e){if(!x.object(e)){return e}return Pe(e)})}}if(Object.isFrozen){var Ne=!t(function(){Object.isFrozen("foo")});if(!Ne){var Ce=Object.isFrozen;C(Object,"isFrozen",function qr(e){if(!x.object(e)){return true}return Ce(e)})}}if(Object.preventExtensions){var Ae=!t(function(){Object.preventExtensions("foo")});if(!Ae){var ke=Object.preventExtensions;C(Object,"preventExtensions",function Gr(e){if(!x.object(e)){return e}return ke(e)})}}if(Object.isExtensible){var Re=!t(function(){Object.isExtensible("foo")});if(!Re){var Le=Object.isExtensible;C(Object,"isExtensible",function Hr(e){if(!x.object(e)){return false}return Le(e)})}}if(Object.getPrototypeOf){var ze=!t(function(){Object.getPrototypeOf("foo")});if(!ze){var Fe=Object.getPrototypeOf;C(Object,"getPrototypeOf",function Wr(e){return Fe(z.ToObject(e))})}}if(!RegExp.prototype.flags&&i){var De=function Vr(){if(!z.TypeIsObject(this)){throw new TypeError("Method called on incompatible type: must be an object.")}var e="";if(this.global){e+="g"}if(this.ignoreCase){e+="i"}if(this.multiline){e+="m"}if(this.unicode){e+="u"}if(this.sticky){e+="y"}return e};N.getter(RegExp.prototype,"flags",De)}var qe=r(function(){return String(new RegExp(/a/g,"i"))==="/a/i"});if(!qe&&i){var Ge=RegExp;var He=function $r(e,t){var r=this instanceof $r;if(!r&&(x.regex(e)||e.constructor===$r)){return e}if(x.regex(e)&&x.string(t)){return new $r(e.source,t)}return new Ge(e,t)};N.preserveToString(He,Ge);if(Object.setPrototypeOf){Object.setPrototypeOf(Ge,He)}a(Object.getOwnPropertyNames(Ge),function(e){if(e==="$input"){return}if(e in I){return}N.proxy(Ge,e,He)});He.prototype=Ge.prototype;N.redefine(Ge.prototype,"constructor",He);RegExp=He;N.redefine(g,"RegExp",He)}if(i){var We={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};a(Object.keys(We),function(e){if(e in RegExp&&!(We[e]in RegExp)){N.getter(RegExp,We[e],function t(){return RegExp[e]})}})}var Ve=function(e){return e*e};var $e=function(e,t){return e+t};var Ue=1/Number.EPSILON;var Xe=function Ur(e){return e+Ue-Ue};var Ze=Math.pow(2,-23);var Ke=Math.pow(2,127)*(2-Ze);var Be=Math.pow(2,-126);var Je=Number.prototype.clz;delete Number.prototype.clz;var Qe={acosh:function Xr(e){var t=Number(e);if(Number.isNaN(t)||e<1){return NaN}if(t===1){return 0}if(t===Infinity){return t}return Math.log(t/Math.E+Math.sqrt(t+1)*Math.sqrt(t-1)/Math.E)+1},asinh:function Zr(e){var t=Number(e);if(t===0||!d(t)){return t}return t<0?-Math.asinh(-t):Math.log(t+Math.sqrt(t*t+1))},atanh:function Kr(e){var t=Number(e);if(Number.isNaN(t)||t<-1||t>1){return NaN}if(t===-1){return-Infinity}if(t===1){return Infinity}if(t===0){return t}return.5*Math.log((1+t)/(1-t))},cbrt:function Br(e){var t=Number(e);if(t===0){return t}var r=t<0,n;if(r){t=-t}if(t===Infinity){n=Infinity}else{n=Math.exp(Math.log(t)/3);n=(t/(n*n)+2*n)/3}return r?-n:n},clz32:function Jr(e){var t=Number(e);var r=z.ToUint32(t);if(r===0){return 32}return Je?Je.call(r):31-Math.floor(Math.log(r+.5)*Math.LOG2E)},cosh:function Qr(e){var t=Number(e);if(t===0){return 1}if(Number.isNaN(t)){return NaN}if(!d(t)){return Infinity}if(t<0){t=-t}if(t>21){return Math.exp(t)/2}return(Math.exp(t)+Math.exp(-t))/2},expm1:function Yr(e){var t=Number(e);if(t===-Infinity){return-1}if(!d(t)||t===0){return t}if(Math.abs(t)>.5){return Math.exp(t)-1}var r=t;var n=0;var o=1;while(n+r!==n){n+=r;o+=1;r*=t/o}return n},hypot:function en(e,t){var r=false;var n=true;var o=false;var i=[];Array.prototype.every.call(arguments,function(e){var t=Number(e);if(Number.isNaN(t)){r=true}else if(t===Infinity||t===-Infinity){o=true}else if(t!==0){n=false}if(o){return false}else if(!r){i.push(Math.abs(t))}return true});if(o){return Infinity}if(r){return NaN}if(n){return 0}var a=Math.max.apply(Math,i);var f=u(i,function(e){return e/a});var c=s(u(f,Ve),$e);return a*Math.sqrt(c)},log2:function tn(e){return Math.log(e)*Math.LOG2E},log10:function rn(e){return Math.log(e)*Math.LOG10E},log1p:function nn(e){var t=Number(e);if(t<-1||Number.isNaN(t)){return NaN}if(t===0||t===Infinity){return t}if(t===-1){return-Infinity}return 1+t-1===0?t:t*(Math.log(1+t)/(1+t-1))},sign:function on(e){var t=Number(e);if(t===0){return t}if(Number.isNaN(t)){return t}return t<0?-1:1},sinh:function an(e){var t=Number(e);if(!d(t)||t===0){return t}if(Math.abs(t)<1){return(Math.expm1(t)-Math.expm1(-t))/2}return(Math.exp(t-1)-Math.exp(-t-1))*Math.E/2},tanh:function un(e){var t=Number(e);if(Number.isNaN(t)||t===0){return t}if(t===Infinity){return 1}if(t===-Infinity){return-1}var r=Math.expm1(t);var n=Math.expm1(-t);if(r===Infinity){return 1}if(n===Infinity){return-1}return(r-n)/(Math.exp(t)+Math.exp(-t))},trunc:function sn(e){var t=Number(e);return t<0?-Math.floor(-t):Math.floor(t)},imul:function fn(e,t){var r=z.ToUint32(e);var n=z.ToUint32(t);var o=r>>>16&65535;var i=r&65535;var a=n>>>16&65535;var u=n&65535;return i*u+(o*u+i*a<<16>>>0)|0},fround:function cn(e){var t=Number(e);if(t===0||t===Infinity||t===-Infinity||_(t)){return t}var r=Math.sign(t);var n=Math.abs(t);if(n<Be){return r*Xe(n/Be/Ze)*Be*Ze}var o=(1+Ze/Number.EPSILON)*n;var i=o-(o-n);if(i>Ke||_(i)){return r*Infinity}return r*i}};l(Math,Qe);c(Math,"log1p",Qe.log1p,Math.log1p(-1e-17)!==-1e-17);c(Math,"asinh",Qe.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7));c(Math,"tanh",Qe.tanh,Math.tanh(-2e-17)!==-2e-17);c(Math,"acosh",Qe.acosh,Math.acosh(Number.MAX_VALUE)===Infinity);c(Math,"cbrt",Qe.cbrt,Math.abs(1-Math.cbrt(1e-300)/1e-100)/Number.EPSILON>8);c(Math,"sinh",Qe.sinh,Math.sinh(-2e-17)!==-2e-17);var Ye=Math.expm1(10);c(Math,"expm1",Qe.expm1,Ye>22025.465794806718||Ye<22025.465794806718);var et=Math.round;var tt=Math.round(.5-Number.EPSILON/4)===0&&Math.round(-.5+Number.EPSILON/3.99)===1;var rt=Ue+1;var nt=2*Ue-1;var ot=[rt,nt].every(function(e){return Math.round(e)===e});c(Math,"round",function ln(e){var t=Math.floor(e);var r=t===-1?-0:t+1;return e-t<.5?t:r},!tt||!ot);N.preserveToString(Math.round,et);var it=Math.imul;if(Math.imul(4294967295,5)!==-5){Math.imul=Qe.imul;N.preserveToString(Math.imul,it)}if(Math.imul.length!==2){C(Math,"imul",function pn(e,t){return it.apply(Math,arguments)})}var at=function(){var e,t;z.IsPromise=function(e){if(!z.TypeIsObject(e)){return false}if(!e._promiseConstructor){return false}if(typeof e._status==="undefined"){return false}return true};var r=function(e){if(!z.IsCallable(e)){throw new TypeError("bad promise constructor")}var t=this;var r=function(e,r){t.resolve=e;t.reject=r};t.promise=z.Construct(e,[r]);if(!t.promise._es6construct){throw new TypeError("bad promise constructor")}if(!(z.IsCallable(t.resolve)&&z.IsCallable(t.reject))){throw new TypeError("bad promise constructor")}};var n=g.setTimeout;var o;if(typeof window!=="undefined"&&z.IsCallable(window.postMessage)){o=function(){var e=[];var t="zero-timeout-message";var r=function(r){e.push(r);window.postMessage(t,"*")};var n=function(r){if(r.source===window&&r.data===t){r.stopPropagation();if(e.length===0){return}var n=e.shift();n()}};window.addEventListener("message",n,true);return r}}var i=function(){var e=g.Promise;return e&&e.resolve&&function(t){return e.resolve().then(t)}};var u=z.IsCallable(g.setImmediate)?g.setImmediate.bind(g):typeof process==="object"&&process.nextTick?process.nextTick:i()||(z.IsCallable(o)?o():function(e){n(e,0)});var s=function(e,t){if(!z.TypeIsObject(e)){return false}var r=t.resolve;var n=t.reject;try{var o=e.then;if(!z.IsCallable(o)){return false}o.call(e,r,n)}catch(i){n(i)}return true};var f=function(e,t){a(e,function(e){u(function(){var r=e.handler;var n=e.capability;var o=n.resolve;var i=n.reject;try{var a=r(t);if(a===n.promise){throw new TypeError("self resolution")}var u=s(a,n);if(!u){o(a)}}catch(f){i(f)}})})};var v=function(e,t,n){return function(o){if(o===e){return n(new TypeError("self resolution"))}var i=e._promiseConstructor;var a=new r(i);var u=s(o,a);if(u){return a.promise.then(t,n)}else{return t(o)}}};e=function(e){var t=this;t=F(t);if(!t._promiseConstructor){throw new TypeError("bad promise")}if(typeof t._status!=="undefined"){throw new TypeError("promise already initialized")}if(!z.IsCallable(e)){throw new TypeError("not a valid resolver")}t._status="unresolved";t._resolveReactions=[];t._rejectReactions=[];var r=function(e){if(t._status!=="unresolved"){return}var r=t._resolveReactions;t._result=e;t._resolveReactions=void 0;t._rejectReactions=void 0;t._status="has-resolution";f(r,e)};var n=function(e){if(t._status!=="unresolved"){return}var r=t._rejectReactions;t._result=e;t._resolveReactions=void 0;t._rejectReactions=void 0;t._status="has-rejection";f(r,e)};try{e(r,n)}catch(o){n(o)}return t};t=e.prototype;var h=function(e,t,r,n){var o=false;return function(i){if(o){return}o=true;t[e]=i;if(--n.count===0){var a=r.resolve;a(t)}}};c(e,E,function(e){var r=this;var n=r.prototype||t;var o=e||p(n);l(o,{_status:void 0,_result:void 0,_resolveReactions:void 0,_rejectReactions:void 0,_promiseConstructor:void 0});o._promiseConstructor=r;return o});l(e,{all:function d(e){var t=this;var n=new r(t);var o=n.resolve;var i=n.reject;try{if(!z.IsIterable(e)){throw new TypeError("bad iterable")}var a=z.GetIterator(e);var u=[],s={count:1};for(var f=0;;f++){var c=z.IteratorNext(a);if(c.done){break}var l=t.resolve(c.value);var p=h(f,u,n,s);s.count++;l.then(p,n.reject)}if(--s.count===0){o(u)}}catch(v){i(v)}return n.promise},race:function m(e){var t=this;var n=new r(t);var o=n.resolve;var i=n.reject;try{if(!z.IsIterable(e)){throw new TypeError("bad iterable")}var a=z.GetIterator(e);while(true){var u=z.IteratorNext(a);if(u.done){break}var s=t.resolve(u.value);s.then(o,i)}}catch(f){i(f)}return n.promise},reject:function O(e){var t=this;var n=new r(t);var o=n.reject;o(e);return n.promise},resolve:function w(e){var t=this;if(z.IsPromise(e)){var n=e._promiseConstructor;if(n===t){return e}}var o=new r(t);var i=o.resolve;i(e);return o.promise}});var y=function(e){return e};var b=function(e){throw e};l(t,{"catch":function(e){return this.then(void 0,e)},then:function j(e,t){var n=this;if(!z.IsPromise(n)){throw new TypeError("not a promise")}var o=this.constructor;var i=new r(o);if(!z.IsCallable(t)){t=b}if(!z.IsCallable(e)){e=y}var a=v(n,e,t);var u={capability:i,handler:a};var s={capability:i,handler:t};switch(n._status){case"unresolved":n._resolveReactions.push(u);n._rejectReactions.push(s);break;case"has-resolution":f([u],n._result);break;case"has-rejection":f([s],n._result);break;default:throw new TypeError("unexpected")}return i.promise}});return e}();if(g.Promise){delete g.Promise.accept;delete g.Promise.defer;delete g.Promise.prototype.chain}l(g,{Promise:at});var ut=v(g.Promise,function(e){return e.resolve(42)instanceof e});var st=!t(function(){g.Promise.reject(42).then(null,5).then(null,I)});var ft=t(function(){g.Promise.call(3,I)});if(!ut||!st||!ft){Promise=at;C(g,"Promise",at)}var ct=function(e){var t=Object.keys(s(e,function(e,t){e[t]=true;return e},{}));return e.join(":")===t.join(":")};var lt=ct(["z","a","bb"]);var pt=ct(["z",1,"a","3",2]);if(i){var vt=function vn(e){if(!lt){return null}var t=typeof e;if(t==="string"){return"$"+e}else if(t==="number"){if(!pt){return"n"+e}return e}return null};var ht=function hn(){return Object.create?Object.create(null):{}};var yt={Map:function(){var e={};function t(e,t){this.key=e;this.value=t;this.next=null;this.prev=null}t.prototype.isRemoved=function(){return this.key===e};var r=function u(e){return!!e._es6map};var n=function s(e,t){if(!z.TypeIsObject(e)||!r(e)){throw new TypeError("Method Map.prototype."+t+" called on incompatible receiver "+String(e))}};function o(e,t){n(e,"[[MapIterator]]");this.head=e._head;this.i=this.head;this.kind=t}o.prototype={next:function(){var e=this.i,t=this.kind,r=this.head,n;if(typeof this.i==="undefined"){return{value:void 0,done:true}}while(e.isRemoved()&&e!==r){e=e.prev}while(e.next!==r){e=e.next;if(!e.isRemoved()){if(t==="key"){n=e.key}else if(t==="value"){n=e.value}else{n=[e.key,e.value]}this.i=e;return{value:n,done:false}}}this.i=void 0;return{value:void 0,done:true}}};k(o.prototype);function i(){var e=this;if(!z.TypeIsObject(e)){throw new TypeError("Constructor Map requires 'new'")}e=F(e);if(!e._es6map){throw new TypeError("bad map")}var r=new t(null,null);r.next=r.prev=r;l(e,{_head:r,_storage:ht(),_size:0});if(arguments.length>0&&typeof arguments[0]!=="undefined"&&arguments[0]!==null){var n=z.GetIterator(arguments[0]);var o=e.set;if(!z.IsCallable(o)){throw new TypeError("bad map")}while(true){var i=z.IteratorNext(n);if(i.done){break}var a=i.value;if(!z.TypeIsObject(a)){throw new TypeError("expected iterable of pairs")}o.call(e,a[0],a[1])}}return e}var a=i.prototype;c(i,E,function(e){var t=this;var r=t.prototype||a;var n=e||p(r);l(n,{_es6map:true});return n});N.getter(i.prototype,"size",function(){if(typeof this._size==="undefined"){throw new TypeError("size method called on incompatible Map")}return this._size});l(i.prototype,{get:function(e){n(this,"get");var t=vt(e);if(t!==null){var r=this._storage[t];if(r){return r.value}else{return}}var o=this._head,i=o;while((i=i.next)!==o){if(z.SameValueZero(i.key,e)){return i.value}}},has:function(e){n(this,"has");var t=vt(e);if(t!==null){return typeof this._storage[t]!=="undefined"}var r=this._head,o=r;while((o=o.next)!==r){if(z.SameValueZero(o.key,e)){return true}}return false},set:function(e,r){n(this,"set");var o=this._head,i=o,a;var u=vt(e);if(u!==null){if(typeof this._storage[u]!=="undefined"){this._storage[u].value=r;return this}else{a=this._storage[u]=new t(e,r);i=o.prev}}while((i=i.next)!==o){if(z.SameValueZero(i.key,e)){i.value=r;return this}}a=a||new t(e,r);if(z.SameValue(-0,e)){a.key=+0}a.next=this._head;a.prev=this._head.prev;a.prev.next=a;a.next.prev=a;this._size+=1;return this},"delete":function(t){n(this,"delete");var r=this._head,o=r;var i=vt(t);if(i!==null){if(typeof this._storage[i]==="undefined"){return false}o=this._storage[i].prev;delete this._storage[i]}while((o=o.next)!==r){if(z.SameValueZero(o.key,t)){o.key=o.value=e;o.prev.next=o.next;o.next.prev=o.prev;this._size-=1;

return true}}return false},clear:function f(){n(this,"clear");this._size=0;this._storage=ht();var t=this._head,r=t,o=r.next;while((r=o)!==t){r.key=r.value=e;o=r.next;r.next=r.prev=t}t.next=t.prev=t},keys:function v(){n(this,"keys");return new o(this,"key")},values:function h(){n(this,"values");return new o(this,"value")},entries:function y(){n(this,"entries");return new o(this,"key+value")},forEach:function b(e){n(this,"forEach");var t=arguments.length>1?arguments[1]:null;var r=this.entries();for(var o=r.next();!o.done;o=r.next()){if(t){e.call(t,o.value[1],o.value[0],this)}else{e(o.value[1],o.value[0],this)}}}});k(i.prototype,function(){return this.entries()});return i}(),Set:function(){var e=function i(e){return e._es6set&&typeof e._storage!=="undefined"};var t=function u(t,r){if(!z.TypeIsObject(t)||!e(t)){throw new TypeError("Set.prototype."+r+" called on incompatible receiver "+String(t))}};var r=function s(){var e=this;if(!z.TypeIsObject(e)){throw new TypeError("Constructor Set requires 'new'")}e=F(e);if(!e._es6set){throw new TypeError("bad set")}l(e,{"[[SetData]]":null,_storage:ht()});if(arguments.length>0&&typeof arguments[0]!=="undefined"&&arguments[0]!==null){var t=arguments[0];var r=z.GetIterator(t);var n=e.add;if(!z.IsCallable(n)){throw new TypeError("bad set")}while(true){var o=z.IteratorNext(r);if(o.done){break}var i=o.value;n.call(e,i)}}return e};var n=r.prototype;c(r,E,function(e){var t=this;var r=t.prototype||n;var o=e||p(r);l(o,{_es6set:true});return o});var o=function f(e){if(!e["[[SetData]]"]){var t=e["[[SetData]]"]=new yt.Map;a(Object.keys(e._storage),function(e){if(e.charCodeAt(0)===36){e=e.slice(1)}else if(e.charAt(0)==="n"){e=+e.slice(1)}else{e=+e}t.set(e,e)});e._storage=null}};N.getter(r.prototype,"size",function(){t(this,"size");o(this);return this["[[SetData]]"].size});l(r.prototype,{has:function(e){t(this,"has");var r;if(this._storage&&(r=vt(e))!==null){return!!this._storage[r]}o(this);return this["[[SetData]]"].has(e)},add:function(e){t(this,"add");var r;if(this._storage&&(r=vt(e))!==null){this._storage[r]=true;return this}o(this);this["[[SetData]]"].set(e,e);return this},"delete":function(e){t(this,"delete");var r;if(this._storage&&(r=vt(e))!==null){var n=M(this._storage,r);return delete this._storage[r]&&n}o(this);return this["[[SetData]]"]["delete"](e)},clear:function v(){t(this,"clear");if(this._storage){this._storage=ht()}else{this["[[SetData]]"].clear()}},values:function h(){t(this,"values");o(this);return this["[[SetData]]"].values()},entries:function y(){t(this,"entries");o(this);return this["[[SetData]]"].entries()},forEach:function b(e){t(this,"forEach");var r=arguments.length>1?arguments[1]:null;var n=this;o(n);this["[[SetData]]"].forEach(function(t,o){if(r){e.call(r,o,o,n)}else{e(o,o,n)}})}});c(r,"keys",r.values,true);k(r.prototype,function(){return this.values()});return r}()};l(g,yt);if(g.Map||g.Set){var bt=r(function(){return new Map([[1,2]]).get(1)===2});if(!bt){var gt=g.Map;g.Map=function yn(){if(!(this instanceof yn)){throw new TypeError('Constructor Map requires "new"')}var e=new gt;var t;if(arguments.length>0){t=arguments[0]}if(Array.isArray(t)||x.string(t)){a(t,function(t){e.set(t[0],t[1])})}else if(t instanceof yn){yn.prototype.forEach.call(t,function(t,r){e.set(r,t)})}Object.setPrototypeOf(e,g.Map.prototype);c(e,"constructor",yn,true);return e};g.Map.prototype=p(gt.prototype);N.preserveToString(g.Map,gt)}var dt=new Map;var mt=function(e){e["delete"](0);e["delete"](-0);e.set(0,3);e.get(-0,4);return e.get(0)===3&&e.get(-0)===4}(dt);var Ot=dt.set(1,2)===dt;if(!mt||!Ot){var wt=Map.prototype.set;C(Map.prototype,"set",function bn(e,t){wt.call(this,e===0?0:e,t);return this})}if(!mt){var jt=Map.prototype.get;var Mt=Map.prototype.has;l(Map.prototype,{get:function gn(e){return jt.call(this,e===0?0:e)},has:function dn(e){return Mt.call(this,e===0?0:e)}},true);N.preserveToString(Map.prototype.get,jt);N.preserveToString(Map.prototype.has,Mt)}var Tt=new Set;var It=function(e){e["delete"](0);e.add(-0);return!e.has(0)}(Tt);var St=Tt.add(1)===Tt;if(!It||!St){var Et=Set.prototype.add;Set.prototype.add=function mn(e){Et.call(this,e===0?0:e);return this};N.preserveToString(Set.prototype.add,Et)}if(!It){var xt=Set.prototype.has;Set.prototype.has=function On(e){return xt.call(this,e===0?0:e)};N.preserveToString(Set.prototype.has,xt);var _t=Set.prototype["delete"];Set.prototype["delete"]=function wn(e){return _t.call(this,e===0?0:e)};N.preserveToString(Set.prototype["delete"],_t)}var Pt=v(g.Map,function(e){var t=new e([]);t.set(42,42);return t instanceof e});var Nt=Object.setPrototypeOf&&!Pt;var Ct=function(){try{return!(g.Map()instanceof g.Map)}catch(e){return e instanceof TypeError}}();if(g.Map.length!==0||Nt||!Ct){var At=g.Map;g.Map=function jn(){if(!(this instanceof jn)){throw new TypeError('Constructor Map requires "new"')}var e=arguments.length>0?new At(arguments[0]):new At;Object.setPrototypeOf(e,jn.prototype);c(e,"constructor",jn,true);return e};g.Map.prototype=At.prototype;N.preserveToString(g.Map,At)}var kt=v(g.Set,function(e){var t=new e([]);t.add(42,42);return t instanceof e});var Rt=Object.setPrototypeOf&&!kt;var Lt=function(){try{return!(g.Set()instanceof g.Set)}catch(e){return e instanceof TypeError}}();if(g.Set.length!==0||Rt||!Lt){var zt=g.Set;g.Set=function Mn(){if(!(this instanceof Mn)){throw new TypeError('Constructor Set requires "new"')}var e=arguments.length>0?new zt(arguments[0]):new zt;Object.setPrototypeOf(e,Mn.prototype);c(e,"constructor",Mn,true);return e};g.Set.prototype=zt.prototype;N.preserveToString(g.Set,zt)}var Ft=!r(function(){return(new Map).keys().next().done});if(typeof g.Map.prototype.clear!=="function"||(new g.Set).size!==0||(new g.Map).size!==0||typeof g.Map.prototype.keys!=="function"||typeof g.Set.prototype.keys!=="function"||typeof g.Map.prototype.forEach!=="function"||typeof g.Set.prototype.forEach!=="function"||n(g.Map)||n(g.Set)||typeof(new g.Map).keys().next!=="function"||Ft||!Pt){delete g.Map;delete g.Set;l(g,{Map:yt.Map,Set:yt.Set},true)}}if(g.Set.prototype.keys!==g.Set.prototype.values){c(g.Set.prototype,"keys",g.Set.prototype.values,true)}k(Object.getPrototypeOf((new g.Map).keys()));k(Object.getPrototypeOf((new g.Set).keys()))}if(!g.Reflect){c(g,"Reflect",{})}var Dt=g.Reflect;var qt=function Tn(e){if(!z.TypeIsObject(e)){throw new TypeError("target must be an object")}};l(g.Reflect,{apply:function In(){return z.Call.apply(null,arguments)},construct:function Sn(e,t){if(!z.IsCallable(e)){throw new TypeError("First argument must be callable.")}return z.Construct(e,t)},deleteProperty:function En(e,t){qt(e);if(i){var r=Object.getOwnPropertyDescriptor(e,t);if(r&&!r.configurable){return false}}return delete e[t]},enumerate:function xn(e){qt(e);return new B(e,"key")},has:function _n(e,t){qt(e);return t in e}});if(Object.getOwnPropertyNames){l(g.Reflect,{ownKeys:function Pn(e){qt(e);var t=Object.getOwnPropertyNames(e);if(z.IsCallable(Object.getOwnPropertySymbols)){t.push.apply(t,Object.getOwnPropertySymbols(e))}return t}})}var Gt=function Nn(e){return!t(e)};if(Object.preventExtensions){l(g.Reflect,{isExtensible:function Cn(e){qt(e);return Object.isExtensible(e)},preventExtensions:function An(e){qt(e);return Gt(function(){Object.preventExtensions(e)})}})}if(i){var Ht=function kn(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(!n){var o=Object.getPrototypeOf(e);if(o===null){return undefined}return Ht(o,t,r)}if("value"in n){return n.value}if(n.get){return n.get.call(r)}return undefined};var Wt=function Rn(e,t,r,n){var o=Object.getOwnPropertyDescriptor(e,t);if(!o){var i=Object.getPrototypeOf(e);if(i!==null){return Wt(i,t,r,n)}o={value:void 0,writable:true,enumerable:true,configurable:true}}if("value"in o){if(!o.writable){return false}if(!z.TypeIsObject(n)){return false}var a=Object.getOwnPropertyDescriptor(n,t);if(a){return Dt.defineProperty(n,t,{value:r})}else{return Dt.defineProperty(n,t,{value:r,writable:true,enumerable:true,configurable:true})}}if(o.set){o.set.call(n,r);return true}return false};l(g.Reflect,{defineProperty:function Ln(e,t,r){qt(e);return Gt(function(){Object.defineProperty(e,t,r)})},getOwnPropertyDescriptor:function zn(e,t){qt(e);return Object.getOwnPropertyDescriptor(e,t)},get:function Fn(e,t){qt(e);var r=arguments.length>2?arguments[2]:e;return Ht(e,t,r)},set:function Dn(e,t,r){qt(e);var n=arguments.length>3?arguments[3]:e;return Wt(e,t,r,n)}})}if(Object.getPrototypeOf){var Vt=Object.getPrototypeOf;l(g.Reflect,{getPrototypeOf:function qn(e){qt(e);return Vt(e)}})}if(Object.setPrototypeOf){var $t=function(e,t){while(t){if(e===t){return true}t=Dt.getPrototypeOf(t)}return false};l(g.Reflect,{setPrototypeOf:function Gn(e,t){qt(e);if(t!==null&&!z.TypeIsObject(t)){throw new TypeError("proto must be an object or null")}if(t===Dt.getPrototypeOf(e)){return true}if(Dt.isExtensible&&!Dt.isExtensible(e)){return false}if($t(e,t)){return false}Object.setPrototypeOf(e,t);return true}})}if(String(new Date(NaN))!=="Invalid Date"){var Ut=Date.prototype.toString;var Xt=function Hn(){var e=+this;if(e!==e){return"Invalid Date"}return Ut.call(this)};C(Date.prototype,"toString",Xt)}var Zt={anchor:function Wn(e){return z.CreateHTML(this,"a","name",e)},big:function Vn(){return z.CreateHTML(this,"big","","")},blink:function $n(){return z.CreateHTML(this,"blink","","")},bold:function Un(){return z.CreateHTML(this,"b","","")},fixed:function Xn(){return z.CreateHTML(this,"tt","","")},fontcolor:function Zn(e){return z.CreateHTML(this,"font","color",e)},fontsize:function Kn(e){return z.CreateHTML(this,"font","size",e)},italics:function Bn(){return z.CreateHTML(this,"i","","")},link:function Jn(e){return z.CreateHTML(this,"a","href",e)},small:function Qn(){return z.CreateHTML(this,"small","","")},strike:function Yn(){return z.CreateHTML(this,"strike","","")},sub:function eo(){return z.CreateHTML(this,"sub","","")},sup:function to(){return z.CreateHTML(this,"sup","","")}};l(String.prototype,Zt);a(Object.keys(Zt),function(e){var t=String.prototype[e];var r=false;if(z.IsCallable(t)){var n=t.call("",' " ');var o=[].concat(n.match(/"/g)).length;r=n!==n.toLowerCase()||o>2}else{r=true}if(r){c(String.prototype,e,Zt[e],true)}});return g});
//# sourceMappingURL=es6-shim.map
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

var _createClass = (function () {
  function defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);
    }
  }return function (Constructor, protoProps, staticProps) {
    if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;
  };
})();

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : { "default": obj };
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

/**
  * @Animator Class
  *
  * @description Houses all Animator functionality
  * @returns {Object}
  */

var _prefixes = require("./prefixes");

var _prefixes2 = _interopRequireDefault(_prefixes);

var _cssUtils = require("./css-utils");

var _cssUtils2 = _interopRequireDefault(_cssUtils);

var _domUtils = require("./dom-utils");

var _domUtils2 = _interopRequireDefault(_domUtils);

var _animationSeq = require("./animation-seq");

var _animationSeq2 = _interopRequireDefault(_animationSeq);

var _transitionSeq = require("./transition-seq");

var _transitionSeq2 = _interopRequireDefault(_transitionSeq);

var _comboSeq = require("./combo-seq");

var _comboSeq2 = _interopRequireDefault(_comboSeq);

var _seqWrapper = require("./seq-wrapper");

var _seqWrapper2 = _interopRequireDefault(_seqWrapper);

var _tracker = require("./tracker");

var _tracker2 = _interopRequireDefault(_tracker);

var _es6Promise = require("./es6-promise");

var Animator = (function () {

  /**
    * @constructor function
    *
    * @description Creates a stylesheet and Tracker object to be used throughout Animator.
    */

  function Animator() {
    _classCallCheck(this, Animator);

    this.stylesheet = new _cssUtils2["default"]().createStyleSheet();
    this.tracker = new _tracker2["default"](_domUtils2["default"], _prefixes2["default"], _cssUtils2["default"], _transitionSeq2["default"]);
  }

  _createClass(Animator, [{
    key: "getPrefix",

    /**
      * @getPrefix function
      *
      * @params {String}
      * @description Returns a prefixed CSS property or DOM event name.
      * @return {String}
      */

    value: function getPrefix(prefix) {
      return new _prefixes2["default"]().getPrefix(prefix);
    }
  }, {
    key: "setStyles",

    /**
      * @setStyles function
      *
      * @params {HTMLElement, String / Array}
      * @description Sets properties / values on an element's CSSStyleDeclaration.
      */

    value: function setStyles(element, styles) {
      return new _cssUtils2["default"]().setStyles(element, styles);
    }
  }, {
    key: "getStyles",

    /**
      * @getStyles function
      *
      * @params {HTMLElement, Object}
      * @description Return an object of CSS properties / values.
      * @return {Object}
      */

    value: function getStyles(element, properties) {
      return new _cssUtils2["default"]().getStyles(element, properties);
    }
  }, {
    key: "createTransition",

    /**
      * @createTransition function
      *
      * @params {Object}
      * @description Creates a CSS transition definition.
      */

    value: function createTransition(transition) {
      new _cssUtils2["default"]().createTransition(transition, _prefixes2["default"]);
    }
  }, {
    key: "createAnimation",

    /**
      * @createAnimation function
      *
      * @params {Object}
      * @description Creates a CSS keyframe animation definition.
      */

    value: function createAnimation(animation) {
      new _cssUtils2["default"]().createKeyframeAnimation(animation, _prefixes2["default"], this.stylesheet);
    }
  }, {
    key: "createClass",

    /**
      * @createClass function
      *
      * @params {String, Object}
      * @description Creates a CSS class and appends it to the stylesheet.
      */

    value: function createClass(className, rules) {
      new _cssUtils2["default"]().createClass(className, this.stylesheet, rules);
    }
  }, {
    key: "deleteClass",

    /**
      * @deleteClass function
      *
      * @params {String}
      * @description Deletes a CSS class from the stylesheet.
      */

    value: function deleteClass(className) {
      new _cssUtils2["default"]().deleteClass(className, this.stylesheet);
    }
  }, {
    key: "addClass",

    /**
      * @addClass function
      *
      * @params {HTMLElement, String / Array}
      * @description Sets a class(es) on an element.
      */

    value: function addClass(element, classList) {
      new _domUtils2["default"]().setClass(element, classList, true);
    }
  }, {
    key: "removeClass",

    /**
      * @removeClass function
      *
      * @params {HTMLElement, String / Array}
      * @description Removes a class(es) from an element.
      */

    value: function removeClass(element, classList) {
      new _domUtils2["default"]().setClass(element, classList, false);
    }
  }, {
    key: "transition",

    /**
      * @transition function
      *
      * @params {Object}
      * @description Creates a transition sequence.
      * @returns {Promise}
      */

    value: function transition(options) {
      return new _seqWrapper2["default"](options, _domUtils2["default"], _prefixes2["default"], _cssUtils2["default"], _es6Promise.Promise, _transitionSeq2["default"], _comboSeq2["default"], this.tracker);
    }
  }, {
    key: "animation",

    /**
      * @animation function
      *
      * @params {Object}
      * @description Creates an animation sequence.
      * @returns {Promise}
      */

    value: function animation(options) {
      return new _seqWrapper2["default"](options, _domUtils2["default"], _prefixes2["default"], _cssUtils2["default"], _es6Promise.Promise, _animationSeq2["default"], _comboSeq2["default"], this.tracker);
    }
  }, {
    key: "combo",

    /**
      * @combo function
      *
      * @params {Object}
      * @description Creates an combination of sequence.
      * @returns {Promise}
      */

    value: function combo(animations) {
      return new _comboSeq2["default"](animations, _es6Promise.Promise);
    }
  }, {
    key: "isSupported",

    /**
      * @isSupported function
      *
      * @description Tests the browser for Animator support.
      * @returns {Boolean}
      */

    value: function isSupported() {
      return new _domUtils2["default"]().support(_prefixes2["default"], _cssUtils2["default"], this.stylesheet);
    }
  }, {
    key: "pause",

    /**
      * @pause function
      *
      * @description Pause the current sequence.
      */

    value: function pause() {
      this.tracker.pause();
    }
  }, {
    key: "play",

    /**
      * @play function
      *
      * @description Plays the current sequence.
      */

    value: function play() {
      this.tracker.play();
    }
  }]);

  return Animator;
})();

window.Animator = new Animator();

},{"./animation-seq":2,"./combo-seq":3,"./css-utils":4,"./dom-utils":5,"./es6-promise":6,"./prefixes":7,"./seq-wrapper":8,"./tracker":9,"./transition-seq":10}],2:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
		value: true
});

var _createClass = (function () {
		function defineProperties(target, props) {
				for (var i = 0; i < props.length; i++) {
						var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);
				}
		}return function (Constructor, protoProps, staticProps) {
				if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;
		};
})();

function _classCallCheck(instance, Constructor) {
		if (!(instance instanceof Constructor)) {
				throw new TypeError("Cannot call a class as a function");
		}
}

/**
  * @Animation Class
  *
  * @description Promise based animation handler that resolves when animations triggered on an element are complete.
  * @returns {Resolved Promise}
  */

var Animation = (function () {

		/**
    * @constructor function
    *
    * @params {Object, Class, Class, Class, Class, Object}  
    * @description Creates a new animation sequence.    
  * @params description
  - options {Object} Animation options.
  	- element {HTMLElement} The element to set the animation on.
  	- setStyles {Object} Styles to be set before / after the animation.
  		- before {Object} Object of CSS property / value pairs to be set before the animation.
  		- after {Object} Object of CSS property / value pairs to be set after the animation.
  	- addClass {Object} Object of classnames to be set before / after the animation.
  		- before {String} Classname to set before the animation.
  		- after {String} Classname to set after the animation.
  	- removeClass {Object} Object of classnames to be removed before / after the animation.
  		- before {String} Classname to be removed before the animation.
  		- after {String} Classname to be removed after the animation.
  - DomUtils {Class} Dom utility class.
  - Prefix {Class} Prefix class.
  - CssUtils {Class} CSS Utilities class.
  - Promise {Class} Promise class.
  - Tracker {Object} Object that tracks and monitors sequences.
  * @returns {Promise}
    */

		function Animation(options, DomUtils, Prefix, CssUtils, Promise, Tracker) {
				var _this = this;

				_classCallCheck(this, Animation);

				this.options = options;
				this.domUtils = new DomUtils();
				this.cssUtils = new CssUtils();
				this.prefix = new Prefix().getPrefix("animationend");
				this.onAnimationEnd = this.animationEnd.bind(this);
				this.tracker = Tracker;

				return new Promise(function (resolve, reject) {
						_this.resolve = resolve;
						_this.reject = reject;
						_this.animationFrame = requestAnimationFrame(_this.animationStart.bind(_this));
				});
		}

		_createClass(Animation, [{
				key: "animationStart",

				/**
      * @animationStart function
      *
      * @description Sets classnames / style rules to trigger the animation.
      * @global no
      */

				value: function animationStart() {

						var opts = this.options;
						opts.element.addEventListener(this.prefix, this.onAnimationEnd, false);

						if (opts.setStyles && opts.setStyles.before) {
								this.cssUtils.setStyles(opts.element, opts.setStyles.before);
						}

						if (opts.removeClass && opts.removeClass.before) {
								this.domUtils.setClass(opts.element, opts.removeClass.before, false);
						}

						if (opts.addClass && opts.addClass.before) {
								this.domUtils.setClass(opts.element, opts.addClass.before, true);
						}
				}
		}, {
				key: "animationEnd",

				/**
      * @animationEnd function
      *
      * @description Sets classnames / style rules after all animations have completed and removes the element from the tracker.
      * @global no
      * @returns {Resolved Promise}
      */

				value: function animationEnd() {

						var opts = this.options;
						opts.element.removeEventListener(this.prefix, this.onAnimationEnd, false);
						cancelAnimationFrame(this.animationFrame);

						if (opts.setStyles && opts.setStyles.after) {
								this.cssUtils.setStyles(opts.element, opts.setStyles.after);
						}

						if (opts.removeClass && opts.removeClass.after) {
								this.domUtils.setClass(opts.element, opts.removeClass.after, false);
						}

						if (opts.addClass && opts.addClass.after) {
								this.domUtils.setClass(opts.element, opts.addClass.after, true);
						}

						this.tracker.remove("Animations", opts.element);
						this.resolve(opts.element);
				}
		}]);

		return Animation;
})();

exports["default"] = Animation;
module.exports = exports["default"];

},{}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = (function () {
	function defineProperties(target, props) {
		for (var i = 0; i < props.length; i++) {
			var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);
		}
	}return function (Constructor, protoProps, staticProps) {
		if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;
	};
})();

function _classCallCheck(instance, Constructor) {
	if (!(instance instanceof Constructor)) {
		throw new TypeError("Cannot call a class as a function");
	}
}

/**
  * @Combo Class
  *
  * @description Wraps a Promise around x amount of sequences and resolves when all sequences have resolved.
  * @returns {Resolved Promise}
  */

var Combo = (function () {

	/**
   * @constructor function
   *
   * @params {Array, Class}  
   * @description Wraps x amount of sequences in a Promise.    
 * @params description
 - sequences {Array} An array of sequences.
 - Promise {Class} Promise class.
 * @returns {Promise}
   */

	function Combo(sequences, Promise) {
		var _this = this;

		_classCallCheck(this, Combo);

		return new Promise(function (resolve, reject) {

			var watcher = _this.sequenceWatcher();
			_this.resolve = resolve;
			_this.reject = reject;
			_this.amount = sequences.length;

			sequences.forEach(function (sequence) {

				sequence.then(function (element) {
					watcher(element);
				})["catch"](function (e) {
					_this.reject(e);
				});
			});
		});
	}

	_createClass(Combo, [{
		key: "sequenceWatcher",

		/**
    * @sequenceWatcher function
    *
    * @description Captures resolved sequences and resolves when all have been resolved.   
  * @returns {Resolved Promise}
    * @global no
    */

		value: function sequenceWatcher() {
			var _this2 = this;

			var count = 0;
			var returnData = [];
			return function (element) {

				count++;
				returnData.push(element);
				if (count === _this2.amount) {
					_this2.resolve(returnData);
				}
			};
		}
	}]);

	return Combo;
})();

exports["default"] = Combo;
module.exports = exports["default"];

},{}],4:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = (function () {
    function defineProperties(target, props) {
        for (var i = 0; i < props.length; i++) {
            var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);
        }
    }return function (Constructor, protoProps, staticProps) {
        if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;
    };
})();

function _toConsumableArray(arr) {
    if (Array.isArray(arr)) {
        for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];return arr2;
    } else {
        return Array.from(arr);
    }
}

function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
        throw new TypeError("Cannot call a class as a function");
    }
}

/**
  * @CssUtils Class
  *
  * @description CSS utility belt for Animator using the CSSOM (file:/// protocol not supported in Chrome) 
  * @returns {Object}
  */

var CssUtils = (function () {
    function CssUtils() {
        _classCallCheck(this, CssUtils);
    }

    _createClass(CssUtils, [{
        key: "createStyleSheet",

        /**
          * @createStyleSheet function
          *
          * @description Creates a stylesheet for any transition / animation / style classes created in Animator.
          * @returns {CSSStyleSheet} stylesheet
          * @global no
          */

        value: function createStyleSheet() {

            var style = document.createElement("style");
            style.appendChild(document.createTextNode(""));
            document.head.appendChild(style);
            return style.sheet;
        }
    }, {
        key: "cssTextToJs",

        /**
          * @cssTextToJs function
          *
          * @params {String}
          * @description Converts a hyphen delimted CSS property to a camel cased JavaScript property.
          * @returns {String}
          * @global no
          */

        value: function cssTextToJs(cssText) {

            var jsText = "";

            if (/\-/g.test(cssText)) {
                cssText.replace(/\-/g, " ").replace(/\w\S*/g, function (txt) {
                    txt = txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
                    if (txt) {
                        jsText += txt;
                    }
                });
                return jsText.charAt(0).toLowerCase() + jsText.substr(1);
            } else {
                return cssText;
            }

            // styleProp = styleProp.replace(/\-(\w)/g, function(str, letter) {
            //     return letter.toUpperCase();
            // });
        }
    }, {
        key: "setStyles",

        /**
          * @setStyles function
          *
          * @params {HTMLElement, Object, Boolean}
          * @description Sets properties on an element's CSSStyleDeclaration.
          * @params description      
          *  - element: {HTMLElement} HTML element to set styles properties on.
             - styles : {Object} Object containing CSS property / value pairs.
             - important : Boolean specifiying if the CSS value is to be set as important. 
          * @global yes
          */

        value: function setStyles(element, styles, important) {

            Object.keys(styles).forEach(function (property) {
                var important = important || styles[property].includes("important") ? "important" : null;
                var rules = styles[property].replace(/!?important/, "").trim();
                element.style.setProperty(property, rules, important);
            });
        }
    }, {
        key: "getStyles",

        /**
          * @getStyles function
          *
          * @params {HTMLElement, String / Array}
          * @description Queries properties set on an element's CSSStyleDeclaration.
          * @params description      
          *  - element: {HTMLElement} HTML element to query againts its style properties.
             - props : {String / Array} String or Array of strings of CSS properties to query.
          * @returns {Object} Object of CSS property / value pairs
          * @global yes
          */

        value: function getStyles(element, props) {
            var _this = this;

            var properties = Array.isArray(props) ? [].concat(_toConsumableArray(props)) : [props];
            var styles = {},
                temp = {};
            properties.forEach(function (property) {
                temp[property] = window.getComputedStyle(element).getPropertyValue(property);
                element.style.removeProperty(property);
                styles[property] = window.getComputedStyle(element).getPropertyValue(property);
                _this.setStyles(element, temp);
            });
            return styles;
        }
    }, {
        key: "createTransition",

        /**
          * @createTransition function
          *
          * @params {Object, Class}
          * @description Creates a string defining an element's CSS transition values and sets it on the element's CSSStyleDeclaration. 
          * @params description      
          *  - transition: {Object} An object of transition properties.
                 - elements {HTMLElement / Nodelist} HTMLElement(s) to set transition on.
                 - properties {String / Array} CSS properties to transition.
                 - duration {String / Array} Ms or S transition duration value(s).
                 - easing {String / Array} (Optional) Transition timing function value(s).
                 - delay {String / Array} (Optional) Transition delay value(s).
             - Prefix : {Class} Prefix class.
          * @global yes
          */

        value: function createTransition(transition, Prefix) {
            var _this2 = this;

            var transitionPrefix = new Prefix().getPrefix("transition");
            var elements = transition.element.length ? Array.from(transition.element) : [transition.element];
            var properties = Array.isArray(transition.properties) ? [].concat(_toConsumableArray(transition.properties)) : [transition.properties];
            var duration = Array.isArray(transition.duration) ? [].concat(_toConsumableArray(transition.duration)) : [transition.duration];
            var easing = Array.isArray(transition.easing) ? [].concat(_toConsumableArray(transition.easing)) : [transition.easing];
            var delay = Array.isArray(transition.delay) ? [].concat(_toConsumableArray(transition.delay)) : [transition.delay];

            elements.forEach(function (element) {

                var transitionString = "";
                var rules = {};

                properties.forEach(function (prop, i) {

                    transitionString += " ";
                    transitionString += properties.length > 1 ? properties[i] + " " : properties[0] + " ";
                    transitionString += duration.length > 1 ? duration[i] + " " : duration[0] + " ";
                    transitionString += easing.length > 1 ? easing[i] + " " : (easing[0] || "ease") + " ";
                    transitionString += delay.length > 1 ? delay[i] + "," : (delay[0] || "0s") + ",";
                });

                transitionString = transitionString.substr(0, transitionString.length - 1);
                rules[transitionPrefix] = transitionString;
                _this2.setStyles(element, rules);
            });
        }
    }, {
        key: "createKeyframeAnimation",

        /**
          * @createKeyframeAnimation function
          *
          * @params {Object, Class, CSSStyleSheet}
          * @description Creates a CSS keyframe animation, and optional associated style class, and inserts it/them into Animator's stylesheet. 
          * @params description      
          *  - animation: {Object} An object of animation properties.
                 - name {HTMLElement / Nodelist} HTMLElement(s) to set transition on.
                 - animation {Object} Either from / to or % based keyframes and CSS properties / values.
                 - animationClass {Object} (Optional) A CSS class to trigger the animation.
                     - name {String} The classname.
                     - rules {Object} Object of CSS property / value pairs.
             - Prefix : {Class} Prefix class.
             - stylesheet : {CSSStyleSheet} Animator's stylesheet.
          * @global yes
          */

        value: function createKeyframeAnimation(animation, Prefix, stylesheet) {

            var animationString = "";
            var prefix = new Prefix();
            var keyFrame = prefix.getPrefix("keyframes");
            keyFrame += " " + animation.name + " {\n";

            Object.keys(animation.animation).forEach(function (anim) {
                animationString += anim + " {";
                Object.keys(animation.animation[anim]).forEach(function (property) {
                    animationString += "\n" + property + " : " + animation.animation[anim][property] + ";";
                });
                animationString += "\n }\n";
            });

            animationString += "}";

            stylesheet.insertRule(keyFrame + animationString, stylesheet.cssRules.length);
            if (animation.animationClass) {
                this.createClass(animation.animationClass.name, stylesheet, animation.animationClass.rules);
            }
        }
    }, {
        key: "createClass",

        /**
          * @createClass function
          *
          * @params {String, CSSStyleSheet, Object (Optional)}
          * @description Defines a CSS class and inserts it into Animator's stylesheet. 
          * @params description      
          *  - className: {String} The name of the class.
             - stylesheet : {CSSStyleSheet} Animator's stylesheet.
             - rules : {Object} (Optional) Object of CSS property / value pairs.
          * @global yes
          */

        value: function createClass(className, stylesheet) {
            var rules = arguments[2] === undefined ? {} : arguments[2];

            var name = "." + className;
            var cssString = "{ ";

            Object.keys(rules).forEach(function (rule) {
                cssString += rule + " : " + rules[rule] + "; ";
            });

            cssString += "}";
            stylesheet.insertRule(name + cssString, stylesheet.cssRules.length);
        }
    }, {
        key: "deleteClass",

        /**
          * @deleteClass function
          *
          * @params {String, CSSStyleSheet}
          * @description Removes a CSS class from Animator's stylesheet. 
          * @params description      
          *  - className: {String} The name of the class to remove.
             - stylesheet : {CSSStyleSheet} Animator's stylesheet.
          * @global yes
          */

        value: function deleteClass(className, stylesheet) {

            var rules = stylesheet.rules || stylesheet.cssRules;
            var name = "." + className;
            Object.keys(rules).forEach(function (rule) {
                if (rules[rule] instanceof CSSStyleRule && rules[rule].selectorText === name) {
                    stylesheet.deleteRule(rule);
                }
            });
        }
    }]);

    return CssUtils;
})();

exports["default"] = CssUtils;
module.exports = exports["default"];

},{}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = (function () {
	function defineProperties(target, props) {
		for (var i = 0; i < props.length; i++) {
			var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);
		}
	}return function (Constructor, protoProps, staticProps) {
		if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;
	};
})();

function _toConsumableArray(arr) {
	if (Array.isArray(arr)) {
		for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];return arr2;
	} else {
		return Array.from(arr);
	}
}

function _classCallCheck(instance, Constructor) {
	if (!(instance instanceof Constructor)) {
		throw new TypeError("Cannot call a class as a function");
	}
}

/**
  * @DomUtils Class
  *
  * @description Provides DOM utilities for Animator.
  * @returns {Object}
  */

var DomUtils = (function () {
	function DomUtils() {
		_classCallCheck(this, DomUtils);
	}

	_createClass(DomUtils, [{
		key: "setClass",

		/**
    * @setClass function
    *
    * @params {HTMLElement, String / Array, Boolean}
    * @description Adds or removes class(es) from an element.
    * @params description      
    *  - element: {HTMLElement} The element to add / remove the class(es) to / from.
    *  - classList: {String / Array} A single classname or array of classnames to add / remove.
    *	- add: {Boolean} Specifiying whether to add / remove the class(es).
    * @global yes
    */

		value: function setClass(element, classList, add) {

			var classes = Array.isArray(classList) ? [].concat(_toConsumableArray(classList)) : [classList];
			var elements = element.length ? Array.from(element) : [element];
			var action = add ? "add" : "remove";
			classes.forEach(function (cls) {
				elements.forEach(function (el) {
					el.classList[action](cls);
				});
			});
		}
	}, {
		key: "support",

		/**
    * @support function
    *
    * @params {Class, Class, CSSStyleSheet}
    * @description Tests for CSS transition / animation / CSSOM manipulation support
    * @params description      
    *  - Prefix: {Class} Prefix class.
    *  - CssUtils: {Class} CSS utilities class.
    *	- stylesheet: {CSSStyleSheet} Stylesheet to test inserting / removing style rules on.
    * @global yes
    */

		value: function support(Prefix, CssUtils, stylesheet) {

			var prefix = new Prefix();
			var cssUtils = new CssUtils();
			var cssomSupport = false;
			var transitionSupport = prefix.getPrefix("transition");
			var animationSupport = prefix.getPrefix("animation");

			try {
				cssUtils.createClass("AnimatorTestClass", stylesheet);
				cssUtils.deleteClass("AnimatorTestClass", stylesheet);
				cssomSupport = true;
			} catch (e) {
				cssomSupport = false;
			}

			return transitionSupport && animationSupport && cssomSupport;
		}
	}]);

	return DomUtils;
})();

exports["default"] = DomUtils;
module.exports = exports["default"];

},{}],6:[function(require,module,exports){
(function (process,global){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
 * @version   2.1.1
 */

'use strict';

(function () {
  'use strict';
  function lib$es6$promise$utils$$objectOrFunction(x) {
    return typeof x === 'function' || typeof x === 'object' && x !== null;
  }

  function lib$es6$promise$utils$$isFunction(x) {
    return typeof x === 'function';
  }

  function lib$es6$promise$utils$$isMaybeThenable(x) {
    return typeof x === 'object' && x !== null;
  }

  var lib$es6$promise$utils$$_isArray;
  if (!Array.isArray) {
    lib$es6$promise$utils$$_isArray = function (x) {
      return Object.prototype.toString.call(x) === '[object Array]';
    };
  } else {
    lib$es6$promise$utils$$_isArray = Array.isArray;
  }

  var lib$es6$promise$utils$$isArray = lib$es6$promise$utils$$_isArray;
  var lib$es6$promise$asap$$len = 0;
  var lib$es6$promise$asap$$toString = ({}).toString;
  var lib$es6$promise$asap$$vertxNext;
  function lib$es6$promise$asap$$asap(callback, arg) {
    lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len] = callback;
    lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len + 1] = arg;
    lib$es6$promise$asap$$len += 2;
    if (lib$es6$promise$asap$$len === 2) {
      // If len is 2, that means that we need to schedule an async flush.
      // If additional callbacks are queued before the queue is flushed, they
      // will be processed by this flush that we are scheduling.
      lib$es6$promise$asap$$scheduleFlush();
    }
  }

  var lib$es6$promise$asap$$default = lib$es6$promise$asap$$asap;

  var lib$es6$promise$asap$$browserWindow = typeof window !== 'undefined' ? window : undefined;
  var lib$es6$promise$asap$$browserGlobal = lib$es6$promise$asap$$browserWindow || {};
  var lib$es6$promise$asap$$BrowserMutationObserver = lib$es6$promise$asap$$browserGlobal.MutationObserver || lib$es6$promise$asap$$browserGlobal.WebKitMutationObserver;
  var lib$es6$promise$asap$$isNode = typeof process !== 'undefined' && ({}).toString.call(process) === '[object process]';

  // test for web worker but not in IE10
  var lib$es6$promise$asap$$isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';

  // node
  function lib$es6$promise$asap$$useNextTick() {
    var nextTick = process.nextTick;
    // node version 0.10.x displays a deprecation warning when nextTick is used recursively
    // setImmediate should be used instead instead
    var version = process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);
    if (Array.isArray(version) && version[1] === '0' && version[2] === '10') {
      nextTick = setImmediate;
    }
    return function () {
      nextTick(lib$es6$promise$asap$$flush);
    };
  }

  // vertx
  function lib$es6$promise$asap$$useVertxTimer() {
    return function () {
      lib$es6$promise$asap$$vertxNext(lib$es6$promise$asap$$flush);
    };
  }

  function lib$es6$promise$asap$$useMutationObserver() {
    var iterations = 0;
    var observer = new lib$es6$promise$asap$$BrowserMutationObserver(lib$es6$promise$asap$$flush);
    var node = document.createTextNode('');
    observer.observe(node, { characterData: true });

    return function () {
      node.data = iterations = ++iterations % 2;
    };
  }

  // web worker
  function lib$es6$promise$asap$$useMessageChannel() {
    var channel = new MessageChannel();
    channel.port1.onmessage = lib$es6$promise$asap$$flush;
    return function () {
      channel.port2.postMessage(0);
    };
  }

  function lib$es6$promise$asap$$useSetTimeout() {
    return function () {
      setTimeout(lib$es6$promise$asap$$flush, 1);
    };
  }

  var lib$es6$promise$asap$$queue = new Array(1000);
  function lib$es6$promise$asap$$flush() {
    for (var i = 0; i < lib$es6$promise$asap$$len; i += 2) {
      var callback = lib$es6$promise$asap$$queue[i];
      var arg = lib$es6$promise$asap$$queue[i + 1];

      callback(arg);

      lib$es6$promise$asap$$queue[i] = undefined;
      lib$es6$promise$asap$$queue[i + 1] = undefined;
    }

    lib$es6$promise$asap$$len = 0;
  }

  function lib$es6$promise$asap$$attemptVertex() {
    try {
      var r = require;
      var vertx = r('vertx');
      lib$es6$promise$asap$$vertxNext = vertx.runOnLoop || vertx.runOnContext;
      return lib$es6$promise$asap$$useVertxTimer();
    } catch (e) {
      return lib$es6$promise$asap$$useSetTimeout();
    }
  }

  var lib$es6$promise$asap$$scheduleFlush;
  // Decide what async method to use to triggering processing of queued callbacks:
  if (lib$es6$promise$asap$$isNode) {
    lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useNextTick();
  } else if (lib$es6$promise$asap$$BrowserMutationObserver) {
    lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMutationObserver();
  } else if (lib$es6$promise$asap$$isWorker) {
    lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMessageChannel();
  } else if (lib$es6$promise$asap$$browserWindow === undefined && typeof require === 'function') {
    lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$attemptVertex();
  } else {
    lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useSetTimeout();
  }

  function lib$es6$promise$$internal$$noop() {}

  var lib$es6$promise$$internal$$PENDING = void 0;
  var lib$es6$promise$$internal$$FULFILLED = 1;
  var lib$es6$promise$$internal$$REJECTED = 2;

  var lib$es6$promise$$internal$$GET_THEN_ERROR = new lib$es6$promise$$internal$$ErrorObject();

  function lib$es6$promise$$internal$$selfFullfillment() {
    return new TypeError('You cannot resolve a promise with itself');
  }

  function lib$es6$promise$$internal$$cannotReturnOwn() {
    return new TypeError('A promises callback cannot return that same promise.');
  }

  function lib$es6$promise$$internal$$getThen(promise) {
    try {
      return promise.then;
    } catch (error) {
      lib$es6$promise$$internal$$GET_THEN_ERROR.error = error;
      return lib$es6$promise$$internal$$GET_THEN_ERROR;
    }
  }

  function lib$es6$promise$$internal$$tryThen(then, value, fulfillmentHandler, rejectionHandler) {
    try {
      then.call(value, fulfillmentHandler, rejectionHandler);
    } catch (e) {
      return e;
    }
  }

  function lib$es6$promise$$internal$$handleForeignThenable(promise, thenable, then) {
    lib$es6$promise$asap$$default(function (promise) {
      var sealed = false;
      var error = lib$es6$promise$$internal$$tryThen(then, thenable, function (value) {
        if (sealed) {
          return;
        }
        sealed = true;
        if (thenable !== value) {
          lib$es6$promise$$internal$$resolve(promise, value);
        } else {
          lib$es6$promise$$internal$$fulfill(promise, value);
        }
      }, function (reason) {
        if (sealed) {
          return;
        }
        sealed = true;

        lib$es6$promise$$internal$$reject(promise, reason);
      }, 'Settle: ' + (promise._label || ' unknown promise'));

      if (!sealed && error) {
        sealed = true;
        lib$es6$promise$$internal$$reject(promise, error);
      }
    }, promise);
  }

  function lib$es6$promise$$internal$$handleOwnThenable(promise, thenable) {
    if (thenable._state === lib$es6$promise$$internal$$FULFILLED) {
      lib$es6$promise$$internal$$fulfill(promise, thenable._result);
    } else if (thenable._state === lib$es6$promise$$internal$$REJECTED) {
      lib$es6$promise$$internal$$reject(promise, thenable._result);
    } else {
      lib$es6$promise$$internal$$subscribe(thenable, undefined, function (value) {
        lib$es6$promise$$internal$$resolve(promise, value);
      }, function (reason) {
        lib$es6$promise$$internal$$reject(promise, reason);
      });
    }
  }

  function lib$es6$promise$$internal$$handleMaybeThenable(promise, maybeThenable) {
    if (maybeThenable.constructor === promise.constructor) {
      lib$es6$promise$$internal$$handleOwnThenable(promise, maybeThenable);
    } else {
      var then = lib$es6$promise$$internal$$getThen(maybeThenable);

      if (then === lib$es6$promise$$internal$$GET_THEN_ERROR) {
        lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$GET_THEN_ERROR.error);
      } else if (then === undefined) {
        lib$es6$promise$$internal$$fulfill(promise, maybeThenable);
      } else if (lib$es6$promise$utils$$isFunction(then)) {
        lib$es6$promise$$internal$$handleForeignThenable(promise, maybeThenable, then);
      } else {
        lib$es6$promise$$internal$$fulfill(promise, maybeThenable);
      }
    }
  }

  function lib$es6$promise$$internal$$resolve(promise, value) {
    if (promise === value) {
      lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$selfFullfillment());
    } else if (lib$es6$promise$utils$$objectOrFunction(value)) {
      lib$es6$promise$$internal$$handleMaybeThenable(promise, value);
    } else {
      lib$es6$promise$$internal$$fulfill(promise, value);
    }
  }

  function lib$es6$promise$$internal$$publishRejection(promise) {
    if (promise._onerror) {
      promise._onerror(promise._result);
    }

    lib$es6$promise$$internal$$publish(promise);
  }

  function lib$es6$promise$$internal$$fulfill(promise, value) {
    if (promise._state !== lib$es6$promise$$internal$$PENDING) {
      return;
    }

    promise._result = value;
    promise._state = lib$es6$promise$$internal$$FULFILLED;

    if (promise._subscribers.length !== 0) {
      lib$es6$promise$asap$$default(lib$es6$promise$$internal$$publish, promise);
    }
  }

  function lib$es6$promise$$internal$$reject(promise, reason) {
    if (promise._state !== lib$es6$promise$$internal$$PENDING) {
      return;
    }
    promise._state = lib$es6$promise$$internal$$REJECTED;
    promise._result = reason;

    lib$es6$promise$asap$$default(lib$es6$promise$$internal$$publishRejection, promise);
  }

  function lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection) {
    var subscribers = parent._subscribers;
    var length = subscribers.length;

    parent._onerror = null;

    subscribers[length] = child;
    subscribers[length + lib$es6$promise$$internal$$FULFILLED] = onFulfillment;
    subscribers[length + lib$es6$promise$$internal$$REJECTED] = onRejection;

    if (length === 0 && parent._state) {
      lib$es6$promise$asap$$default(lib$es6$promise$$internal$$publish, parent);
    }
  }

  function lib$es6$promise$$internal$$publish(promise) {
    var subscribers = promise._subscribers;
    var settled = promise._state;

    if (subscribers.length === 0) {
      return;
    }

    var child,
        callback,
        detail = promise._result;

    for (var i = 0; i < subscribers.length; i += 3) {
      child = subscribers[i];
      callback = subscribers[i + settled];

      if (child) {
        lib$es6$promise$$internal$$invokeCallback(settled, child, callback, detail);
      } else {
        callback(detail);
      }
    }

    promise._subscribers.length = 0;
  }

  function lib$es6$promise$$internal$$ErrorObject() {
    this.error = null;
  }

  var lib$es6$promise$$internal$$TRY_CATCH_ERROR = new lib$es6$promise$$internal$$ErrorObject();

  function lib$es6$promise$$internal$$tryCatch(callback, detail) {
    try {
      return callback(detail);
    } catch (e) {
      lib$es6$promise$$internal$$TRY_CATCH_ERROR.error = e;
      return lib$es6$promise$$internal$$TRY_CATCH_ERROR;
    }
  }

  function lib$es6$promise$$internal$$invokeCallback(settled, promise, callback, detail) {
    var hasCallback = lib$es6$promise$utils$$isFunction(callback),
        value,
        error,
        succeeded,
        failed;

    if (hasCallback) {
      value = lib$es6$promise$$internal$$tryCatch(callback, detail);

      if (value === lib$es6$promise$$internal$$TRY_CATCH_ERROR) {
        failed = true;
        error = value.error;
        value = null;
      } else {
        succeeded = true;
      }

      if (promise === value) {
        lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$cannotReturnOwn());
        return;
      }
    } else {
      value = detail;
      succeeded = true;
    }

    if (promise._state !== lib$es6$promise$$internal$$PENDING) {} else if (hasCallback && succeeded) {
      lib$es6$promise$$internal$$resolve(promise, value);
    } else if (failed) {
      lib$es6$promise$$internal$$reject(promise, error);
    } else if (settled === lib$es6$promise$$internal$$FULFILLED) {
      lib$es6$promise$$internal$$fulfill(promise, value);
    } else if (settled === lib$es6$promise$$internal$$REJECTED) {
      lib$es6$promise$$internal$$reject(promise, value);
    }
  }

  function lib$es6$promise$$internal$$initializePromise(promise, resolver) {
    try {
      resolver(function resolvePromise(value) {
        lib$es6$promise$$internal$$resolve(promise, value);
      }, function rejectPromise(reason) {
        lib$es6$promise$$internal$$reject(promise, reason);
      });
    } catch (e) {
      lib$es6$promise$$internal$$reject(promise, e);
    }
  }

  function lib$es6$promise$enumerator$$Enumerator(Constructor, input) {
    var enumerator = this;

    enumerator._instanceConstructor = Constructor;
    enumerator.promise = new Constructor(lib$es6$promise$$internal$$noop);

    if (enumerator._validateInput(input)) {
      enumerator._input = input;
      enumerator.length = input.length;
      enumerator._remaining = input.length;

      enumerator._init();

      if (enumerator.length === 0) {
        lib$es6$promise$$internal$$fulfill(enumerator.promise, enumerator._result);
      } else {
        enumerator.length = enumerator.length || 0;
        enumerator._enumerate();
        if (enumerator._remaining === 0) {
          lib$es6$promise$$internal$$fulfill(enumerator.promise, enumerator._result);
        }
      }
    } else {
      lib$es6$promise$$internal$$reject(enumerator.promise, enumerator._validationError());
    }
  }

  lib$es6$promise$enumerator$$Enumerator.prototype._validateInput = function (input) {
    return lib$es6$promise$utils$$isArray(input);
  };

  lib$es6$promise$enumerator$$Enumerator.prototype._validationError = function () {
    return new Error('Array Methods must be provided an Array');
  };

  lib$es6$promise$enumerator$$Enumerator.prototype._init = function () {
    this._result = new Array(this.length);
  };

  var lib$es6$promise$enumerator$$default = lib$es6$promise$enumerator$$Enumerator;

  lib$es6$promise$enumerator$$Enumerator.prototype._enumerate = function () {
    var enumerator = this;

    var length = enumerator.length;
    var promise = enumerator.promise;
    var input = enumerator._input;

    for (var i = 0; promise._state === lib$es6$promise$$internal$$PENDING && i < length; i++) {
      enumerator._eachEntry(input[i], i);
    }
  };

  lib$es6$promise$enumerator$$Enumerator.prototype._eachEntry = function (entry, i) {
    var enumerator = this;
    var c = enumerator._instanceConstructor;

    if (lib$es6$promise$utils$$isMaybeThenable(entry)) {
      if (entry.constructor === c && entry._state !== lib$es6$promise$$internal$$PENDING) {
        entry._onerror = null;
        enumerator._settledAt(entry._state, i, entry._result);
      } else {
        enumerator._willSettleAt(c.resolve(entry), i);
      }
    } else {
      enumerator._remaining--;
      enumerator._result[i] = entry;
    }
  };

  lib$es6$promise$enumerator$$Enumerator.prototype._settledAt = function (state, i, value) {
    var enumerator = this;
    var promise = enumerator.promise;

    if (promise._state === lib$es6$promise$$internal$$PENDING) {
      enumerator._remaining--;

      if (state === lib$es6$promise$$internal$$REJECTED) {
        lib$es6$promise$$internal$$reject(promise, value);
      } else {
        enumerator._result[i] = value;
      }
    }

    if (enumerator._remaining === 0) {
      lib$es6$promise$$internal$$fulfill(promise, enumerator._result);
    }
  };

  lib$es6$promise$enumerator$$Enumerator.prototype._willSettleAt = function (promise, i) {
    var enumerator = this;

    lib$es6$promise$$internal$$subscribe(promise, undefined, function (value) {
      enumerator._settledAt(lib$es6$promise$$internal$$FULFILLED, i, value);
    }, function (reason) {
      enumerator._settledAt(lib$es6$promise$$internal$$REJECTED, i, reason);
    });
  };
  function lib$es6$promise$promise$all$$all(entries) {
    return new lib$es6$promise$enumerator$$default(this, entries).promise;
  }
  var lib$es6$promise$promise$all$$default = lib$es6$promise$promise$all$$all;
  function lib$es6$promise$promise$race$$race(entries) {
    /*jshint validthis:true */
    var Constructor = this;

    var promise = new Constructor(lib$es6$promise$$internal$$noop);

    if (!lib$es6$promise$utils$$isArray(entries)) {
      lib$es6$promise$$internal$$reject(promise, new TypeError('You must pass an array to race.'));
      return promise;
    }

    var length = entries.length;

    function onFulfillment(value) {
      lib$es6$promise$$internal$$resolve(promise, value);
    }

    function onRejection(reason) {
      lib$es6$promise$$internal$$reject(promise, reason);
    }

    for (var i = 0; promise._state === lib$es6$promise$$internal$$PENDING && i < length; i++) {
      lib$es6$promise$$internal$$subscribe(Constructor.resolve(entries[i]), undefined, onFulfillment, onRejection);
    }

    return promise;
  }
  var lib$es6$promise$promise$race$$default = lib$es6$promise$promise$race$$race;
  function lib$es6$promise$promise$resolve$$resolve(object) {
    /*jshint validthis:true */
    var Constructor = this;

    if (object && typeof object === 'object' && object.constructor === Constructor) {
      return object;
    }

    var promise = new Constructor(lib$es6$promise$$internal$$noop);
    lib$es6$promise$$internal$$resolve(promise, object);
    return promise;
  }
  var lib$es6$promise$promise$resolve$$default = lib$es6$promise$promise$resolve$$resolve;
  function lib$es6$promise$promise$reject$$reject(reason) {
    /*jshint validthis:true */
    var Constructor = this;
    var promise = new Constructor(lib$es6$promise$$internal$$noop);
    lib$es6$promise$$internal$$reject(promise, reason);
    return promise;
  }
  var lib$es6$promise$promise$reject$$default = lib$es6$promise$promise$reject$$reject;

  var lib$es6$promise$promise$$counter = 0;

  function lib$es6$promise$promise$$needsResolver() {
    throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');
  }

  function lib$es6$promise$promise$$needsNew() {
    throw new TypeError('Failed to construct \'Promise\': Please use the \'new\' operator, this object constructor cannot be called as a function.');
  }

  var lib$es6$promise$promise$$default = lib$es6$promise$promise$$Promise;
  /**
    Promise objects represent the eventual result of an asynchronous operation. The
    primary way of interacting with a promise is through its `then` method, which
    registers callbacks to receive either a promises eventual value or the reason
    why the promise cannot be fulfilled.
     Terminology
    -----------
     - `promise` is an object or function with a `then` method whose behavior conforms to this specification.
    - `thenable` is an object or function that defines a `then` method.
    - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).
    - `exception` is a value that is thrown using the throw statement.
    - `reason` is a value that indicates why a promise was rejected.
    - `settled` the final resting state of a promise, fulfilled or rejected.
     A promise can be in one of three states: pending, fulfilled, or rejected.
     Promises that are fulfilled have a fulfillment value and are in the fulfilled
    state.  Promises that are rejected have a rejection reason and are in the
    rejected state.  A fulfillment value is never a thenable.
     Promises can also be said to *resolve* a value.  If this value is also a
    promise, then the original promise's settled state will match the value's
    settled state.  So a promise that *resolves* a promise that rejects will
    itself reject, and a promise that *resolves* a promise that fulfills will
    itself fulfill.
      Basic Usage:
    ------------
     ```js
    var promise = new Promise(function(resolve, reject) {
      // on success
      resolve(value);
       // on failure
      reject(reason);
    });
     promise.then(function(value) {
      // on fulfillment
    }, function(reason) {
      // on rejection
    });
    ```
     Advanced Usage:
    ---------------
     Promises shine when abstracting away asynchronous interactions such as
    `XMLHttpRequest`s.
     ```js
    function getJSON(url) {
      return new Promise(function(resolve, reject){
        var xhr = new XMLHttpRequest();
         xhr.open('GET', url);
        xhr.onreadystatechange = handler;
        xhr.responseType = 'json';
        xhr.setRequestHeader('Accept', 'application/json');
        xhr.send();
         function handler() {
          if (this.readyState === this.DONE) {
            if (this.status === 200) {
              resolve(this.response);
            } else {
              reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));
            }
          }
        };
      });
    }
     getJSON('/posts.json').then(function(json) {
      // on fulfillment
    }, function(reason) {
      // on rejection
    });
    ```
     Unlike callbacks, promises are great composable primitives.
     ```js
    Promise.all([
      getJSON('/posts'),
      getJSON('/comments')
    ]).then(function(values){
      values[0] // => postsJSON
      values[1] // => commentsJSON
       return values;
    });
    ```
     @class Promise
    @param {function} resolver
    Useful for tooling.
    @constructor
  */
  function lib$es6$promise$promise$$Promise(resolver) {
    this._id = lib$es6$promise$promise$$counter++;
    this._state = undefined;
    this._result = undefined;
    this._subscribers = [];

    if (lib$es6$promise$$internal$$noop !== resolver) {
      if (!lib$es6$promise$utils$$isFunction(resolver)) {
        lib$es6$promise$promise$$needsResolver();
      }

      if (!(this instanceof lib$es6$promise$promise$$Promise)) {
        lib$es6$promise$promise$$needsNew();
      }

      lib$es6$promise$$internal$$initializePromise(this, resolver);
    }
  }

  lib$es6$promise$promise$$Promise.all = lib$es6$promise$promise$all$$default;
  lib$es6$promise$promise$$Promise.race = lib$es6$promise$promise$race$$default;
  lib$es6$promise$promise$$Promise.resolve = lib$es6$promise$promise$resolve$$default;
  lib$es6$promise$promise$$Promise.reject = lib$es6$promise$promise$reject$$default;

  lib$es6$promise$promise$$Promise.prototype = {
    constructor: lib$es6$promise$promise$$Promise,

    /**
      The primary way of interacting with a promise is through its `then` method,
      which registers callbacks to receive either a promise's eventual value or the
      reason why the promise cannot be fulfilled.
       ```js
      findUser().then(function(user){
        // user is available
      }, function(reason){
        // user is unavailable, and you are given the reason why
      });
      ```
       Chaining
      --------
       The return value of `then` is itself a promise.  This second, 'downstream'
      promise is resolved with the return value of the first promise's fulfillment
      or rejection handler, or rejected if the handler throws an exception.
       ```js
      findUser().then(function (user) {
        return user.name;
      }, function (reason) {
        return 'default name';
      }).then(function (userName) {
        // If `findUser` fulfilled, `userName` will be the user's name, otherwise it
        // will be `'default name'`
      });
       findUser().then(function (user) {
        throw new Error('Found user, but still unhappy');
      }, function (reason) {
        throw new Error('`findUser` rejected and we're unhappy');
      }).then(function (value) {
        // never reached
      }, function (reason) {
        // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.
        // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.
      });
      ```
      If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.
       ```js
      findUser().then(function (user) {
        throw new PedagogicalException('Upstream error');
      }).then(function (value) {
        // never reached
      }).then(function (value) {
        // never reached
      }, function (reason) {
        // The `PedgagocialException` is propagated all the way down to here
      });
      ```
       Assimilation
      ------------
       Sometimes the value you want to propagate to a downstream promise can only be
      retrieved asynchronously. This can be achieved by returning a promise in the
      fulfillment or rejection handler. The downstream promise will then be pending
      until the returned promise is settled. This is called *assimilation*.
       ```js
      findUser().then(function (user) {
        return findCommentsByAuthor(user);
      }).then(function (comments) {
        // The user's comments are now available
      });
      ```
       If the assimliated promise rejects, then the downstream promise will also reject.
       ```js
      findUser().then(function (user) {
        return findCommentsByAuthor(user);
      }).then(function (comments) {
        // If `findCommentsByAuthor` fulfills, we'll have the value here
      }, function (reason) {
        // If `findCommentsByAuthor` rejects, we'll have the reason here
      });
      ```
       Simple Example
      --------------
       Synchronous Example
       ```javascript
      var result;
       try {
        result = findResult();
        // success
      } catch(reason) {
        // failure
      }
      ```
       Errback Example
       ```js
      findResult(function(result, err){
        if (err) {
          // failure
        } else {
          // success
        }
      });
      ```
       Promise Example;
       ```javascript
      findResult().then(function(result){
        // success
      }, function(reason){
        // failure
      });
      ```
       Advanced Example
      --------------
       Synchronous Example
       ```javascript
      var author, books;
       try {
        author = findAuthor();
        books  = findBooksByAuthor(author);
        // success
      } catch(reason) {
        // failure
      }
      ```
       Errback Example
       ```js
       function foundBooks(books) {
       }
       function failure(reason) {
       }
       findAuthor(function(author, err){
        if (err) {
          failure(err);
          // failure
        } else {
          try {
            findBoooksByAuthor(author, function(books, err) {
              if (err) {
                failure(err);
              } else {
                try {
                  foundBooks(books);
                } catch(reason) {
                  failure(reason);
                }
              }
            });
          } catch(error) {
            failure(err);
          }
          // success
        }
      });
      ```
       Promise Example;
       ```javascript
      findAuthor().
        then(findBooksByAuthor).
        then(function(books){
          // found books
      }).catch(function(reason){
        // something went wrong
      });
      ```
       @method then
      @param {Function} onFulfilled
      @param {Function} onRejected
      Useful for tooling.
      @return {Promise}
    */
    then: function then(onFulfillment, onRejection) {
      var parent = this;
      var state = parent._state;

      if (state === lib$es6$promise$$internal$$FULFILLED && !onFulfillment || state === lib$es6$promise$$internal$$REJECTED && !onRejection) {
        return this;
      }

      var child = new this.constructor(lib$es6$promise$$internal$$noop);
      var result = parent._result;

      if (state) {
        var callback = arguments[state - 1];
        lib$es6$promise$asap$$default(function () {
          lib$es6$promise$$internal$$invokeCallback(state, child, callback, result);
        });
      } else {
        lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection);
      }

      return child;
    },

    /**
      `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same
      as the catch block of a try/catch statement.
       ```js
      function findAuthor(){
        throw new Error('couldn't find that author');
      }
       // synchronous
      try {
        findAuthor();
      } catch(reason) {
        // something went wrong
      }
       // async with promises
      findAuthor().catch(function(reason){
        // something went wrong
      });
      ```
       @method catch
      @param {Function} onRejection
      Useful for tooling.
      @return {Promise}
    */
    'catch': function _catch(onRejection) {
      return this.then(null, onRejection);
    }
  };
  function lib$es6$promise$polyfill$$polyfill() {
    var local;

    if (typeof global !== 'undefined') {
      local = global;
    } else if (typeof self !== 'undefined') {
      local = self;
    } else {
      try {
        local = Function('return this')();
      } catch (e) {
        throw new Error('polyfill failed because global object is unavailable in this environment');
      }
    }

    var P = local.Promise;

    if (P && Object.prototype.toString.call(P.resolve()) === '[object Promise]' && !P.cast) {
      return;
    }

    local.Promise = lib$es6$promise$promise$$default;
  }
  var lib$es6$promise$polyfill$$default = lib$es6$promise$polyfill$$polyfill;

  var lib$es6$promise$umd$$ES6Promise = {
    'Promise': lib$es6$promise$promise$$default,
    'polyfill': lib$es6$promise$polyfill$$default
  };

  /* global define:true module:true window: true */
  if (typeof define === 'function' && define['amd']) {
    define(function () {
      return lib$es6$promise$umd$$ES6Promise;
    });
  } else if (typeof module !== 'undefined' && module['exports']) {
    module['exports'] = lib$es6$promise$umd$$ES6Promise;
  } else if (typeof this !== 'undefined') {
    this['ES6Promise'] = lib$es6$promise$umd$$ES6Promise;
  }

  lib$es6$promise$polyfill$$default();
}).call(undefined);

// noop

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"_process":11}],7:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
		value: true
});

var _createClass = (function () {
		function defineProperties(target, props) {
				for (var i = 0; i < props.length; i++) {
						var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);
				}
		}return function (Constructor, protoProps, staticProps) {
				if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;
		};
})();

function _classCallCheck(instance, Constructor) {
		if (!(instance instanceof Constructor)) {
				throw new TypeError("Cannot call a class as a function");
		}
}

/**
  * @Prefix Class
  *
  * @description Handles prefixing for CSS properties and DOM events.
  * @returns {Object}
  */

var Prefix = (function () {

		/**
    * @constructor function
    *
    * @description Creates a map that holds non-prefixed properties and event names as keys and associated prefixes as values to test against.
    */

		function Prefix() {
				_classCallCheck(this, Prefix);

				this.testElement = document.createElement("div");
				this.prefixes = new Map();

				// Transforms
				this.prefixes.set("transform", ["-webkit-transform", "transform"]);
				this.prefixes.set("transform-origin", ["-webkit-transform-origin", "transform-origin"]);
				this.prefixes.set("transform-style", ["-webkit-transform-style", "transform-style"]);

				// Transitions
				this.prefixes.set("transition", ["-webkit-transition", "transition"]);
				this.prefixes.set("transition-delay", ["-webkit-transition-delay", "transition-delay"]);
				this.prefixes.set("transition-duration", ["-webkit-transition-duration", "transition-duration"]);
				this.prefixes.set("transition-property", ["-webkit-transition-property", "transition-property"]);
				this.prefixes.set("transition-timing-function", ["-webkit-transition-timing-function", "transition-timing-function"]);

				// Animations
				this.prefixes.set("keyframes", ["-webkit-", "-ms-", "-moz-", ""]);
				this.prefixes.set("animation", ["-webkit-animation", "-ms-animation", "-moz-animation", "animation"]);
				this.prefixes.set("animation-name", ["-webkit-animation-name", "-ms-animation-name", "-moz-animation-name", "animation-name"]);
				this.prefixes.set("animation-iteration-count", ["-webkit-animation-iteration-count", "-ms-animation-iteration-count", "-moz-animation-iteration-count", "animation-iteration-count"]);
				this.prefixes.set("animation-play-state", ["-webkit-animation-play-state", "-ms-animation-play-state", "-moz-animation-play-state", "animation-play-state"]);
				this.prefixes.set("animation-duration", ["-webkit-animation-duration", "-ms-animation-duration", "-moz-animation-duration", "animation-duration"]);
				this.prefixes.set("animation-delay", ["-webkit-animation-delay", "-ms-animation-delay", "-moz-animation-delay", "animation-delay"]);
				this.prefixes.set("animation-direction", ["-webkit-animation-direction", "-ms-animation-direction", "-moz-animation-direction", "animation-direction"]);
				this.prefixes.set("animation-fill-mode", ["-webkit-animation-fill-mode", "-ms-animation-fill-mode", "-moz-animation-fill-mode", "animation-fill-mode"]);

				// Transition / Animation end
				var WebkitTransition = "webkitTransitionEnd";
				var transition = "transitionend";
				var WebkitAnimation = "webkitAnimationEnd";
				var animation = "animationend";

				var transitionend = { WebkitTransition: WebkitTransition, transition: transition };
				var animationend = { WebkitAnimation: WebkitAnimation, animation: animation };

				this.prefixes.set("transitionend", transitionend);
				this.prefixes.set("animationend", animationend);
		}

		_createClass(Prefix, [{
				key: "getPrefix",

				/**
      * @getPrefix function
      *
      * @params {String} The non-prefixed CSS property / DOM event name to search the prefix map for.
      * @description Handles prefix queries by searching and testing properties and values in the prefix map against a HTMLElement's CSSStyleDeclaration.
      * @returns {String} The queried prefix.
      * @global yes
      */

				value: function getPrefix(prefix) {
						var _this = this;

						if (!this.prefixes.has(prefix)) {
								return false;
						} else if (prefix === "transitionend" || prefix === "animationend") {
								return this.getPrefixedEventName(prefix);
						} else if (prefix === "keyframes") {
								var keyframePrefix = this.prefixes.get(prefix).filter(function (f) {
										return _this.testElement.style[f + "animation-name"] !== undefined;
								})[0];
								return "@" + keyframePrefix + "keyframes";
						} else {
								return this.prefixes.get(prefix).filter(function (f) {
										return _this.testElement.style[f] !== undefined;
								})[0];
						}
				}
		}, {
				key: "getPrefixedEventName",

				/**
      * @getPrefixedEventName function
      *
      * @params {String} The non-prefixed DOM event name to search the prefix map for.
      * @description Tests a HTMLElement's CSSStyleDeclaration for supported DOM event prefixes.
      * @returns {String} The queried prefix.
      * @global no
      */

				value: function getPrefixedEventName(eventName) {
						var _this2 = this;

						var evtNames = this.prefixes.get(eventName);
						var matches = Object.keys(evtNames).filter(function (e) {
								return _this2.testElement.style[e] !== undefined;
						});
						return evtNames[matches[0]];
				}
		}]);

		return Prefix;
})();

;

exports["default"] = Prefix;
module.exports = exports["default"];

},{}],8:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});

function _classCallCheck(instance, Constructor) {
	if (!(instance instanceof Constructor)) {
		throw new TypeError("Cannot call a class as a function");
	}
}

/**
  * @SequenceWrapper Class
  *
  * @description Intercepts all sequences and returns a single or combo sequence depending on whether a single HTMLElement or Nodelist is used.
  * @returns {Promise}
  */

var SequenceWrapper =

/**
  * @constructor function
  *
  * @params {Object, Class, Class, Class, Class, Class, Class, Object}     
  * @description A wrapper that organises all sequences before they are launched. 
* @params description
- options {Object} Object of sequence options.
- DomUtils {Class} DOM utilities class.
- Prefix {Class} Prefix class.
- CssUtils {Class} CSS Utilities class.
- Promise {Class} Promise class.
- Sequence {Class} The sequence type (Transition / Animation).
- Combo {Class} Wrapper for multiple sequences.
- Tracker {Object} Object to store and track sequences through.
* @returns {Promise}
  */

function SequenceWrapper(options, DomUtils, Prefix, CssUtils, Promise, Sequence, Combo, Tracker) {
	_classCallCheck(this, SequenceWrapper);

	if (options.element.length) {
		var transitions = Array.from(options.element).map(function (element) {
			var opts = {};
			Object.keys(options).forEach(function (key) {
				opts[key] = options[key];
			});
			opts.element = element;
			Tracker.track(opts, Sequence);
			return new Sequence(opts, DomUtils, Prefix, CssUtils, Promise, Tracker);
		});
		return new Combo(transitions, Promise);
	} else {
		Tracker.track(options, Sequence);
		return new Sequence(options, DomUtils, Prefix, CssUtils, Promise, Tracker);
	}
};

exports["default"] = SequenceWrapper;
module.exports = exports["default"];

},{}],9:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = (function () {
	function defineProperties(target, props) {
		for (var i = 0; i < props.length; i++) {
			var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);
		}
	}return function (Constructor, protoProps, staticProps) {
		if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;
	};
})();

function _toConsumableArray(arr) {
	if (Array.isArray(arr)) {
		for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];return arr2;
	} else {
		return Array.from(arr);
	}
}

function _classCallCheck(instance, Constructor) {
	if (!(instance instanceof Constructor)) {
		throw new TypeError("Cannot call a class as a function");
	}
}

/**
  * @Tracker Class
  *
  * @description Track all sequenced elements to allow sequences to be played / paused.
  * @returns {Object}
  */

var Tracker = (function () {

	/**
   * @constructor function
   *
   * @params {Class, Class, Class, Class}    
   * @description Initialise a single Map object to store sequenced elements. Only one instance per Animator is created.  
 * @params description
 - DomUtils {Class} DOM utilities class.
 - Prefix {Class} Prefix class.
 - CssUtils {Class} CSS Utilities class.
 - Transition {Class} Store the Transition protoype to compare against new sequence types passed in to the Tracker.
   */

	function Tracker(DomUtils, Prefix, CssUtils, Transition) {
		_classCallCheck(this, Tracker);

		this.tracker = new Map();
		this.tracker.set("Transitions", new Map());
		this.tracker.set("Animations", new Map());
		this.domUtils = new DomUtils();
		this.prefix = new Prefix();
		this.cssUtils = new CssUtils();
		this.transitionPrototype = Transition.prototype;
	}

	_createClass(Tracker, [{
		key: "track",

		/**
    * @track function
    *
    * @params {Object, Class}
    * @description Searches the Map for the element passed in and either updates it if found or creates a new entry in the Map for it.
    * @params description      
    *  - options: {Object} The sequence options.
       - Sequence : {Class} Either a Transition or Animation class.
    * @global no
    */

		value: function track(options, Sequence) {

			var transition = this.tracker.get("Transitions").get(options.element);
			var animation = this.tracker.get("Animations").get(options.element);

			if (Sequence.prototype === this.transitionPrototype) {
				if (!transition) {
					this.trackTransition(options);
				} else {
					this.updateTransitionRecord(transition, options);
				}
			} else {

				// A reference to the element will suffice if the sequence type is an Animation.
				// CSS Animations can be paused and played easily unlike transitions which are a bit trickier.
				if (!animation) {
					this.trackAnimation(options);
				}
			}
		}
	}, {
		key: "trackTransition",

		/**
    * @trackTransition function
    *
    * @params {Object}
    * @description Stores the element under the Transitions key in the Tracker Map 
    * 		and the transitioned properties / values set against the element.
    * @params description      
    *  - options: {Object} The transition sequence options.
    * @global no
    */

		value: function trackTransition(options) {

			var data = {};
			var transitions = this.tracker.get("Transitions");
			var transitionStyles = {};
			var tp = Animator.getPrefix("transition-property"),
			    tdur = Animator.getPrefix("transition-duration"),
			    ttf = Animator.getPrefix("transition-timing-function"),
			    tdel = Animator.getPrefix("transition-delay");

			transitionStyles[tp] = options.element.style[tp];
			transitionStyles[tdur] = options.element.style[tdur];
			transitionStyles[ttf] = options.element.style[ttf];
			transitionStyles[tdel] = options.element.style[tdel];
			data.transitionStyles = transitionStyles;

			if (options.setStyles && options.setStyles.before) {
				data.styles = options.setStyles.before;
			}

			if (options.addClass && options.addClass.before) {

				data.className = {
					before: options.element.className,
					after: options.addClass.before
				};
			}

			data.properties = Array.isArray(options.properties) ? [].concat(_toConsumableArray(options.properties)) : [options.properties];
			transitions.set(options.element, data);
		}
	}, {
		key: "trackAnimation",

		/**
    * @trackAnimation function
    *
    * @params {Object}
    * @description Stores an element under the Animations key in the Tracker Map.
    * @params description      
    *  - options: {Object} The animation sequence options.
    * @global no
    */

		value: function trackAnimation(options) {

			var data = {};
			var animations = this.tracker.get("Animations");
			animations.set(options.element, data);
		}
	}, {
		key: "updateTransitionRecord",

		/**
    * @updateTransitionRecord function
    *
    * @params {Object, Object}
    * @description Inserts additional transitioned properties / style rules set into an element's record.
    * @params description      
    *  - record: {Object} The transition record from the Tracker Map.
    *  - options: {Object} The transition sequence options.
    * @global no
    */

		value: function updateTransitionRecord(record, options) {

			var properties = Array.isArray(options.properties) ? [].concat(_toConsumableArray(options.properties)) : [options.properties];
			properties = properties.filter(function (property) {
				return record.properties.indexOf(property) === -1;
			});
			record.properties = [].concat(_toConsumableArray(record.properties), _toConsumableArray(properties));

			if (options.setStyles && options.setStyles.before) {
				if (!record.styles) {
					record.styles = {};
				}
				Object.keys(options.setStyles.before).forEach(function (property) {
					record.styles[property] = options.setStyles.before[property];
				});
			}
		}
	}, {
		key: "pause",

		/**
    * @pause function
    *
    * @description Iterates through every stored element in the Tracker and sets its CSS appropriately to effectively pause a sequence.
    * @global no
    */

		value: function pause() {
			var _this = this;

			var transitions = this.tracker.get("Transitions");
			var transitionElements = transitions.keys();
			var animations = this.tracker.get("Animations");
			var animationElements = animations.keys();

			while (true) {

				var element = animationElements.next(),
				    rule = {};
				if (element.done) {
					break;
				}

				rule[this.prefix.getPrefix("animation-play-state")] = "paused";
				this.cssUtils.setStyles(element.value, rule);
			}

			var _loop = function _loop() {

				var element = transitionElements.next(),
				    record = undefined,
				    rule = {};
				if (element.done) {
					return "break";
				}

				record = transitions.get(element.value);
				record.properties.forEach(function (property) {
					var rule = _this.cssUtils.getStyles(element.value, property);
					_this.cssUtils.setStyles(element.value, rule);
				});

				rule = {};
				rule[_this.prefix.getPrefix("transition")] = "none";
				_this.cssUtils.setStyles(element.value, rule);
			};

			while (true) {
				var _ret = _loop();

				if (_ret === "break") break;
			}
		}
	}, {
		key: "play",

		/**
    * @play function
    *
    * @description Iterates through every stored element in the Tracker and sets CSS style rules to continue a paused sequence.
    * @global no
    */

		value: function play() {
			var _this2 = this;

			var transitions = this.tracker.get("Transitions");
			var transitionElements = transitions.keys();
			var animations = this.tracker.get("Animations");
			var animationElements = animations.keys();

			while (true) {

				var element = animationElements.next(),
				    rule = {};
				if (element.done) {
					break;
				}

				rule[this.prefix.getPrefix("animation-play-state")] = "running";
				this.cssUtils.setStyles(element.value, rule);
			}

			var _loop2 = function _loop2() {

				var element = transitionElements.next();
				if (element.done) {
					return "break";
				}

				var record = transitions.get(element.value);
				_this2.cssUtils.setStyles(element.value, record.transitionStyles);
				if (record.className) {
					record.properties.forEach(function (prop) {
						element.value.style.removeProperty(prop);
					});
				}

				if (record.styles) {
					_this2.cssUtils.setStyles(element.value, record.styles);
				}
			};

			while (true) {
				var _ret2 = _loop2();

				if (_ret2 === "break") break;
			}
		}
	}, {
		key: "remove",

		/**
    * @remove function
    *
    * @params {String, HTMLElement}
    * @description Removes a stored element from the Tracker once a sequence is complete.
    * @params description      
    *  - type: {String} Map key, either Transitions or Animations.
    *  - element: {HTMLElement} The element to remove from the Tracker.
    * @global no
    */

		value: function remove(type, element) {
			this.tracker.get(type)["delete"](element);
		}
	}]);

	return Tracker;
})();

exports["default"] = Tracker;
module.exports = exports["default"];

},{}],10:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = (function () {
	function defineProperties(target, props) {
		for (var i = 0; i < props.length; i++) {
			var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);
		}
	}return function (Constructor, protoProps, staticProps) {
		if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;
	};
})();

function _classCallCheck(instance, Constructor) {
	if (!(instance instanceof Constructor)) {
		throw new TypeError("Cannot call a class as a function");
	}
}

/**
  * @Transition Class
  *
  * @description Promise based transition handler that resolves when all transitions on an element are complete.
  * @returns {Resolved Promise}
  */

var Transition = (function () {

	/**
   * @constructor function
   *
   * @params {Object, Class, Class, Class, Class, Object}  
   * @description Creates a new transition sequence.    
 * @params description
 - options {Object} Transition options.
 	- element {HTMLElement} The element to set the transition on.
 	- properties {String / Array} A string or array of strings of CSS properties that are being transitioned.
 	- setStyles {Object} Styles to be set before / after the transition.
 		- before {Object} Object of CSS property / value pairs to be set before the transition.
 		- after {Object} Object of CSS property / value pairs to be set after the transition.
 	- addClass {Object} Object of classnames to be set before / after the transition.
 		- before {String} Classname to set before the transition.
 		- after {String} Classname to set after the transition.
 	- removeClass {Object} Object of classnames to be removed before / after the transition.
 		- before {String} Classname to be removed before the transition.
 		- after {String} Classname to be removed after the transition.
 - DomUtils {Class} Dom utility class.
 - Prefix {Class} Prefix class.
 - CssUtils {Class} CSS Utilities class.
 - Promise {Class} Promise class.
 - Tracker {Object} Object that tracks and monitors sequences.
 * @returns {Promise}
   */

	function Transition(options, DomUtils, Prefix, CssUtils, Promise, Tracker) {
		var _this = this;

		_classCallCheck(this, Transition);

		this.options = options;
		this.domUtils = new DomUtils();
		this.prefix = new Prefix().getPrefix("transitionend");
		this.cssUtils = new CssUtils();
		this.onTransitionEnd = this.transitionEnd.bind(this);
		this.totaltransitions = Array.isArray(options.properties) ? options.properties.length : 1;
		this.transitionendCount = 0;
		this.tracker = Tracker;

		return new Promise(function (resolve, reject) {
			_this.resolve = resolve;
			_this.reject = reject;
			_this.animationFrame = requestAnimationFrame(_this.transitionStart.bind(_this));
		});
	}

	_createClass(Transition, [{
		key: "transitionStart",

		/**
    * @transitionStart function
    *
    * @description Sets classnames / style rules to trigger the transition.
    * @global no
    */

		value: function transitionStart() {

			var opts = this.options;
			opts.element.addEventListener(this.prefix, this.onTransitionEnd, false);

			if (opts.setStyles && opts.setStyles.before) {
				this.cssUtils.setStyles(opts.element, opts.setStyles.before);
			}

			if (opts.removeClass && opts.removeClass.before) {
				this.domUtils.setClass(opts.element, opts.removeClass.before, false);
			}

			if (opts.addClass && opts.addClass.before) {
				this.domUtils.setClass(opts.element, opts.addClass.before, true);
			}
		}
	}, {
		key: "transitionEnd",

		/**
    * @transitionEnd function
    *
    * @description Sets classnames / style rules after all transitions have occurred and removes the element from the tracker.
    * @global no
    * @returns {Resolved Promise}
    */

		value: function transitionEnd() {

			var opts = this.options;
			this.transitionendCount++;

			if (this.transitionendCount === this.totaltransitions) {

				opts.element.removeEventListener(this.prefix, this.onTransitionEnd, false);
				cancelAnimationFrame(this.animationFrame);

				if (opts.setStyles && opts.setStyles.after) {
					this.cssUtils.setStyles(opts.element, opts.setStyles.after);
				}

				if (opts.removeClass && opts.removeClass.after) {
					this.domUtils.setClass(opts.element, opts.removeClass.after, false);
				}

				if (opts.addClass && opts.addClass.after) {
					this.domUtils.setClass(opts.element, opts.addClass.after, true);
				}

				this.tracker.remove("Transitions", opts.element);
				this.resolve(opts.element);
			}
		}
	}]);

	return Transition;
})();

exports["default"] = Transition;
module.exports = exports["default"];

},{}],11:[function(require,module,exports){
// shim for using process in browser

var process = module.exports = {};
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = setTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            currentQueue[queueIndex].run();
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    clearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (!draining) {
        setTimeout(drainQueue, 0);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

// TODO(shtylman)
process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJDOi9Vc2Vycy9NaWtlX0NoYWR3aWNrL0RvY3VtZW50cy9HaXRIdWIvQW5pbWF0b3ItRVM2L2pzL3RlbXAvYW5pbWF0b3IuanMiLCJDOi9Vc2Vycy9NaWtlX0NoYWR3aWNrL0RvY3VtZW50cy9HaXRIdWIvQW5pbWF0b3ItRVM2L2pzL3RlbXAvYW5pbWF0aW9uLXNlcS5qcyIsIkM6L1VzZXJzL01pa2VfQ2hhZHdpY2svRG9jdW1lbnRzL0dpdEh1Yi9BbmltYXRvci1FUzYvanMvdGVtcC9jb21iby1zZXEuanMiLCJDOi9Vc2Vycy9NaWtlX0NoYWR3aWNrL0RvY3VtZW50cy9HaXRIdWIvQW5pbWF0b3ItRVM2L2pzL3RlbXAvY3NzLXV0aWxzLmpzIiwiQzovVXNlcnMvTWlrZV9DaGFkd2ljay9Eb2N1bWVudHMvR2l0SHViL0FuaW1hdG9yLUVTNi9qcy90ZW1wL2RvbS11dGlscy5qcyIsIkM6L1VzZXJzL01pa2VfQ2hhZHdpY2svRG9jdW1lbnRzL0dpdEh1Yi9BbmltYXRvci1FUzYvanMvdGVtcC9lczYtcHJvbWlzZS5qcyIsIkM6L1VzZXJzL01pa2VfQ2hhZHdpY2svRG9jdW1lbnRzL0dpdEh1Yi9BbmltYXRvci1FUzYvanMvdGVtcC9wcmVmaXhlcy5qcyIsIkM6L1VzZXJzL01pa2VfQ2hhZHdpY2svRG9jdW1lbnRzL0dpdEh1Yi9BbmltYXRvci1FUzYvanMvdGVtcC9zZXEtd3JhcHBlci5qcyIsIkM6L1VzZXJzL01pa2VfQ2hhZHdpY2svRG9jdW1lbnRzL0dpdEh1Yi9BbmltYXRvci1FUzYvanMvdGVtcC90cmFja2VyLmpzIiwiQzovVXNlcnMvTWlrZV9DaGFkd2ljay9Eb2N1bWVudHMvR2l0SHViL0FuaW1hdG9yLUVTNi9qcy90ZW1wL3RyYW5zaXRpb24tc2VxLmpzIiwibm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL3Byb2Nl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SUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztLQUNoRTs7QUFFRCxRQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ2pELFFBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQzNCO0dBQ0Q7RUFDRCxDQUFDLENBQUMsQ0FBQzs7QUFFSixRQUFPLFVBQVUsQ0FBQztDQUNsQixDQUFBLEVBQUcsQ0FBQzs7QUFFTCxPQUFPLENBQUMsU0FBUyxDQUFDLEdBQUcsVUFBVSxDQUFDO0FBQ2hDLE1BQU0sQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDOzs7QUN4SXBDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG4vKipcclxuICAqIEBBbmltYXRvciBDbGFzc1xyXG4gICpcclxuICAqIEBkZXNjcmlwdGlvbiBIb3VzZXMgYWxsIEFuaW1hdG9yIGZ1bmN0aW9uYWxpdHlcclxuICAqIEByZXR1cm5zIHtPYmplY3R9XHJcbiAgKi9cblxudmFyIF9wcmVmaXhlcyA9IHJlcXVpcmUoXCIuL3ByZWZpeGVzXCIpO1xuXG52YXIgX3ByZWZpeGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ByZWZpeGVzKTtcblxudmFyIF9jc3NVdGlscyA9IHJlcXVpcmUoXCIuL2Nzcy11dGlsc1wiKTtcblxudmFyIF9jc3NVdGlsczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jc3NVdGlscyk7XG5cbnZhciBfZG9tVXRpbHMgPSByZXF1aXJlKFwiLi9kb20tdXRpbHNcIik7XG5cbnZhciBfZG9tVXRpbHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZG9tVXRpbHMpO1xuXG52YXIgX2FuaW1hdGlvblNlcSA9IHJlcXVpcmUoXCIuL2FuaW1hdGlvbi1zZXFcIik7XG5cbnZhciBfYW5pbWF0aW9uU2VxMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2FuaW1hdGlvblNlcSk7XG5cbnZhciBfdHJhbnNpdGlvblNlcSA9IHJlcXVpcmUoXCIuL3RyYW5zaXRpb24tc2VxXCIpO1xuXG52YXIgX3RyYW5zaXRpb25TZXEyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdHJhbnNpdGlvblNlcSk7XG5cbnZhciBfY29tYm9TZXEgPSByZXF1aXJlKFwiLi9jb21iby1zZXFcIik7XG5cbnZhciBfY29tYm9TZXEyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29tYm9TZXEpO1xuXG52YXIgX3NlcVdyYXBwZXIgPSByZXF1aXJlKFwiLi9zZXEtd3JhcHBlclwiKTtcblxudmFyIF9zZXFXcmFwcGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlcVdyYXBwZXIpO1xuXG52YXIgX3RyYWNrZXIgPSByZXF1aXJlKFwiLi90cmFja2VyXCIpO1xuXG52YXIgX3RyYWNrZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdHJhY2tlcik7XG5cbnZhciBfZXM2UHJvbWlzZSA9IHJlcXVpcmUoXCIuL2VzNi1wcm9taXNlXCIpO1xuXG52YXIgQW5pbWF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXG4gIC8qKlxyXG4gICAgKiBAY29uc3RydWN0b3IgZnVuY3Rpb25cclxuICAgICpcclxuICAgICogQGRlc2NyaXB0aW9uIENyZWF0ZXMgYSBzdHlsZXNoZWV0IGFuZCBUcmFja2VyIG9iamVjdCB0byBiZSB1c2VkIHRocm91Z2hvdXQgQW5pbWF0b3IuXHJcbiAgICAqL1xuXG4gIGZ1bmN0aW9uIEFuaW1hdG9yKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBbmltYXRvcik7XG5cbiAgICB0aGlzLnN0eWxlc2hlZXQgPSBuZXcgX2Nzc1V0aWxzMltcImRlZmF1bHRcIl0oKS5jcmVhdGVTdHlsZVNoZWV0KCk7XG4gICAgdGhpcy50cmFja2VyID0gbmV3IF90cmFja2VyMltcImRlZmF1bHRcIl0oX2RvbVV0aWxzMltcImRlZmF1bHRcIl0sIF9wcmVmaXhlczJbXCJkZWZhdWx0XCJdLCBfY3NzVXRpbHMyW1wiZGVmYXVsdFwiXSwgX3RyYW5zaXRpb25TZXEyW1wiZGVmYXVsdFwiXSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoQW5pbWF0b3IsIFt7XG4gICAga2V5OiBcImdldFByZWZpeFwiLFxuXG4gICAgLyoqXHJcbiAgICAgICogQGdldFByZWZpeCBmdW5jdGlvblxyXG4gICAgICAqXHJcbiAgICAgICogQHBhcmFtcyB7U3RyaW5nfVxyXG4gICAgICAqIEBkZXNjcmlwdGlvbiBSZXR1cm5zIGEgcHJlZml4ZWQgQ1NTIHByb3BlcnR5IG9yIERPTSBldmVudCBuYW1lLlxyXG4gICAgICAqIEByZXR1cm4ge1N0cmluZ31cclxuICAgICAgKi9cblxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQcmVmaXgocHJlZml4KSB7XG4gICAgICByZXR1cm4gbmV3IF9wcmVmaXhlczJbXCJkZWZhdWx0XCJdKCkuZ2V0UHJlZml4KHByZWZpeCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNldFN0eWxlc1wiLFxuXG4gICAgLyoqXHJcbiAgICAgICogQHNldFN0eWxlcyBmdW5jdGlvblxyXG4gICAgICAqXHJcbiAgICAgICogQHBhcmFtcyB7SFRNTEVsZW1lbnQsIFN0cmluZyAvIEFycmF5fVxyXG4gICAgICAqIEBkZXNjcmlwdGlvbiBTZXRzIHByb3BlcnRpZXMgLyB2YWx1ZXMgb24gYW4gZWxlbWVudCdzIENTU1N0eWxlRGVjbGFyYXRpb24uXHJcbiAgICAgICovXG5cbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0U3R5bGVzKGVsZW1lbnQsIHN0eWxlcykge1xuICAgICAgcmV0dXJuIG5ldyBfY3NzVXRpbHMyW1wiZGVmYXVsdFwiXSgpLnNldFN0eWxlcyhlbGVtZW50LCBzdHlsZXMpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRTdHlsZXNcIixcblxuICAgIC8qKlxyXG4gICAgICAqIEBnZXRTdHlsZXMgZnVuY3Rpb25cclxuICAgICAgKlxyXG4gICAgICAqIEBwYXJhbXMge0hUTUxFbGVtZW50LCBPYmplY3R9XHJcbiAgICAgICogQGRlc2NyaXB0aW9uIFJldHVybiBhbiBvYmplY3Qgb2YgQ1NTIHByb3BlcnRpZXMgLyB2YWx1ZXMuXHJcbiAgICAgICogQHJldHVybiB7T2JqZWN0fVxyXG4gICAgICAqL1xuXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFN0eWxlcyhlbGVtZW50LCBwcm9wZXJ0aWVzKSB7XG4gICAgICByZXR1cm4gbmV3IF9jc3NVdGlsczJbXCJkZWZhdWx0XCJdKCkuZ2V0U3R5bGVzKGVsZW1lbnQsIHByb3BlcnRpZXMpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjcmVhdGVUcmFuc2l0aW9uXCIsXG5cbiAgICAvKipcclxuICAgICAgKiBAY3JlYXRlVHJhbnNpdGlvbiBmdW5jdGlvblxyXG4gICAgICAqXHJcbiAgICAgICogQHBhcmFtcyB7T2JqZWN0fVxyXG4gICAgICAqIEBkZXNjcmlwdGlvbiBDcmVhdGVzIGEgQ1NTIHRyYW5zaXRpb24gZGVmaW5pdGlvbi5cclxuICAgICAgKi9cblxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVUcmFuc2l0aW9uKHRyYW5zaXRpb24pIHtcbiAgICAgIG5ldyBfY3NzVXRpbHMyW1wiZGVmYXVsdFwiXSgpLmNyZWF0ZVRyYW5zaXRpb24odHJhbnNpdGlvbiwgX3ByZWZpeGVzMltcImRlZmF1bHRcIl0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjcmVhdGVBbmltYXRpb25cIixcblxuICAgIC8qKlxyXG4gICAgICAqIEBjcmVhdGVBbmltYXRpb24gZnVuY3Rpb25cclxuICAgICAgKlxyXG4gICAgICAqIEBwYXJhbXMge09iamVjdH1cclxuICAgICAgKiBAZGVzY3JpcHRpb24gQ3JlYXRlcyBhIENTUyBrZXlmcmFtZSBhbmltYXRpb24gZGVmaW5pdGlvbi5cclxuICAgICAgKi9cblxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVBbmltYXRpb24oYW5pbWF0aW9uKSB7XG4gICAgICBuZXcgX2Nzc1V0aWxzMltcImRlZmF1bHRcIl0oKS5jcmVhdGVLZXlmcmFtZUFuaW1hdGlvbihhbmltYXRpb24sIF9wcmVmaXhlczJbXCJkZWZhdWx0XCJdLCB0aGlzLnN0eWxlc2hlZXQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjcmVhdGVDbGFzc1wiLFxuXG4gICAgLyoqXHJcbiAgICAgICogQGNyZWF0ZUNsYXNzIGZ1bmN0aW9uXHJcbiAgICAgICpcclxuICAgICAgKiBAcGFyYW1zIHtTdHJpbmcsIE9iamVjdH1cclxuICAgICAgKiBAZGVzY3JpcHRpb24gQ3JlYXRlcyBhIENTUyBjbGFzcyBhbmQgYXBwZW5kcyBpdCB0byB0aGUgc3R5bGVzaGVldC5cclxuICAgICAgKi9cblxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVDbGFzcyhjbGFzc05hbWUsIHJ1bGVzKSB7XG4gICAgICBuZXcgX2Nzc1V0aWxzMltcImRlZmF1bHRcIl0oKS5jcmVhdGVDbGFzcyhjbGFzc05hbWUsIHRoaXMuc3R5bGVzaGVldCwgcnVsZXMpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJkZWxldGVDbGFzc1wiLFxuXG4gICAgLyoqXHJcbiAgICAgICogQGRlbGV0ZUNsYXNzIGZ1bmN0aW9uXHJcbiAgICAgICpcclxuICAgICAgKiBAcGFyYW1zIHtTdHJpbmd9XHJcbiAgICAgICogQGRlc2NyaXB0aW9uIERlbGV0ZXMgYSBDU1MgY2xhc3MgZnJvbSB0aGUgc3R5bGVzaGVldC5cclxuICAgICAgKi9cblxuICAgIHZhbHVlOiBmdW5jdGlvbiBkZWxldGVDbGFzcyhjbGFzc05hbWUpIHtcbiAgICAgIG5ldyBfY3NzVXRpbHMyW1wiZGVmYXVsdFwiXSgpLmRlbGV0ZUNsYXNzKGNsYXNzTmFtZSwgdGhpcy5zdHlsZXNoZWV0KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiYWRkQ2xhc3NcIixcblxuICAgIC8qKlxyXG4gICAgICAqIEBhZGRDbGFzcyBmdW5jdGlvblxyXG4gICAgICAqXHJcbiAgICAgICogQHBhcmFtcyB7SFRNTEVsZW1lbnQsIFN0cmluZyAvIEFycmF5fVxyXG4gICAgICAqIEBkZXNjcmlwdGlvbiBTZXRzIGEgY2xhc3MoZXMpIG9uIGFuIGVsZW1lbnQuXHJcbiAgICAgICovXG5cbiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkQ2xhc3MoZWxlbWVudCwgY2xhc3NMaXN0KSB7XG4gICAgICBuZXcgX2RvbVV0aWxzMltcImRlZmF1bHRcIl0oKS5zZXRDbGFzcyhlbGVtZW50LCBjbGFzc0xpc3QsIHRydWUpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW1vdmVDbGFzc1wiLFxuXG4gICAgLyoqXHJcbiAgICAgICogQHJlbW92ZUNsYXNzIGZ1bmN0aW9uXHJcbiAgICAgICpcclxuICAgICAgKiBAcGFyYW1zIHtIVE1MRWxlbWVudCwgU3RyaW5nIC8gQXJyYXl9XHJcbiAgICAgICogQGRlc2NyaXB0aW9uIFJlbW92ZXMgYSBjbGFzcyhlcykgZnJvbSBhbiBlbGVtZW50LlxyXG4gICAgICAqL1xuXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsZW1lbnQsIGNsYXNzTGlzdCkge1xuICAgICAgbmV3IF9kb21VdGlsczJbXCJkZWZhdWx0XCJdKCkuc2V0Q2xhc3MoZWxlbWVudCwgY2xhc3NMaXN0LCBmYWxzZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInRyYW5zaXRpb25cIixcblxuICAgIC8qKlxyXG4gICAgICAqIEB0cmFuc2l0aW9uIGZ1bmN0aW9uXHJcbiAgICAgICpcclxuICAgICAgKiBAcGFyYW1zIHtPYmplY3R9XHJcbiAgICAgICogQGRlc2NyaXB0aW9uIENyZWF0ZXMgYSB0cmFuc2l0aW9uIHNlcXVlbmNlLlxyXG4gICAgICAqIEByZXR1cm5zIHtQcm9taXNlfVxyXG4gICAgICAqL1xuXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHRyYW5zaXRpb24ob3B0aW9ucykge1xuICAgICAgcmV0dXJuIG5ldyBfc2VxV3JhcHBlcjJbXCJkZWZhdWx0XCJdKG9wdGlvbnMsIF9kb21VdGlsczJbXCJkZWZhdWx0XCJdLCBfcHJlZml4ZXMyW1wiZGVmYXVsdFwiXSwgX2Nzc1V0aWxzMltcImRlZmF1bHRcIl0sIF9lczZQcm9taXNlLlByb21pc2UsIF90cmFuc2l0aW9uU2VxMltcImRlZmF1bHRcIl0sIF9jb21ib1NlcTJbXCJkZWZhdWx0XCJdLCB0aGlzLnRyYWNrZXIpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJhbmltYXRpb25cIixcblxuICAgIC8qKlxyXG4gICAgICAqIEBhbmltYXRpb24gZnVuY3Rpb25cclxuICAgICAgKlxyXG4gICAgICAqIEBwYXJhbXMge09iamVjdH1cclxuICAgICAgKiBAZGVzY3JpcHRpb24gQ3JlYXRlcyBhbiBhbmltYXRpb24gc2VxdWVuY2UuXHJcbiAgICAgICogQHJldHVybnMge1Byb21pc2V9XHJcbiAgICAgICovXG5cbiAgICB2YWx1ZTogZnVuY3Rpb24gYW5pbWF0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiBuZXcgX3NlcVdyYXBwZXIyW1wiZGVmYXVsdFwiXShvcHRpb25zLCBfZG9tVXRpbHMyW1wiZGVmYXVsdFwiXSwgX3ByZWZpeGVzMltcImRlZmF1bHRcIl0sIF9jc3NVdGlsczJbXCJkZWZhdWx0XCJdLCBfZXM2UHJvbWlzZS5Qcm9taXNlLCBfYW5pbWF0aW9uU2VxMltcImRlZmF1bHRcIl0sIF9jb21ib1NlcTJbXCJkZWZhdWx0XCJdLCB0aGlzLnRyYWNrZXIpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb21ib1wiLFxuXG4gICAgLyoqXHJcbiAgICAgICogQGNvbWJvIGZ1bmN0aW9uXHJcbiAgICAgICpcclxuICAgICAgKiBAcGFyYW1zIHtPYmplY3R9XHJcbiAgICAgICogQGRlc2NyaXB0aW9uIENyZWF0ZXMgYW4gY29tYmluYXRpb24gb2Ygc2VxdWVuY2UuXHJcbiAgICAgICogQHJldHVybnMge1Byb21pc2V9XHJcbiAgICAgICovXG5cbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tYm8oYW5pbWF0aW9ucykge1xuICAgICAgcmV0dXJuIG5ldyBfY29tYm9TZXEyW1wiZGVmYXVsdFwiXShhbmltYXRpb25zLCBfZXM2UHJvbWlzZS5Qcm9taXNlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaXNTdXBwb3J0ZWRcIixcblxuICAgIC8qKlxyXG4gICAgICAqIEBpc1N1cHBvcnRlZCBmdW5jdGlvblxyXG4gICAgICAqXHJcbiAgICAgICogQGRlc2NyaXB0aW9uIFRlc3RzIHRoZSBicm93c2VyIGZvciBBbmltYXRvciBzdXBwb3J0LlxyXG4gICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxyXG4gICAgICAqL1xuXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzU3VwcG9ydGVkKCkge1xuICAgICAgcmV0dXJuIG5ldyBfZG9tVXRpbHMyW1wiZGVmYXVsdFwiXSgpLnN1cHBvcnQoX3ByZWZpeGVzMltcImRlZmF1bHRcIl0sIF9jc3NVdGlsczJbXCJkZWZhdWx0XCJdLCB0aGlzLnN0eWxlc2hlZXQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJwYXVzZVwiLFxuXG4gICAgLyoqXHJcbiAgICAgICogQHBhdXNlIGZ1bmN0aW9uXHJcbiAgICAgICpcclxuICAgICAgKiBAZGVzY3JpcHRpb24gUGF1c2UgdGhlIGN1cnJlbnQgc2VxdWVuY2UuXHJcbiAgICAgICovXG5cbiAgICB2YWx1ZTogZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgICB0aGlzLnRyYWNrZXIucGF1c2UoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicGxheVwiLFxuXG4gICAgLyoqXHJcbiAgICAgICogQHBsYXkgZnVuY3Rpb25cclxuICAgICAgKlxyXG4gICAgICAqIEBkZXNjcmlwdGlvbiBQbGF5cyB0aGUgY3VycmVudCBzZXF1ZW5jZS5cclxuICAgICAgKi9cblxuICAgIHZhbHVlOiBmdW5jdGlvbiBwbGF5KCkge1xuICAgICAgdGhpcy50cmFja2VyLnBsYXkoKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gQW5pbWF0b3I7XG59KSgpO1xuXG53aW5kb3cuQW5pbWF0b3IgPSBuZXcgQW5pbWF0b3IoKTsiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdFx0dmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbi8qKlxyXG4gICogQEFuaW1hdGlvbiBDbGFzc1xyXG4gICpcclxuICAqIEBkZXNjcmlwdGlvbiBQcm9taXNlIGJhc2VkIGFuaW1hdGlvbiBoYW5kbGVyIHRoYXQgcmVzb2x2ZXMgd2hlbiBhbmltYXRpb25zIHRyaWdnZXJlZCBvbiBhbiBlbGVtZW50IGFyZSBjb21wbGV0ZS5cclxuICAqIEByZXR1cm5zIHtSZXNvbHZlZCBQcm9taXNlfVxyXG4gICovXG5cbnZhciBBbmltYXRpb24gPSAoZnVuY3Rpb24gKCkge1xuXG5cdFx0LyoqXHJcbiAgICAqIEBjb25zdHJ1Y3RvciBmdW5jdGlvblxyXG4gICAgKlxyXG4gICAgKiBAcGFyYW1zIHtPYmplY3QsIENsYXNzLCBDbGFzcywgQ2xhc3MsIENsYXNzLCBPYmplY3R9ICBcclxuICAgICogQGRlc2NyaXB0aW9uIENyZWF0ZXMgYSBuZXcgYW5pbWF0aW9uIHNlcXVlbmNlLiAgICBcclxuICAqIEBwYXJhbXMgZGVzY3JpcHRpb25cclxuICAtIG9wdGlvbnMge09iamVjdH0gQW5pbWF0aW9uIG9wdGlvbnMuXHJcbiAgXHQtIGVsZW1lbnQge0hUTUxFbGVtZW50fSBUaGUgZWxlbWVudCB0byBzZXQgdGhlIGFuaW1hdGlvbiBvbi5cclxuICBcdC0gc2V0U3R5bGVzIHtPYmplY3R9IFN0eWxlcyB0byBiZSBzZXQgYmVmb3JlIC8gYWZ0ZXIgdGhlIGFuaW1hdGlvbi5cclxuICBcdFx0LSBiZWZvcmUge09iamVjdH0gT2JqZWN0IG9mIENTUyBwcm9wZXJ0eSAvIHZhbHVlIHBhaXJzIHRvIGJlIHNldCBiZWZvcmUgdGhlIGFuaW1hdGlvbi5cclxuICBcdFx0LSBhZnRlciB7T2JqZWN0fSBPYmplY3Qgb2YgQ1NTIHByb3BlcnR5IC8gdmFsdWUgcGFpcnMgdG8gYmUgc2V0IGFmdGVyIHRoZSBhbmltYXRpb24uXHJcbiAgXHQtIGFkZENsYXNzIHtPYmplY3R9IE9iamVjdCBvZiBjbGFzc25hbWVzIHRvIGJlIHNldCBiZWZvcmUgLyBhZnRlciB0aGUgYW5pbWF0aW9uLlxyXG4gIFx0XHQtIGJlZm9yZSB7U3RyaW5nfSBDbGFzc25hbWUgdG8gc2V0IGJlZm9yZSB0aGUgYW5pbWF0aW9uLlxyXG4gIFx0XHQtIGFmdGVyIHtTdHJpbmd9IENsYXNzbmFtZSB0byBzZXQgYWZ0ZXIgdGhlIGFuaW1hdGlvbi5cclxuICBcdC0gcmVtb3ZlQ2xhc3Mge09iamVjdH0gT2JqZWN0IG9mIGNsYXNzbmFtZXMgdG8gYmUgcmVtb3ZlZCBiZWZvcmUgLyBhZnRlciB0aGUgYW5pbWF0aW9uLlxyXG4gIFx0XHQtIGJlZm9yZSB7U3RyaW5nfSBDbGFzc25hbWUgdG8gYmUgcmVtb3ZlZCBiZWZvcmUgdGhlIGFuaW1hdGlvbi5cclxuICBcdFx0LSBhZnRlciB7U3RyaW5nfSBDbGFzc25hbWUgdG8gYmUgcmVtb3ZlZCBhZnRlciB0aGUgYW5pbWF0aW9uLlxyXG4gIC0gRG9tVXRpbHMge0NsYXNzfSBEb20gdXRpbGl0eSBjbGFzcy5cclxuICAtIFByZWZpeCB7Q2xhc3N9IFByZWZpeCBjbGFzcy5cclxuICAtIENzc1V0aWxzIHtDbGFzc30gQ1NTIFV0aWxpdGllcyBjbGFzcy5cclxuICAtIFByb21pc2Uge0NsYXNzfSBQcm9taXNlIGNsYXNzLlxyXG4gIC0gVHJhY2tlciB7T2JqZWN0fSBPYmplY3QgdGhhdCB0cmFja3MgYW5kIG1vbml0b3JzIHNlcXVlbmNlcy5cclxuICAqIEByZXR1cm5zIHtQcm9taXNlfVxyXG4gICAgKi9cblxuXHRcdGZ1bmN0aW9uIEFuaW1hdGlvbihvcHRpb25zLCBEb21VdGlscywgUHJlZml4LCBDc3NVdGlscywgUHJvbWlzZSwgVHJhY2tlcikge1xuXHRcdFx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdFx0XHRcdF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBbmltYXRpb24pO1xuXG5cdFx0XHRcdHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdFx0XHRcdHRoaXMuZG9tVXRpbHMgPSBuZXcgRG9tVXRpbHMoKTtcblx0XHRcdFx0dGhpcy5jc3NVdGlscyA9IG5ldyBDc3NVdGlscygpO1xuXHRcdFx0XHR0aGlzLnByZWZpeCA9IG5ldyBQcmVmaXgoKS5nZXRQcmVmaXgoXCJhbmltYXRpb25lbmRcIik7XG5cdFx0XHRcdHRoaXMub25BbmltYXRpb25FbmQgPSB0aGlzLmFuaW1hdGlvbkVuZC5iaW5kKHRoaXMpO1xuXHRcdFx0XHR0aGlzLnRyYWNrZXIgPSBUcmFja2VyO1xuXG5cdFx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcdFx0XHRfdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTtcblx0XHRcdFx0XHRcdF90aGlzLnJlamVjdCA9IHJlamVjdDtcblx0XHRcdFx0XHRcdF90aGlzLmFuaW1hdGlvbkZyYW1lID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKF90aGlzLmFuaW1hdGlvblN0YXJ0LmJpbmQoX3RoaXMpKTtcblx0XHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0X2NyZWF0ZUNsYXNzKEFuaW1hdGlvbiwgW3tcblx0XHRcdFx0a2V5OiBcImFuaW1hdGlvblN0YXJ0XCIsXG5cblx0XHRcdFx0LyoqXHJcbiAgICAgICogQGFuaW1hdGlvblN0YXJ0IGZ1bmN0aW9uXHJcbiAgICAgICpcclxuICAgICAgKiBAZGVzY3JpcHRpb24gU2V0cyBjbGFzc25hbWVzIC8gc3R5bGUgcnVsZXMgdG8gdHJpZ2dlciB0aGUgYW5pbWF0aW9uLlxyXG4gICAgICAqIEBnbG9iYWwgbm9cclxuICAgICAgKi9cblxuXHRcdFx0XHR2YWx1ZTogZnVuY3Rpb24gYW5pbWF0aW9uU3RhcnQoKSB7XG5cblx0XHRcdFx0XHRcdHZhciBvcHRzID0gdGhpcy5vcHRpb25zO1xuXHRcdFx0XHRcdFx0b3B0cy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIodGhpcy5wcmVmaXgsIHRoaXMub25BbmltYXRpb25FbmQsIGZhbHNlKTtcblxuXHRcdFx0XHRcdFx0aWYgKG9wdHMuc2V0U3R5bGVzICYmIG9wdHMuc2V0U3R5bGVzLmJlZm9yZSkge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuY3NzVXRpbHMuc2V0U3R5bGVzKG9wdHMuZWxlbWVudCwgb3B0cy5zZXRTdHlsZXMuYmVmb3JlKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKG9wdHMucmVtb3ZlQ2xhc3MgJiYgb3B0cy5yZW1vdmVDbGFzcy5iZWZvcmUpIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmRvbVV0aWxzLnNldENsYXNzKG9wdHMuZWxlbWVudCwgb3B0cy5yZW1vdmVDbGFzcy5iZWZvcmUsIGZhbHNlKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKG9wdHMuYWRkQ2xhc3MgJiYgb3B0cy5hZGRDbGFzcy5iZWZvcmUpIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmRvbVV0aWxzLnNldENsYXNzKG9wdHMuZWxlbWVudCwgb3B0cy5hZGRDbGFzcy5iZWZvcmUsIHRydWUpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0XHRrZXk6IFwiYW5pbWF0aW9uRW5kXCIsXG5cblx0XHRcdFx0LyoqXHJcbiAgICAgICogQGFuaW1hdGlvbkVuZCBmdW5jdGlvblxyXG4gICAgICAqXHJcbiAgICAgICogQGRlc2NyaXB0aW9uIFNldHMgY2xhc3NuYW1lcyAvIHN0eWxlIHJ1bGVzIGFmdGVyIGFsbCBhbmltYXRpb25zIGhhdmUgY29tcGxldGVkIGFuZCByZW1vdmVzIHRoZSBlbGVtZW50IGZyb20gdGhlIHRyYWNrZXIuXHJcbiAgICAgICogQGdsb2JhbCBub1xyXG4gICAgICAqIEByZXR1cm5zIHtSZXNvbHZlZCBQcm9taXNlfVxyXG4gICAgICAqL1xuXG5cdFx0XHRcdHZhbHVlOiBmdW5jdGlvbiBhbmltYXRpb25FbmQoKSB7XG5cblx0XHRcdFx0XHRcdHZhciBvcHRzID0gdGhpcy5vcHRpb25zO1xuXHRcdFx0XHRcdFx0b3B0cy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5wcmVmaXgsIHRoaXMub25BbmltYXRpb25FbmQsIGZhbHNlKTtcblx0XHRcdFx0XHRcdGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uRnJhbWUpO1xuXG5cdFx0XHRcdFx0XHRpZiAob3B0cy5zZXRTdHlsZXMgJiYgb3B0cy5zZXRTdHlsZXMuYWZ0ZXIpIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmNzc1V0aWxzLnNldFN0eWxlcyhvcHRzLmVsZW1lbnQsIG9wdHMuc2V0U3R5bGVzLmFmdGVyKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKG9wdHMucmVtb3ZlQ2xhc3MgJiYgb3B0cy5yZW1vdmVDbGFzcy5hZnRlcikge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuZG9tVXRpbHMuc2V0Q2xhc3Mob3B0cy5lbGVtZW50LCBvcHRzLnJlbW92ZUNsYXNzLmFmdGVyLCBmYWxzZSk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmIChvcHRzLmFkZENsYXNzICYmIG9wdHMuYWRkQ2xhc3MuYWZ0ZXIpIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmRvbVV0aWxzLnNldENsYXNzKG9wdHMuZWxlbWVudCwgb3B0cy5hZGRDbGFzcy5hZnRlciwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHRoaXMudHJhY2tlci5yZW1vdmUoXCJBbmltYXRpb25zXCIsIG9wdHMuZWxlbWVudCk7XG5cdFx0XHRcdFx0XHR0aGlzLnJlc29sdmUob3B0cy5lbGVtZW50KTtcblx0XHRcdFx0fVxuXHRcdH1dKTtcblxuXHRcdHJldHVybiBBbmltYXRpb247XG59KSgpO1xuXG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IEFuaW1hdGlvbjtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1tcImRlZmF1bHRcIl07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHR2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuLyoqXHJcbiAgKiBAQ29tYm8gQ2xhc3NcclxuICAqXHJcbiAgKiBAZGVzY3JpcHRpb24gV3JhcHMgYSBQcm9taXNlIGFyb3VuZCB4IGFtb3VudCBvZiBzZXF1ZW5jZXMgYW5kIHJlc29sdmVzIHdoZW4gYWxsIHNlcXVlbmNlcyBoYXZlIHJlc29sdmVkLlxyXG4gICogQHJldHVybnMge1Jlc29sdmVkIFByb21pc2V9XHJcbiAgKi9cblxudmFyIENvbWJvID0gKGZ1bmN0aW9uICgpIHtcblxuXHQvKipcclxuICAgKiBAY29uc3RydWN0b3IgZnVuY3Rpb25cclxuICAgKlxyXG4gICAqIEBwYXJhbXMge0FycmF5LCBDbGFzc30gIFxyXG4gICAqIEBkZXNjcmlwdGlvbiBXcmFwcyB4IGFtb3VudCBvZiBzZXF1ZW5jZXMgaW4gYSBQcm9taXNlLiAgICBcclxuICogQHBhcmFtcyBkZXNjcmlwdGlvblxyXG4gLSBzZXF1ZW5jZXMge0FycmF5fSBBbiBhcnJheSBvZiBzZXF1ZW5jZXMuXHJcbiAtIFByb21pc2Uge0NsYXNzfSBQcm9taXNlIGNsYXNzLlxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZX1cclxuICAgKi9cblxuXHRmdW5jdGlvbiBDb21ibyhzZXF1ZW5jZXMsIFByb21pc2UpIHtcblx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdFx0X2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbWJvKTtcblxuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdHZhciB3YXRjaGVyID0gX3RoaXMuc2VxdWVuY2VXYXRjaGVyKCk7XG5cdFx0XHRfdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTtcblx0XHRcdF90aGlzLnJlamVjdCA9IHJlamVjdDtcblx0XHRcdF90aGlzLmFtb3VudCA9IHNlcXVlbmNlcy5sZW5ndGg7XG5cblx0XHRcdHNlcXVlbmNlcy5mb3JFYWNoKGZ1bmN0aW9uIChzZXF1ZW5jZSkge1xuXG5cdFx0XHRcdHNlcXVlbmNlLnRoZW4oZnVuY3Rpb24gKGVsZW1lbnQpIHtcblx0XHRcdFx0XHR3YXRjaGVyKGVsZW1lbnQpO1xuXHRcdFx0XHR9KVtcImNhdGNoXCJdKGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0X3RoaXMucmVqZWN0KGUpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0X2NyZWF0ZUNsYXNzKENvbWJvLCBbe1xuXHRcdGtleTogXCJzZXF1ZW5jZVdhdGNoZXJcIixcblxuXHRcdC8qKlxyXG4gICAgKiBAc2VxdWVuY2VXYXRjaGVyIGZ1bmN0aW9uXHJcbiAgICAqXHJcbiAgICAqIEBkZXNjcmlwdGlvbiBDYXB0dXJlcyByZXNvbHZlZCBzZXF1ZW5jZXMgYW5kIHJlc29sdmVzIHdoZW4gYWxsIGhhdmUgYmVlbiByZXNvbHZlZC4gICBcclxuICAqIEByZXR1cm5zIHtSZXNvbHZlZCBQcm9taXNlfVxyXG4gICAgKiBAZ2xvYmFsIG5vXHJcbiAgICAqL1xuXG5cdFx0dmFsdWU6IGZ1bmN0aW9uIHNlcXVlbmNlV2F0Y2hlcigpIHtcblx0XHRcdHZhciBfdGhpczIgPSB0aGlzO1xuXG5cdFx0XHR2YXIgY291bnQgPSAwO1xuXHRcdFx0dmFyIHJldHVybkRhdGEgPSBbXTtcblx0XHRcdHJldHVybiBmdW5jdGlvbiAoZWxlbWVudCkge1xuXG5cdFx0XHRcdGNvdW50Kys7XG5cdFx0XHRcdHJldHVybkRhdGEucHVzaChlbGVtZW50KTtcblx0XHRcdFx0aWYgKGNvdW50ID09PSBfdGhpczIuYW1vdW50KSB7XG5cdFx0XHRcdFx0X3RoaXMyLnJlc29sdmUocmV0dXJuRGF0YSk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fVxuXHR9XSk7XG5cblx0cmV0dXJuIENvbWJvO1xufSkoKTtcblxuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBDb21ibztcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1tcImRlZmF1bHRcIl07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgYXJyMltpXSA9IGFycltpXTsgcmV0dXJuIGFycjI7IH0gZWxzZSB7IHJldHVybiBBcnJheS5mcm9tKGFycik7IH0gfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG4vKipcclxuICAqIEBDc3NVdGlscyBDbGFzc1xyXG4gICpcclxuICAqIEBkZXNjcmlwdGlvbiBDU1MgdXRpbGl0eSBiZWx0IGZvciBBbmltYXRvciB1c2luZyB0aGUgQ1NTT00gKGZpbGU6Ly8vIHByb3RvY29sIG5vdCBzdXBwb3J0ZWQgaW4gQ2hyb21lKSBcclxuICAqIEByZXR1cm5zIHtPYmplY3R9XHJcbiAgKi9cblxudmFyIENzc1V0aWxzID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDc3NVdGlscygpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENzc1V0aWxzKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoQ3NzVXRpbHMsIFt7XG4gICAgICAgIGtleTogXCJjcmVhdGVTdHlsZVNoZWV0XCIsXG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICAqIEBjcmVhdGVTdHlsZVNoZWV0IGZ1bmN0aW9uXHJcbiAgICAgICAgICAqXHJcbiAgICAgICAgICAqIEBkZXNjcmlwdGlvbiBDcmVhdGVzIGEgc3R5bGVzaGVldCBmb3IgYW55IHRyYW5zaXRpb24gLyBhbmltYXRpb24gLyBzdHlsZSBjbGFzc2VzIGNyZWF0ZWQgaW4gQW5pbWF0b3IuXHJcbiAgICAgICAgICAqIEByZXR1cm5zIHtDU1NTdHlsZVNoZWV0fSBzdHlsZXNoZWV0XHJcbiAgICAgICAgICAqIEBnbG9iYWwgbm9cclxuICAgICAgICAgICovXG5cbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVN0eWxlU2hlZXQoKSB7XG5cbiAgICAgICAgICAgIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgICAgICAgICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIpKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICAgICAgICAgICAgcmV0dXJuIHN0eWxlLnNoZWV0O1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiY3NzVGV4dFRvSnNcIixcblxuICAgICAgICAvKipcclxuICAgICAgICAgICogQGNzc1RleHRUb0pzIGZ1bmN0aW9uXHJcbiAgICAgICAgICAqXHJcbiAgICAgICAgICAqIEBwYXJhbXMge1N0cmluZ31cclxuICAgICAgICAgICogQGRlc2NyaXB0aW9uIENvbnZlcnRzIGEgaHlwaGVuIGRlbGltdGVkIENTUyBwcm9wZXJ0eSB0byBhIGNhbWVsIGNhc2VkIEphdmFTY3JpcHQgcHJvcGVydHkuXHJcbiAgICAgICAgICAqIEByZXR1cm5zIHtTdHJpbmd9XHJcbiAgICAgICAgICAqIEBnbG9iYWwgbm9cclxuICAgICAgICAgICovXG5cbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNzc1RleHRUb0pzKGNzc1RleHQpIHtcblxuICAgICAgICAgICAgdmFyIGpzVGV4dCA9IFwiXCI7XG5cbiAgICAgICAgICAgIGlmICgvXFwtL2cudGVzdChjc3NUZXh0KSkge1xuICAgICAgICAgICAgICAgIGNzc1RleHQucmVwbGFjZSgvXFwtL2csIFwiIFwiKS5yZXBsYWNlKC9cXHdcXFMqL2csIGZ1bmN0aW9uICh0eHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdHh0ID0gdHh0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdHh0LnN1YnN0cigxKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqc1RleHQgKz0gdHh0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGpzVGV4dC5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSArIGpzVGV4dC5zdWJzdHIoMSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBjc3NUZXh0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBzdHlsZVByb3AgPSBzdHlsZVByb3AucmVwbGFjZSgvXFwtKFxcdykvZywgZnVuY3Rpb24oc3RyLCBsZXR0ZXIpIHtcbiAgICAgICAgICAgIC8vICAgICByZXR1cm4gbGV0dGVyLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICAvLyB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcInNldFN0eWxlc1wiLFxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAgKiBAc2V0U3R5bGVzIGZ1bmN0aW9uXHJcbiAgICAgICAgICAqXHJcbiAgICAgICAgICAqIEBwYXJhbXMge0hUTUxFbGVtZW50LCBPYmplY3QsIEJvb2xlYW59XHJcbiAgICAgICAgICAqIEBkZXNjcmlwdGlvbiBTZXRzIHByb3BlcnRpZXMgb24gYW4gZWxlbWVudCdzIENTU1N0eWxlRGVjbGFyYXRpb24uXHJcbiAgICAgICAgICAqIEBwYXJhbXMgZGVzY3JpcHRpb24gICAgICBcclxuICAgICAgICAgICogIC0gZWxlbWVudDoge0hUTUxFbGVtZW50fSBIVE1MIGVsZW1lbnQgdG8gc2V0IHN0eWxlcyBwcm9wZXJ0aWVzIG9uLlxyXG4gICAgICAgICAgICAgLSBzdHlsZXMgOiB7T2JqZWN0fSBPYmplY3QgY29udGFpbmluZyBDU1MgcHJvcGVydHkgLyB2YWx1ZSBwYWlycy5cclxuICAgICAgICAgICAgIC0gaW1wb3J0YW50IDogQm9vbGVhbiBzcGVjaWZpeWluZyBpZiB0aGUgQ1NTIHZhbHVlIGlzIHRvIGJlIHNldCBhcyBpbXBvcnRhbnQuIFxyXG4gICAgICAgICAgKiBAZ2xvYmFsIHllc1xyXG4gICAgICAgICAgKi9cblxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0U3R5bGVzKGVsZW1lbnQsIHN0eWxlcywgaW1wb3J0YW50KSB7XG5cbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHN0eWxlcykuZm9yRWFjaChmdW5jdGlvbiAocHJvcGVydHkpIHtcbiAgICAgICAgICAgICAgICB2YXIgaW1wb3J0YW50ID0gaW1wb3J0YW50IHx8IHN0eWxlc1twcm9wZXJ0eV0uaW5jbHVkZXMoXCJpbXBvcnRhbnRcIikgPyBcImltcG9ydGFudFwiIDogbnVsbDtcbiAgICAgICAgICAgICAgICB2YXIgcnVsZXMgPSBzdHlsZXNbcHJvcGVydHldLnJlcGxhY2UoLyE/aW1wb3J0YW50LywgXCJcIikudHJpbSgpO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkocHJvcGVydHksIHJ1bGVzLCBpbXBvcnRhbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJnZXRTdHlsZXNcIixcblxuICAgICAgICAvKipcclxuICAgICAgICAgICogQGdldFN0eWxlcyBmdW5jdGlvblxyXG4gICAgICAgICAgKlxyXG4gICAgICAgICAgKiBAcGFyYW1zIHtIVE1MRWxlbWVudCwgU3RyaW5nIC8gQXJyYXl9XHJcbiAgICAgICAgICAqIEBkZXNjcmlwdGlvbiBRdWVyaWVzIHByb3BlcnRpZXMgc2V0IG9uIGFuIGVsZW1lbnQncyBDU1NTdHlsZURlY2xhcmF0aW9uLlxyXG4gICAgICAgICAgKiBAcGFyYW1zIGRlc2NyaXB0aW9uICAgICAgXHJcbiAgICAgICAgICAqICAtIGVsZW1lbnQ6IHtIVE1MRWxlbWVudH0gSFRNTCBlbGVtZW50IHRvIHF1ZXJ5IGFnYWludHMgaXRzIHN0eWxlIHByb3BlcnRpZXMuXHJcbiAgICAgICAgICAgICAtIHByb3BzIDoge1N0cmluZyAvIEFycmF5fSBTdHJpbmcgb3IgQXJyYXkgb2Ygc3RyaW5ncyBvZiBDU1MgcHJvcGVydGllcyB0byBxdWVyeS5cclxuICAgICAgICAgICogQHJldHVybnMge09iamVjdH0gT2JqZWN0IG9mIENTUyBwcm9wZXJ0eSAvIHZhbHVlIHBhaXJzXHJcbiAgICAgICAgICAqIEBnbG9iYWwgeWVzXHJcbiAgICAgICAgICAqL1xuXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTdHlsZXMoZWxlbWVudCwgcHJvcHMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciBwcm9wZXJ0aWVzID0gQXJyYXkuaXNBcnJheShwcm9wcykgPyBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHByb3BzKSkgOiBbcHJvcHNdO1xuICAgICAgICAgICAgdmFyIHN0eWxlcyA9IHt9LFxuICAgICAgICAgICAgICAgIHRlbXAgPSB7fTtcbiAgICAgICAgICAgIHByb3BlcnRpZXMuZm9yRWFjaChmdW5jdGlvbiAocHJvcGVydHkpIHtcbiAgICAgICAgICAgICAgICB0ZW1wW3Byb3BlcnR5XSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLmdldFByb3BlcnR5VmFsdWUocHJvcGVydHkpO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUucmVtb3ZlUHJvcGVydHkocHJvcGVydHkpO1xuICAgICAgICAgICAgICAgIHN0eWxlc1twcm9wZXJ0eV0gPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KS5nZXRQcm9wZXJ0eVZhbHVlKHByb3BlcnR5KTtcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdHlsZXMoZWxlbWVudCwgdGVtcCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBzdHlsZXM7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJjcmVhdGVUcmFuc2l0aW9uXCIsXG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICAqIEBjcmVhdGVUcmFuc2l0aW9uIGZ1bmN0aW9uXHJcbiAgICAgICAgICAqXHJcbiAgICAgICAgICAqIEBwYXJhbXMge09iamVjdCwgQ2xhc3N9XHJcbiAgICAgICAgICAqIEBkZXNjcmlwdGlvbiBDcmVhdGVzIGEgc3RyaW5nIGRlZmluaW5nIGFuIGVsZW1lbnQncyBDU1MgdHJhbnNpdGlvbiB2YWx1ZXMgYW5kIHNldHMgaXQgb24gdGhlIGVsZW1lbnQncyBDU1NTdHlsZURlY2xhcmF0aW9uLiBcclxuICAgICAgICAgICogQHBhcmFtcyBkZXNjcmlwdGlvbiAgICAgIFxyXG4gICAgICAgICAgKiAgLSB0cmFuc2l0aW9uOiB7T2JqZWN0fSBBbiBvYmplY3Qgb2YgdHJhbnNpdGlvbiBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAgICAgICAgIC0gZWxlbWVudHMge0hUTUxFbGVtZW50IC8gTm9kZWxpc3R9IEhUTUxFbGVtZW50KHMpIHRvIHNldCB0cmFuc2l0aW9uIG9uLlxyXG4gICAgICAgICAgICAgICAgIC0gcHJvcGVydGllcyB7U3RyaW5nIC8gQXJyYXl9IENTUyBwcm9wZXJ0aWVzIHRvIHRyYW5zaXRpb24uXHJcbiAgICAgICAgICAgICAgICAgLSBkdXJhdGlvbiB7U3RyaW5nIC8gQXJyYXl9IE1zIG9yIFMgdHJhbnNpdGlvbiBkdXJhdGlvbiB2YWx1ZShzKS5cclxuICAgICAgICAgICAgICAgICAtIGVhc2luZyB7U3RyaW5nIC8gQXJyYXl9IChPcHRpb25hbCkgVHJhbnNpdGlvbiB0aW1pbmcgZnVuY3Rpb24gdmFsdWUocykuXHJcbiAgICAgICAgICAgICAgICAgLSBkZWxheSB7U3RyaW5nIC8gQXJyYXl9IChPcHRpb25hbCkgVHJhbnNpdGlvbiBkZWxheSB2YWx1ZShzKS5cclxuICAgICAgICAgICAgIC0gUHJlZml4IDoge0NsYXNzfSBQcmVmaXggY2xhc3MuXHJcbiAgICAgICAgICAqIEBnbG9iYWwgeWVzXHJcbiAgICAgICAgICAqL1xuXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVUcmFuc2l0aW9uKHRyYW5zaXRpb24sIFByZWZpeCkge1xuICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciB0cmFuc2l0aW9uUHJlZml4ID0gbmV3IFByZWZpeCgpLmdldFByZWZpeChcInRyYW5zaXRpb25cIik7XG4gICAgICAgICAgICB2YXIgZWxlbWVudHMgPSB0cmFuc2l0aW9uLmVsZW1lbnQubGVuZ3RoID8gQXJyYXkuZnJvbSh0cmFuc2l0aW9uLmVsZW1lbnQpIDogW3RyYW5zaXRpb24uZWxlbWVudF07XG4gICAgICAgICAgICB2YXIgcHJvcGVydGllcyA9IEFycmF5LmlzQXJyYXkodHJhbnNpdGlvbi5wcm9wZXJ0aWVzKSA/IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodHJhbnNpdGlvbi5wcm9wZXJ0aWVzKSkgOiBbdHJhbnNpdGlvbi5wcm9wZXJ0aWVzXTtcbiAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9IEFycmF5LmlzQXJyYXkodHJhbnNpdGlvbi5kdXJhdGlvbikgPyBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHRyYW5zaXRpb24uZHVyYXRpb24pKSA6IFt0cmFuc2l0aW9uLmR1cmF0aW9uXTtcbiAgICAgICAgICAgIHZhciBlYXNpbmcgPSBBcnJheS5pc0FycmF5KHRyYW5zaXRpb24uZWFzaW5nKSA/IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodHJhbnNpdGlvbi5lYXNpbmcpKSA6IFt0cmFuc2l0aW9uLmVhc2luZ107XG4gICAgICAgICAgICB2YXIgZGVsYXkgPSBBcnJheS5pc0FycmF5KHRyYW5zaXRpb24uZGVsYXkpID8gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh0cmFuc2l0aW9uLmRlbGF5KSkgOiBbdHJhbnNpdGlvbi5kZWxheV07XG5cbiAgICAgICAgICAgIGVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcblxuICAgICAgICAgICAgICAgIHZhciB0cmFuc2l0aW9uU3RyaW5nID0gXCJcIjtcbiAgICAgICAgICAgICAgICB2YXIgcnVsZXMgPSB7fTtcblxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXMuZm9yRWFjaChmdW5jdGlvbiAocHJvcCwgaSkge1xuXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb25TdHJpbmcgKz0gXCIgXCI7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb25TdHJpbmcgKz0gcHJvcGVydGllcy5sZW5ndGggPiAxID8gcHJvcGVydGllc1tpXSArIFwiIFwiIDogcHJvcGVydGllc1swXSArIFwiIFwiO1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uU3RyaW5nICs9IGR1cmF0aW9uLmxlbmd0aCA+IDEgPyBkdXJhdGlvbltpXSArIFwiIFwiIDogZHVyYXRpb25bMF0gKyBcIiBcIjtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvblN0cmluZyArPSBlYXNpbmcubGVuZ3RoID4gMSA/IGVhc2luZ1tpXSArIFwiIFwiIDogKGVhc2luZ1swXSB8fCBcImVhc2VcIikgKyBcIiBcIjtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvblN0cmluZyArPSBkZWxheS5sZW5ndGggPiAxID8gZGVsYXlbaV0gKyBcIixcIiA6IChkZWxheVswXSB8fCBcIjBzXCIpICsgXCIsXCI7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uU3RyaW5nID0gdHJhbnNpdGlvblN0cmluZy5zdWJzdHIoMCwgdHJhbnNpdGlvblN0cmluZy5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgICAgICBydWxlc1t0cmFuc2l0aW9uUHJlZml4XSA9IHRyYW5zaXRpb25TdHJpbmc7XG4gICAgICAgICAgICAgICAgX3RoaXMyLnNldFN0eWxlcyhlbGVtZW50LCBydWxlcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImNyZWF0ZUtleWZyYW1lQW5pbWF0aW9uXCIsXG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICAqIEBjcmVhdGVLZXlmcmFtZUFuaW1hdGlvbiBmdW5jdGlvblxyXG4gICAgICAgICAgKlxyXG4gICAgICAgICAgKiBAcGFyYW1zIHtPYmplY3QsIENsYXNzLCBDU1NTdHlsZVNoZWV0fVxyXG4gICAgICAgICAgKiBAZGVzY3JpcHRpb24gQ3JlYXRlcyBhIENTUyBrZXlmcmFtZSBhbmltYXRpb24sIGFuZCBvcHRpb25hbCBhc3NvY2lhdGVkIHN0eWxlIGNsYXNzLCBhbmQgaW5zZXJ0cyBpdC90aGVtIGludG8gQW5pbWF0b3IncyBzdHlsZXNoZWV0LiBcclxuICAgICAgICAgICogQHBhcmFtcyBkZXNjcmlwdGlvbiAgICAgIFxyXG4gICAgICAgICAgKiAgLSBhbmltYXRpb246IHtPYmplY3R9IEFuIG9iamVjdCBvZiBhbmltYXRpb24gcHJvcGVydGllcy5cclxuICAgICAgICAgICAgICAgICAtIG5hbWUge0hUTUxFbGVtZW50IC8gTm9kZWxpc3R9IEhUTUxFbGVtZW50KHMpIHRvIHNldCB0cmFuc2l0aW9uIG9uLlxyXG4gICAgICAgICAgICAgICAgIC0gYW5pbWF0aW9uIHtPYmplY3R9IEVpdGhlciBmcm9tIC8gdG8gb3IgJSBiYXNlZCBrZXlmcmFtZXMgYW5kIENTUyBwcm9wZXJ0aWVzIC8gdmFsdWVzLlxyXG4gICAgICAgICAgICAgICAgIC0gYW5pbWF0aW9uQ2xhc3Mge09iamVjdH0gKE9wdGlvbmFsKSBBIENTUyBjbGFzcyB0byB0cmlnZ2VyIHRoZSBhbmltYXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgIC0gbmFtZSB7U3RyaW5nfSBUaGUgY2xhc3NuYW1lLlxyXG4gICAgICAgICAgICAgICAgICAgICAtIHJ1bGVzIHtPYmplY3R9IE9iamVjdCBvZiBDU1MgcHJvcGVydHkgLyB2YWx1ZSBwYWlycy5cclxuICAgICAgICAgICAgIC0gUHJlZml4IDoge0NsYXNzfSBQcmVmaXggY2xhc3MuXHJcbiAgICAgICAgICAgICAtIHN0eWxlc2hlZXQgOiB7Q1NTU3R5bGVTaGVldH0gQW5pbWF0b3IncyBzdHlsZXNoZWV0LlxyXG4gICAgICAgICAgKiBAZ2xvYmFsIHllc1xyXG4gICAgICAgICAgKi9cblxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlS2V5ZnJhbWVBbmltYXRpb24oYW5pbWF0aW9uLCBQcmVmaXgsIHN0eWxlc2hlZXQpIHtcblxuICAgICAgICAgICAgdmFyIGFuaW1hdGlvblN0cmluZyA9IFwiXCI7XG4gICAgICAgICAgICB2YXIgcHJlZml4ID0gbmV3IFByZWZpeCgpO1xuICAgICAgICAgICAgdmFyIGtleUZyYW1lID0gcHJlZml4LmdldFByZWZpeChcImtleWZyYW1lc1wiKTtcbiAgICAgICAgICAgIGtleUZyYW1lICs9IFwiIFwiICsgYW5pbWF0aW9uLm5hbWUgKyBcIiB7XFxuXCI7XG5cbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGFuaW1hdGlvbi5hbmltYXRpb24pLmZvckVhY2goZnVuY3Rpb24gKGFuaW0pIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb25TdHJpbmcgKz0gYW5pbSArIFwiIHtcIjtcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhhbmltYXRpb24uYW5pbWF0aW9uW2FuaW1dKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25TdHJpbmcgKz0gXCJcXG5cIiArIHByb3BlcnR5ICsgXCIgOiBcIiArIGFuaW1hdGlvbi5hbmltYXRpb25bYW5pbV1bcHJvcGVydHldICsgXCI7XCI7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uU3RyaW5nICs9IFwiXFxuIH1cXG5cIjtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBhbmltYXRpb25TdHJpbmcgKz0gXCJ9XCI7XG5cbiAgICAgICAgICAgIHN0eWxlc2hlZXQuaW5zZXJ0UnVsZShrZXlGcmFtZSArIGFuaW1hdGlvblN0cmluZywgc3R5bGVzaGVldC5jc3NSdWxlcy5sZW5ndGgpO1xuICAgICAgICAgICAgaWYgKGFuaW1hdGlvbi5hbmltYXRpb25DbGFzcykge1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlQ2xhc3MoYW5pbWF0aW9uLmFuaW1hdGlvbkNsYXNzLm5hbWUsIHN0eWxlc2hlZXQsIGFuaW1hdGlvbi5hbmltYXRpb25DbGFzcy5ydWxlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJjcmVhdGVDbGFzc1wiLFxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAgKiBAY3JlYXRlQ2xhc3MgZnVuY3Rpb25cclxuICAgICAgICAgICpcclxuICAgICAgICAgICogQHBhcmFtcyB7U3RyaW5nLCBDU1NTdHlsZVNoZWV0LCBPYmplY3QgKE9wdGlvbmFsKX1cclxuICAgICAgICAgICogQGRlc2NyaXB0aW9uIERlZmluZXMgYSBDU1MgY2xhc3MgYW5kIGluc2VydHMgaXQgaW50byBBbmltYXRvcidzIHN0eWxlc2hlZXQuIFxyXG4gICAgICAgICAgKiBAcGFyYW1zIGRlc2NyaXB0aW9uICAgICAgXHJcbiAgICAgICAgICAqICAtIGNsYXNzTmFtZToge1N0cmluZ30gVGhlIG5hbWUgb2YgdGhlIGNsYXNzLlxyXG4gICAgICAgICAgICAgLSBzdHlsZXNoZWV0IDoge0NTU1N0eWxlU2hlZXR9IEFuaW1hdG9yJ3Mgc3R5bGVzaGVldC5cclxuICAgICAgICAgICAgIC0gcnVsZXMgOiB7T2JqZWN0fSAoT3B0aW9uYWwpIE9iamVjdCBvZiBDU1MgcHJvcGVydHkgLyB2YWx1ZSBwYWlycy5cclxuICAgICAgICAgICogQGdsb2JhbCB5ZXNcclxuICAgICAgICAgICovXG5cbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUNsYXNzKGNsYXNzTmFtZSwgc3R5bGVzaGVldCkge1xuICAgICAgICAgICAgdmFyIHJ1bGVzID0gYXJndW1lbnRzWzJdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1syXTtcblxuICAgICAgICAgICAgdmFyIG5hbWUgPSBcIi5cIiArIGNsYXNzTmFtZTtcbiAgICAgICAgICAgIHZhciBjc3NTdHJpbmcgPSBcInsgXCI7XG5cbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHJ1bGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChydWxlKSB7XG4gICAgICAgICAgICAgICAgY3NzU3RyaW5nICs9IHJ1bGUgKyBcIiA6IFwiICsgcnVsZXNbcnVsZV0gKyBcIjsgXCI7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY3NzU3RyaW5nICs9IFwifVwiO1xuICAgICAgICAgICAgc3R5bGVzaGVldC5pbnNlcnRSdWxlKG5hbWUgKyBjc3NTdHJpbmcsIHN0eWxlc2hlZXQuY3NzUnVsZXMubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImRlbGV0ZUNsYXNzXCIsXG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICAqIEBkZWxldGVDbGFzcyBmdW5jdGlvblxyXG4gICAgICAgICAgKlxyXG4gICAgICAgICAgKiBAcGFyYW1zIHtTdHJpbmcsIENTU1N0eWxlU2hlZXR9XHJcbiAgICAgICAgICAqIEBkZXNjcmlwdGlvbiBSZW1vdmVzIGEgQ1NTIGNsYXNzIGZyb20gQW5pbWF0b3IncyBzdHlsZXNoZWV0LiBcclxuICAgICAgICAgICogQHBhcmFtcyBkZXNjcmlwdGlvbiAgICAgIFxyXG4gICAgICAgICAgKiAgLSBjbGFzc05hbWU6IHtTdHJpbmd9IFRoZSBuYW1lIG9mIHRoZSBjbGFzcyB0byByZW1vdmUuXHJcbiAgICAgICAgICAgICAtIHN0eWxlc2hlZXQgOiB7Q1NTU3R5bGVTaGVldH0gQW5pbWF0b3IncyBzdHlsZXNoZWV0LlxyXG4gICAgICAgICAgKiBAZ2xvYmFsIHllc1xyXG4gICAgICAgICAgKi9cblxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVsZXRlQ2xhc3MoY2xhc3NOYW1lLCBzdHlsZXNoZWV0KSB7XG5cbiAgICAgICAgICAgIHZhciBydWxlcyA9IHN0eWxlc2hlZXQucnVsZXMgfHwgc3R5bGVzaGVldC5jc3NSdWxlcztcbiAgICAgICAgICAgIHZhciBuYW1lID0gXCIuXCIgKyBjbGFzc05hbWU7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhydWxlcykuZm9yRWFjaChmdW5jdGlvbiAocnVsZSkge1xuICAgICAgICAgICAgICAgIGlmIChydWxlc1tydWxlXSBpbnN0YW5jZW9mIENTU1N0eWxlUnVsZSAmJiBydWxlc1tydWxlXS5zZWxlY3RvclRleHQgPT09IG5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVzaGVldC5kZWxldGVSdWxlKHJ1bGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIENzc1V0aWxzO1xufSkoKTtcblxuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBDc3NVdGlscztcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1tcImRlZmF1bHRcIl07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHR2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIGFycjJbaV0gPSBhcnJbaV07IHJldHVybiBhcnIyOyB9IGVsc2UgeyByZXR1cm4gQXJyYXkuZnJvbShhcnIpOyB9IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuLyoqXHJcbiAgKiBARG9tVXRpbHMgQ2xhc3NcclxuICAqXHJcbiAgKiBAZGVzY3JpcHRpb24gUHJvdmlkZXMgRE9NIHV0aWxpdGllcyBmb3IgQW5pbWF0b3IuXHJcbiAgKiBAcmV0dXJucyB7T2JqZWN0fVxyXG4gICovXG5cbnZhciBEb21VdGlscyA9IChmdW5jdGlvbiAoKSB7XG5cdGZ1bmN0aW9uIERvbVV0aWxzKCkge1xuXHRcdF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEb21VdGlscyk7XG5cdH1cblxuXHRfY3JlYXRlQ2xhc3MoRG9tVXRpbHMsIFt7XG5cdFx0a2V5OiBcInNldENsYXNzXCIsXG5cblx0XHQvKipcclxuICAgICogQHNldENsYXNzIGZ1bmN0aW9uXHJcbiAgICAqXHJcbiAgICAqIEBwYXJhbXMge0hUTUxFbGVtZW50LCBTdHJpbmcgLyBBcnJheSwgQm9vbGVhbn1cclxuICAgICogQGRlc2NyaXB0aW9uIEFkZHMgb3IgcmVtb3ZlcyBjbGFzcyhlcykgZnJvbSBhbiBlbGVtZW50LlxyXG4gICAgKiBAcGFyYW1zIGRlc2NyaXB0aW9uICAgICAgXHJcbiAgICAqICAtIGVsZW1lbnQ6IHtIVE1MRWxlbWVudH0gVGhlIGVsZW1lbnQgdG8gYWRkIC8gcmVtb3ZlIHRoZSBjbGFzcyhlcykgdG8gLyBmcm9tLlxyXG4gICAgKiAgLSBjbGFzc0xpc3Q6IHtTdHJpbmcgLyBBcnJheX0gQSBzaW5nbGUgY2xhc3NuYW1lIG9yIGFycmF5IG9mIGNsYXNzbmFtZXMgdG8gYWRkIC8gcmVtb3ZlLlxyXG4gICAgKlx0LSBhZGQ6IHtCb29sZWFufSBTcGVjaWZpeWluZyB3aGV0aGVyIHRvIGFkZCAvIHJlbW92ZSB0aGUgY2xhc3MoZXMpLlxyXG4gICAgKiBAZ2xvYmFsIHllc1xyXG4gICAgKi9cblxuXHRcdHZhbHVlOiBmdW5jdGlvbiBzZXRDbGFzcyhlbGVtZW50LCBjbGFzc0xpc3QsIGFkZCkge1xuXG5cdFx0XHR2YXIgY2xhc3NlcyA9IEFycmF5LmlzQXJyYXkoY2xhc3NMaXN0KSA/IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoY2xhc3NMaXN0KSkgOiBbY2xhc3NMaXN0XTtcblx0XHRcdHZhciBlbGVtZW50cyA9IGVsZW1lbnQubGVuZ3RoID8gQXJyYXkuZnJvbShlbGVtZW50KSA6IFtlbGVtZW50XTtcblx0XHRcdHZhciBhY3Rpb24gPSBhZGQgPyBcImFkZFwiIDogXCJyZW1vdmVcIjtcblx0XHRcdGNsYXNzZXMuZm9yRWFjaChmdW5jdGlvbiAoY2xzKSB7XG5cdFx0XHRcdGVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG5cdFx0XHRcdFx0ZWwuY2xhc3NMaXN0W2FjdGlvbl0oY2xzKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH0sIHtcblx0XHRrZXk6IFwic3VwcG9ydFwiLFxuXG5cdFx0LyoqXHJcbiAgICAqIEBzdXBwb3J0IGZ1bmN0aW9uXHJcbiAgICAqXHJcbiAgICAqIEBwYXJhbXMge0NsYXNzLCBDbGFzcywgQ1NTU3R5bGVTaGVldH1cclxuICAgICogQGRlc2NyaXB0aW9uIFRlc3RzIGZvciBDU1MgdHJhbnNpdGlvbiAvIGFuaW1hdGlvbiAvIENTU09NIG1hbmlwdWxhdGlvbiBzdXBwb3J0XHJcbiAgICAqIEBwYXJhbXMgZGVzY3JpcHRpb24gICAgICBcclxuICAgICogIC0gUHJlZml4OiB7Q2xhc3N9IFByZWZpeCBjbGFzcy5cclxuICAgICogIC0gQ3NzVXRpbHM6IHtDbGFzc30gQ1NTIHV0aWxpdGllcyBjbGFzcy5cclxuICAgICpcdC0gc3R5bGVzaGVldDoge0NTU1N0eWxlU2hlZXR9IFN0eWxlc2hlZXQgdG8gdGVzdCBpbnNlcnRpbmcgLyByZW1vdmluZyBzdHlsZSBydWxlcyBvbi5cclxuICAgICogQGdsb2JhbCB5ZXNcclxuICAgICovXG5cblx0XHR2YWx1ZTogZnVuY3Rpb24gc3VwcG9ydChQcmVmaXgsIENzc1V0aWxzLCBzdHlsZXNoZWV0KSB7XG5cblx0XHRcdHZhciBwcmVmaXggPSBuZXcgUHJlZml4KCk7XG5cdFx0XHR2YXIgY3NzVXRpbHMgPSBuZXcgQ3NzVXRpbHMoKTtcblx0XHRcdHZhciBjc3NvbVN1cHBvcnQgPSBmYWxzZTtcblx0XHRcdHZhciB0cmFuc2l0aW9uU3VwcG9ydCA9IHByZWZpeC5nZXRQcmVmaXgoXCJ0cmFuc2l0aW9uXCIpO1xuXHRcdFx0dmFyIGFuaW1hdGlvblN1cHBvcnQgPSBwcmVmaXguZ2V0UHJlZml4KFwiYW5pbWF0aW9uXCIpO1xuXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjc3NVdGlscy5jcmVhdGVDbGFzcyhcIkFuaW1hdG9yVGVzdENsYXNzXCIsIHN0eWxlc2hlZXQpO1xuXHRcdFx0XHRjc3NVdGlscy5kZWxldGVDbGFzcyhcIkFuaW1hdG9yVGVzdENsYXNzXCIsIHN0eWxlc2hlZXQpO1xuXHRcdFx0XHRjc3NvbVN1cHBvcnQgPSB0cnVlO1xuXHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRjc3NvbVN1cHBvcnQgPSBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHRyYW5zaXRpb25TdXBwb3J0ICYmIGFuaW1hdGlvblN1cHBvcnQgJiYgY3Nzb21TdXBwb3J0O1xuXHRcdH1cblx0fV0pO1xuXG5cdHJldHVybiBEb21VdGlscztcbn0pKCk7XG5cbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gRG9tVXRpbHM7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbXCJkZWZhdWx0XCJdOyIsIi8qIVxuICogQG92ZXJ2aWV3IGVzNi1wcm9taXNlIC0gYSB0aW55IGltcGxlbWVudGF0aW9uIG9mIFByb21pc2VzL0ErLlxuICogQGNvcHlyaWdodCBDb3B5cmlnaHQgKGMpIDIwMTQgWWVodWRhIEthdHosIFRvbSBEYWxlLCBTdGVmYW4gUGVubmVyIGFuZCBjb250cmlidXRvcnMgKENvbnZlcnNpb24gdG8gRVM2IEFQSSBieSBKYWtlIEFyY2hpYmFsZClcbiAqIEBsaWNlbnNlICAgTGljZW5zZWQgdW5kZXIgTUlUIGxpY2Vuc2VcbiAqICAgICAgICAgICAgU2VlIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9qYWtlYXJjaGliYWxkL2VzNi1wcm9taXNlL21hc3Rlci9MSUNFTlNFXG4gKiBAdmVyc2lvbiAgIDIuMS4xXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkb2JqZWN0T3JGdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nIHx8IHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJiB4ICE9PSBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc0Z1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbic7XG4gIH1cblxuICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzTWF5YmVUaGVuYWJsZSh4KSB7XG4gICAgcmV0dXJuIHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJiB4ICE9PSBudWxsO1xuICB9XG5cbiAgdmFyIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkX2lzQXJyYXk7XG4gIGlmICghQXJyYXkuaXNBcnJheSkge1xuICAgIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkX2lzQXJyYXkgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4KSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkX2lzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuICB9XG5cbiAgdmFyIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNBcnJheSA9IGxpYiRlczYkcHJvbWlzZSR1dGlscyQkX2lzQXJyYXk7XG4gIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkbGVuID0gMDtcbiAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR0b1N0cmluZyA9ICh7fSkudG9TdHJpbmc7XG4gIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkdmVydHhOZXh0O1xuICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcChjYWxsYmFjaywgYXJnKSB7XG4gICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2xpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW5dID0gY2FsbGJhY2s7XG4gICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2xpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW4gKyAxXSA9IGFyZztcbiAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkbGVuICs9IDI7XG4gICAgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW4gPT09IDIpIHtcbiAgICAgIC8vIElmIGxlbiBpcyAyLCB0aGF0IG1lYW5zIHRoYXQgd2UgbmVlZCB0byBzY2hlZHVsZSBhbiBhc3luYyBmbHVzaC5cbiAgICAgIC8vIElmIGFkZGl0aW9uYWwgY2FsbGJhY2tzIGFyZSBxdWV1ZWQgYmVmb3JlIHRoZSBxdWV1ZSBpcyBmbHVzaGVkLCB0aGV5XG4gICAgICAvLyB3aWxsIGJlIHByb2Nlc3NlZCBieSB0aGlzIGZsdXNoIHRoYXQgd2UgYXJlIHNjaGVkdWxpbmcuXG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaCgpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwO1xuXG4gIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3NlcldpbmRvdyA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdW5kZWZpbmVkO1xuICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGJyb3dzZXJHbG9iYWwgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3NlcldpbmRvdyB8fCB7fTtcbiAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRCcm93c2VyTXV0YXRpb25PYnNlcnZlciA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyR2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgbGliJGVzNiRwcm9taXNlJGFzYXAkJGJyb3dzZXJHbG9iYWwuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjtcbiAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRpc05vZGUgPSB0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgKHt9KS50b1N0cmluZy5jYWxsKHByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXSc7XG5cbiAgLy8gdGVzdCBmb3Igd2ViIHdvcmtlciBidXQgbm90IGluIElFMTBcbiAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRpc1dvcmtlciA9IHR5cGVvZiBVaW50OENsYW1wZWRBcnJheSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGltcG9ydFNjcmlwdHMgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCAhPT0gJ3VuZGVmaW5lZCc7XG5cbiAgLy8gbm9kZVxuICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlTmV4dFRpY2soKSB7XG4gICAgdmFyIG5leHRUaWNrID0gcHJvY2Vzcy5uZXh0VGljaztcbiAgICAvLyBub2RlIHZlcnNpb24gMC4xMC54IGRpc3BsYXlzIGEgZGVwcmVjYXRpb24gd2FybmluZyB3aGVuIG5leHRUaWNrIGlzIHVzZWQgcmVjdXJzaXZlbHlcbiAgICAvLyBzZXRJbW1lZGlhdGUgc2hvdWxkIGJlIHVzZWQgaW5zdGVhZCBpbnN0ZWFkXG4gICAgdmFyIHZlcnNpb24gPSBwcm9jZXNzLnZlcnNpb25zLm5vZGUubWF0Y2goL14oPzooXFxkKylcXC4pPyg/OihcXGQrKVxcLik/KFxcKnxcXGQrKSQvKTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2ZXJzaW9uKSAmJiB2ZXJzaW9uWzFdID09PSAnMCcgJiYgdmVyc2lvblsyXSA9PT0gJzEwJykge1xuICAgICAgbmV4dFRpY2sgPSBzZXRJbW1lZGlhdGU7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBuZXh0VGljayhsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2gpO1xuICAgIH07XG4gIH1cblxuICAvLyB2ZXJ0eFxuICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlVmVydHhUaW1lcigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHZlcnR4TmV4dChsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2gpO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlTXV0YXRpb25PYnNlcnZlcigpIHtcbiAgICB2YXIgaXRlcmF0aW9ucyA9IDA7XG4gICAgdmFyIG9ic2VydmVyID0gbmV3IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRCcm93c2VyTXV0YXRpb25PYnNlcnZlcihsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2gpO1xuICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpO1xuICAgIG9ic2VydmVyLm9ic2VydmUobm9kZSwgeyBjaGFyYWN0ZXJEYXRhOiB0cnVlIH0pO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIG5vZGUuZGF0YSA9IGl0ZXJhdGlvbnMgPSArK2l0ZXJhdGlvbnMgJSAyO1xuICAgIH07XG4gIH1cblxuICAvLyB3ZWIgd29ya2VyXG4gIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VNZXNzYWdlQ2hhbm5lbCgpIHtcbiAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKDApO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlU2V0VGltZW91dCgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgc2V0VGltZW91dChsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2gsIDEpO1xuICAgIH07XG4gIH1cblxuICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlID0gbmV3IEFycmF5KDEwMDApO1xuICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2goKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaWIkZXM2JHByb21pc2UkYXNhcCQkbGVuOyBpICs9IDIpIHtcbiAgICAgIHZhciBjYWxsYmFjayA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZVtpXTtcbiAgICAgIHZhciBhcmcgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbaSArIDFdO1xuXG4gICAgICBjYWxsYmFjayhhcmcpO1xuXG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbaV0gPSB1bmRlZmluZWQ7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbaSArIDFdID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW4gPSAwO1xuICB9XG5cbiAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJGF0dGVtcHRWZXJ0ZXgoKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciByID0gcmVxdWlyZTtcbiAgICAgIHZhciB2ZXJ0eCA9IHIoJ3ZlcnR4Jyk7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkdmVydHhOZXh0ID0gdmVydHgucnVuT25Mb29wIHx8IHZlcnR4LnJ1bk9uQ29udGV4dDtcbiAgICAgIHJldHVybiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlVmVydHhUaW1lcigpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlU2V0VGltZW91dCgpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaDtcbiAgLy8gRGVjaWRlIHdoYXQgYXN5bmMgbWV0aG9kIHRvIHVzZSB0byB0cmlnZ2VyaW5nIHByb2Nlc3Npbmcgb2YgcXVldWVkIGNhbGxiYWNrczpcbiAgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRpc05vZGUpIHtcbiAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VOZXh0VGljaygpO1xuICB9IGVsc2UgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRCcm93c2VyTXV0YXRpb25PYnNlcnZlcikge1xuICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU11dGF0aW9uT2JzZXJ2ZXIoKTtcbiAgfSBlbHNlIGlmIChsaWIkZXM2JHByb21pc2UkYXNhcCQkaXNXb3JrZXIpIHtcbiAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VNZXNzYWdlQ2hhbm5lbCgpO1xuICB9IGVsc2UgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyV2luZG93ID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIHJlcXVpcmUgPT09ICdmdW5jdGlvbicpIHtcbiAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhdHRlbXB0VmVydGV4KCk7XG4gIH0gZWxzZSB7XG4gICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2ggPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlU2V0VGltZW91dCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCgpIHt9XG5cbiAgdmFyIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcgPSB2b2lkIDA7XG4gIHZhciBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRUQgPSAxO1xuICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQgPSAyO1xuXG4gIHZhciBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUiA9IG5ldyBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRFcnJvck9iamVjdCgpO1xuXG4gIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHNlbGZGdWxsZmlsbG1lbnQoKSB7XG4gICAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoJ1lvdSBjYW5ub3QgcmVzb2x2ZSBhIHByb21pc2Ugd2l0aCBpdHNlbGYnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGNhbm5vdFJldHVybk93bigpIHtcbiAgICByZXR1cm4gbmV3IFR5cGVFcnJvcignQSBwcm9taXNlcyBjYWxsYmFjayBjYW5ub3QgcmV0dXJuIHRoYXQgc2FtZSBwcm9taXNlLicpO1xuICB9XG5cbiAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZ2V0VGhlbihwcm9taXNlKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBwcm9taXNlLnRoZW47XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEdFVF9USEVOX0VSUk9SLmVycm9yID0gZXJyb3I7XG4gICAgICByZXR1cm4gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkR0VUX1RIRU5fRVJST1I7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkdHJ5VGhlbih0aGVuLCB2YWx1ZSwgZnVsZmlsbG1lbnRIYW5kbGVyLCByZWplY3Rpb25IYW5kbGVyKSB7XG4gICAgdHJ5IHtcbiAgICAgIHRoZW4uY2FsbCh2YWx1ZSwgZnVsZmlsbG1lbnRIYW5kbGVyLCByZWplY3Rpb25IYW5kbGVyKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gZTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUsIHRoZW4pIHtcbiAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkZGVmYXVsdChmdW5jdGlvbiAocHJvbWlzZSkge1xuICAgICAgdmFyIHNlYWxlZCA9IGZhbHNlO1xuICAgICAgdmFyIGVycm9yID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkdHJ5VGhlbih0aGVuLCB0aGVuYWJsZSwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmIChzZWFsZWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2VhbGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoZW5hYmxlICE9PSB2YWx1ZSkge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIGlmIChzZWFsZWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2VhbGVkID0gdHJ1ZTtcblxuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICAgIH0sICdTZXR0bGU6ICcgKyAocHJvbWlzZS5fbGFiZWwgfHwgJyB1bmtub3duIHByb21pc2UnKSk7XG5cbiAgICAgIGlmICghc2VhbGVkICYmIGVycm9yKSB7XG4gICAgICAgIHNlYWxlZCA9IHRydWU7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBlcnJvcik7XG4gICAgICB9XG4gICAgfSwgcHJvbWlzZSk7XG4gIH1cblxuICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSkge1xuICAgIGlmICh0aGVuYWJsZS5fc3RhdGUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRCkge1xuICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcbiAgICB9IGVsc2UgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQpIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc3Vic2NyaWJlKHRoZW5hYmxlLCB1bmRlZmluZWQsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUpIHtcbiAgICBpZiAobWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3RvciA9PT0gcHJvbWlzZS5jb25zdHJ1Y3Rvcikge1xuICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciB0aGVuID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZ2V0VGhlbihtYXliZVRoZW5hYmxlKTtcblxuICAgICAgaWYgKHRoZW4gPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEdFVF9USEVOX0VSUk9SKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUi5lcnJvcik7XG4gICAgICB9IGVsc2UgaWYgKHRoZW4gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICAgICAgfSBlbHNlIGlmIChsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzRnVuY3Rpb24odGhlbikpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlRm9yZWlnblRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUsIHRoZW4pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIHZhbHVlKSB7XG4gICAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc2VsZkZ1bGxmaWxsbWVudCgpKTtcbiAgICB9IGVsc2UgaWYgKGxpYiRlczYkcHJvbWlzZSR1dGlscyQkb2JqZWN0T3JGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoUmVqZWN0aW9uKHByb21pc2UpIHtcbiAgICBpZiAocHJvbWlzZS5fb25lcnJvcikge1xuICAgICAgcHJvbWlzZS5fb25lcnJvcihwcm9taXNlLl9yZXN1bHQpO1xuICAgIH1cblxuICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2gocHJvbWlzZSk7XG4gIH1cblxuICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIHZhbHVlKSB7XG4gICAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcHJvbWlzZS5fcmVzdWx0ID0gdmFsdWU7XG4gICAgcHJvbWlzZS5fc3RhdGUgPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRUQ7XG5cbiAgICBpZiAocHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoICE9PSAwKSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkZGVmYXVsdChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoLCBwcm9taXNlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKSB7XG4gICAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHByb21pc2UuX3N0YXRlID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQ7XG4gICAgcHJvbWlzZS5fcmVzdWx0ID0gcmVhc29uO1xuXG4gICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGRlZmF1bHQobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaFJlamVjdGlvbiwgcHJvbWlzZSk7XG4gIH1cblxuICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHtcbiAgICB2YXIgc3Vic2NyaWJlcnMgPSBwYXJlbnQuX3N1YnNjcmliZXJzO1xuICAgIHZhciBsZW5ndGggPSBzdWJzY3JpYmVycy5sZW5ndGg7XG5cbiAgICBwYXJlbnQuX29uZXJyb3IgPSBudWxsO1xuXG4gICAgc3Vic2NyaWJlcnNbbGVuZ3RoXSA9IGNoaWxkO1xuICAgIHN1YnNjcmliZXJzW2xlbmd0aCArIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRF0gPSBvbkZ1bGZpbGxtZW50O1xuICAgIHN1YnNjcmliZXJzW2xlbmd0aCArIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEXSA9IG9uUmVqZWN0aW9uO1xuXG4gICAgaWYgKGxlbmd0aCA9PT0gMCAmJiBwYXJlbnQuX3N0YXRlKSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkZGVmYXVsdChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoLCBwYXJlbnQpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2gocHJvbWlzZSkge1xuICAgIHZhciBzdWJzY3JpYmVycyA9IHByb21pc2UuX3N1YnNjcmliZXJzO1xuICAgIHZhciBzZXR0bGVkID0gcHJvbWlzZS5fc3RhdGU7XG5cbiAgICBpZiAoc3Vic2NyaWJlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGNoaWxkLFxuICAgICAgICBjYWxsYmFjayxcbiAgICAgICAgZGV0YWlsID0gcHJvbWlzZS5fcmVzdWx0O1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdWJzY3JpYmVycy5sZW5ndGg7IGkgKz0gMykge1xuICAgICAgY2hpbGQgPSBzdWJzY3JpYmVyc1tpXTtcbiAgICAgIGNhbGxiYWNrID0gc3Vic2NyaWJlcnNbaSArIHNldHRsZWRdO1xuXG4gICAgICBpZiAoY2hpbGQpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgY2hpbGQsIGNhbGxiYWNrLCBkZXRhaWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FsbGJhY2soZGV0YWlsKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBwcm9taXNlLl9zdWJzY3JpYmVycy5sZW5ndGggPSAwO1xuICB9XG5cbiAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRXJyb3JPYmplY3QoKSB7XG4gICAgdGhpcy5lcnJvciA9IG51bGw7XG4gIH1cblxuICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkVFJZX0NBVENIX0VSUk9SID0gbmV3IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEVycm9yT2JqZWN0KCk7XG5cbiAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2soZGV0YWlsKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRUUllfQ0FUQ0hfRVJST1IuZXJyb3IgPSBlO1xuICAgICAgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFRSWV9DQVRDSF9FUlJPUjtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBwcm9taXNlLCBjYWxsYmFjaywgZGV0YWlsKSB7XG4gICAgdmFyIGhhc0NhbGxiYWNrID0gbGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc0Z1bmN0aW9uKGNhbGxiYWNrKSxcbiAgICAgICAgdmFsdWUsXG4gICAgICAgIGVycm9yLFxuICAgICAgICBzdWNjZWVkZWQsXG4gICAgICAgIGZhaWxlZDtcblxuICAgIGlmIChoYXNDYWxsYmFjaykge1xuICAgICAgdmFsdWUgPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCR0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKTtcblxuICAgICAgaWYgKHZhbHVlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRUUllfQ0FUQ0hfRVJST1IpIHtcbiAgICAgICAgZmFpbGVkID0gdHJ1ZTtcbiAgICAgICAgZXJyb3IgPSB2YWx1ZS5lcnJvcjtcbiAgICAgICAgdmFsdWUgPSBudWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3VjY2VlZGVkID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRjYW5ub3RSZXR1cm5Pd24oKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgPSBkZXRhaWw7XG4gICAgICBzdWNjZWVkZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORykge30gZWxzZSBpZiAoaGFzQ2FsbGJhY2sgJiYgc3VjY2VlZGVkKSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKGZhaWxlZCkge1xuICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGVycm9yKTtcbiAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRCkge1xuICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRCkge1xuICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpbml0aWFsaXplUHJvbWlzZShwcm9taXNlLCByZXNvbHZlcikge1xuICAgIHRyeSB7XG4gICAgICByZXNvbHZlcihmdW5jdGlvbiByZXNvbHZlUHJvbWlzZSh2YWx1ZSkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH0sIGZ1bmN0aW9uIHJlamVjdFByb21pc2UocmVhc29uKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yKENvbnN0cnVjdG9yLCBpbnB1dCkge1xuICAgIHZhciBlbnVtZXJhdG9yID0gdGhpcztcblxuICAgIGVudW1lcmF0b3IuX2luc3RhbmNlQ29uc3RydWN0b3IgPSBDb25zdHJ1Y3RvcjtcbiAgICBlbnVtZXJhdG9yLnByb21pc2UgPSBuZXcgQ29uc3RydWN0b3IobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCk7XG5cbiAgICBpZiAoZW51bWVyYXRvci5fdmFsaWRhdGVJbnB1dChpbnB1dCkpIHtcbiAgICAgIGVudW1lcmF0b3IuX2lucHV0ID0gaW5wdXQ7XG4gICAgICBlbnVtZXJhdG9yLmxlbmd0aCA9IGlucHV0Lmxlbmd0aDtcbiAgICAgIGVudW1lcmF0b3IuX3JlbWFpbmluZyA9IGlucHV0Lmxlbmd0aDtcblxuICAgICAgZW51bWVyYXRvci5faW5pdCgpO1xuXG4gICAgICBpZiAoZW51bWVyYXRvci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChlbnVtZXJhdG9yLnByb21pc2UsIGVudW1lcmF0b3IuX3Jlc3VsdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbnVtZXJhdG9yLmxlbmd0aCA9IGVudW1lcmF0b3IubGVuZ3RoIHx8IDA7XG4gICAgICAgIGVudW1lcmF0b3IuX2VudW1lcmF0ZSgpO1xuICAgICAgICBpZiAoZW51bWVyYXRvci5fcmVtYWluaW5nID09PSAwKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChlbnVtZXJhdG9yLnByb21pc2UsIGVudW1lcmF0b3IuX3Jlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KGVudW1lcmF0b3IucHJvbWlzZSwgZW51bWVyYXRvci5fdmFsaWRhdGlvbkVycm9yKCkpO1xuICAgIH1cbiAgfVxuXG4gIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yLnByb3RvdHlwZS5fdmFsaWRhdGVJbnB1dCA9IGZ1bmN0aW9uIChpbnB1dCkge1xuICAgIHJldHVybiBsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzQXJyYXkoaW5wdXQpO1xuICB9O1xuXG4gIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yLnByb3RvdHlwZS5fdmFsaWRhdGlvbkVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgRXJyb3IoJ0FycmF5IE1ldGhvZHMgbXVzdCBiZSBwcm92aWRlZCBhbiBBcnJheScpO1xuICB9O1xuXG4gIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9yZXN1bHQgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGgpO1xuICB9O1xuXG4gIHZhciBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yO1xuXG4gIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yLnByb3RvdHlwZS5fZW51bWVyYXRlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBlbnVtZXJhdG9yID0gdGhpcztcblxuICAgIHZhciBsZW5ndGggPSBlbnVtZXJhdG9yLmxlbmd0aDtcbiAgICB2YXIgcHJvbWlzZSA9IGVudW1lcmF0b3IucHJvbWlzZTtcbiAgICB2YXIgaW5wdXQgPSBlbnVtZXJhdG9yLl9pbnB1dDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBwcm9taXNlLl9zdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORyAmJiBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGVudW1lcmF0b3IuX2VhY2hFbnRyeShpbnB1dFtpXSwgaSk7XG4gICAgfVxuICB9O1xuXG4gIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yLnByb3RvdHlwZS5fZWFjaEVudHJ5ID0gZnVuY3Rpb24gKGVudHJ5LCBpKSB7XG4gICAgdmFyIGVudW1lcmF0b3IgPSB0aGlzO1xuICAgIHZhciBjID0gZW51bWVyYXRvci5faW5zdGFuY2VDb25zdHJ1Y3RvcjtcblxuICAgIGlmIChsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzTWF5YmVUaGVuYWJsZShlbnRyeSkpIHtcbiAgICAgIGlmIChlbnRyeS5jb25zdHJ1Y3RvciA9PT0gYyAmJiBlbnRyeS5fc3RhdGUgIT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcpIHtcbiAgICAgICAgZW50cnkuX29uZXJyb3IgPSBudWxsO1xuICAgICAgICBlbnVtZXJhdG9yLl9zZXR0bGVkQXQoZW50cnkuX3N0YXRlLCBpLCBlbnRyeS5fcmVzdWx0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVudW1lcmF0b3IuX3dpbGxTZXR0bGVBdChjLnJlc29sdmUoZW50cnkpLCBpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZW51bWVyYXRvci5fcmVtYWluaW5nLS07XG4gICAgICBlbnVtZXJhdG9yLl9yZXN1bHRbaV0gPSBlbnRyeTtcbiAgICB9XG4gIH07XG5cbiAgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3IucHJvdG90eXBlLl9zZXR0bGVkQXQgPSBmdW5jdGlvbiAoc3RhdGUsIGksIHZhbHVlKSB7XG4gICAgdmFyIGVudW1lcmF0b3IgPSB0aGlzO1xuICAgIHZhciBwcm9taXNlID0gZW51bWVyYXRvci5wcm9taXNlO1xuXG4gICAgaWYgKHByb21pc2UuX3N0YXRlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HKSB7XG4gICAgICBlbnVtZXJhdG9yLl9yZW1haW5pbmctLTtcblxuICAgICAgaWYgKHN0YXRlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRCkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZW51bWVyYXRvci5fcmVzdWx0W2ldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGVudW1lcmF0b3IuX3JlbWFpbmluZyA9PT0gMCkge1xuICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCBlbnVtZXJhdG9yLl9yZXN1bHQpO1xuICAgIH1cbiAgfTtcblxuICBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvci5wcm90b3R5cGUuX3dpbGxTZXR0bGVBdCA9IGZ1bmN0aW9uIChwcm9taXNlLCBpKSB7XG4gICAgdmFyIGVudW1lcmF0b3IgPSB0aGlzO1xuXG4gICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc3Vic2NyaWJlKHByb21pc2UsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICBlbnVtZXJhdG9yLl9zZXR0bGVkQXQobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVELCBpLCB2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgZW51bWVyYXRvci5fc2V0dGxlZEF0KGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVELCBpLCByZWFzb24pO1xuICAgIH0pO1xuICB9O1xuICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRhbGwkJGFsbChlbnRyaWVzKSB7XG4gICAgcmV0dXJuIG5ldyBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkZGVmYXVsdCh0aGlzLCBlbnRyaWVzKS5wcm9taXNlO1xuICB9XG4gIHZhciBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRhbGwkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRhbGwkJGFsbDtcbiAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmFjZSQkcmFjZShlbnRyaWVzKSB7XG4gICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuXG4gICAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3IobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCk7XG5cbiAgICBpZiAoIWxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNBcnJheShlbnRyaWVzKSkge1xuICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIG5ldyBUeXBlRXJyb3IoJ1lvdSBtdXN0IHBhc3MgYW4gYXJyYXkgdG8gcmFjZS4nKSk7XG4gICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG5cbiAgICB2YXIgbGVuZ3RoID0gZW50cmllcy5sZW5ndGg7XG5cbiAgICBmdW5jdGlvbiBvbkZ1bGZpbGxtZW50KHZhbHVlKSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvblJlamVjdGlvbihyZWFzb24pIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBwcm9taXNlLl9zdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORyAmJiBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHN1YnNjcmliZShDb25zdHJ1Y3Rvci5yZXNvbHZlKGVudHJpZXNbaV0pLCB1bmRlZmluZWQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJvbWlzZTtcbiAgfVxuICB2YXIgbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmFjZSQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJhY2UkJHJhY2U7XG4gIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlc29sdmUkJHJlc29sdmUob2JqZWN0KSB7XG4gICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuXG4gICAgaWYgKG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJiBvYmplY3QuY29uc3RydWN0b3IgPT09IENvbnN0cnVjdG9yKSB7XG4gICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH1cblxuICAgIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3ApO1xuICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgb2JqZWN0KTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbiAgfVxuICB2YXIgbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlc29sdmUkJHJlc29sdmU7XG4gIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlamVjdCQkcmVqZWN0KHJlYXNvbikge1xuICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gICAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3RvcihsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wKTtcbiAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbiAgfVxuICB2YXIgbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRyZWplY3Q7XG5cbiAgdmFyIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRjb3VudGVyID0gMDtcblxuICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkbmVlZHNSZXNvbHZlcigpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGEgcmVzb2x2ZXIgZnVuY3Rpb24gYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZSBwcm9taXNlIGNvbnN0cnVjdG9yJyk7XG4gIH1cblxuICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkbmVlZHNOZXcoKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRmFpbGVkIHRvIGNvbnN0cnVjdCBcXCdQcm9taXNlXFwnOiBQbGVhc2UgdXNlIHRoZSBcXCduZXdcXCcgb3BlcmF0b3IsIHRoaXMgb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi4nKTtcbiAgfVxuXG4gIHZhciBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlO1xuICAvKipcbiAgICBQcm9taXNlIG9iamVjdHMgcmVwcmVzZW50IHRoZSBldmVudHVhbCByZXN1bHQgb2YgYW4gYXN5bmNocm9ub3VzIG9wZXJhdGlvbi4gVGhlXG4gICAgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCwgd2hpY2hcbiAgICByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZeKAmXMgZXZlbnR1YWwgdmFsdWUgb3IgdGhlIHJlYXNvblxuICAgIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLlxuICAgICBUZXJtaW5vbG9neVxuICAgIC0tLS0tLS0tLS0tXG4gICAgIC0gYHByb21pc2VgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB3aXRoIGEgYHRoZW5gIG1ldGhvZCB3aG9zZSBiZWhhdmlvciBjb25mb3JtcyB0byB0aGlzIHNwZWNpZmljYXRpb24uXG4gICAgLSBgdGhlbmFibGVgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB0aGF0IGRlZmluZXMgYSBgdGhlbmAgbWV0aG9kLlxuICAgIC0gYHZhbHVlYCBpcyBhbnkgbGVnYWwgSmF2YVNjcmlwdCB2YWx1ZSAoaW5jbHVkaW5nIHVuZGVmaW5lZCwgYSB0aGVuYWJsZSwgb3IgYSBwcm9taXNlKS5cbiAgICAtIGBleGNlcHRpb25gIGlzIGEgdmFsdWUgdGhhdCBpcyB0aHJvd24gdXNpbmcgdGhlIHRocm93IHN0YXRlbWVudC5cbiAgICAtIGByZWFzb25gIGlzIGEgdmFsdWUgdGhhdCBpbmRpY2F0ZXMgd2h5IGEgcHJvbWlzZSB3YXMgcmVqZWN0ZWQuXG4gICAgLSBgc2V0dGxlZGAgdGhlIGZpbmFsIHJlc3Rpbmcgc3RhdGUgb2YgYSBwcm9taXNlLCBmdWxmaWxsZWQgb3IgcmVqZWN0ZWQuXG4gICAgIEEgcHJvbWlzZSBjYW4gYmUgaW4gb25lIG9mIHRocmVlIHN0YXRlczogcGVuZGluZywgZnVsZmlsbGVkLCBvciByZWplY3RlZC5cbiAgICAgUHJvbWlzZXMgdGhhdCBhcmUgZnVsZmlsbGVkIGhhdmUgYSBmdWxmaWxsbWVudCB2YWx1ZSBhbmQgYXJlIGluIHRoZSBmdWxmaWxsZWRcbiAgICBzdGF0ZS4gIFByb21pc2VzIHRoYXQgYXJlIHJlamVjdGVkIGhhdmUgYSByZWplY3Rpb24gcmVhc29uIGFuZCBhcmUgaW4gdGhlXG4gICAgcmVqZWN0ZWQgc3RhdGUuICBBIGZ1bGZpbGxtZW50IHZhbHVlIGlzIG5ldmVyIGEgdGhlbmFibGUuXG4gICAgIFByb21pc2VzIGNhbiBhbHNvIGJlIHNhaWQgdG8gKnJlc29sdmUqIGEgdmFsdWUuICBJZiB0aGlzIHZhbHVlIGlzIGFsc28gYVxuICAgIHByb21pc2UsIHRoZW4gdGhlIG9yaWdpbmFsIHByb21pc2UncyBzZXR0bGVkIHN0YXRlIHdpbGwgbWF0Y2ggdGhlIHZhbHVlJ3NcbiAgICBzZXR0bGVkIHN0YXRlLiAgU28gYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCByZWplY3RzIHdpbGxcbiAgICBpdHNlbGYgcmVqZWN0LCBhbmQgYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCBmdWxmaWxscyB3aWxsXG4gICAgaXRzZWxmIGZ1bGZpbGwuXG4gICAgICBCYXNpYyBVc2FnZTpcbiAgICAtLS0tLS0tLS0tLS1cbiAgICAgYGBganNcbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgLy8gb24gc3VjY2Vzc1xuICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgICAgLy8gb24gZmFpbHVyZVxuICAgICAgcmVqZWN0KHJlYXNvbik7XG4gICAgfSk7XG4gICAgIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgLy8gb24gZnVsZmlsbG1lbnRcbiAgICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgIC8vIG9uIHJlamVjdGlvblxuICAgIH0pO1xuICAgIGBgYFxuICAgICBBZHZhbmNlZCBVc2FnZTpcbiAgICAtLS0tLS0tLS0tLS0tLS1cbiAgICAgUHJvbWlzZXMgc2hpbmUgd2hlbiBhYnN0cmFjdGluZyBhd2F5IGFzeW5jaHJvbm91cyBpbnRlcmFjdGlvbnMgc3VjaCBhc1xuICAgIGBYTUxIdHRwUmVxdWVzdGBzLlxuICAgICBgYGBqc1xuICAgIGZ1bmN0aW9uIGdldEpTT04odXJsKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBoYW5kbGVyO1xuICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2pzb24nO1xuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgICAgeGhyLnNlbmQoKTtcbiAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZXIoKSB7XG4gICAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gdGhpcy5ET05FKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgICByZXNvbHZlKHRoaXMucmVzcG9uc2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignZ2V0SlNPTjogYCcgKyB1cmwgKyAnYCBmYWlsZWQgd2l0aCBzdGF0dXM6IFsnICsgdGhpcy5zdGF0dXMgKyAnXScpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG4gICAgIGdldEpTT04oJy9wb3N0cy5qc29uJykudGhlbihmdW5jdGlvbihqc29uKSB7XG4gICAgICAvLyBvbiBmdWxmaWxsbWVudFxuICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgICAgLy8gb24gcmVqZWN0aW9uXG4gICAgfSk7XG4gICAgYGBgXG4gICAgIFVubGlrZSBjYWxsYmFja3MsIHByb21pc2VzIGFyZSBncmVhdCBjb21wb3NhYmxlIHByaW1pdGl2ZXMuXG4gICAgIGBgYGpzXG4gICAgUHJvbWlzZS5hbGwoW1xuICAgICAgZ2V0SlNPTignL3Bvc3RzJyksXG4gICAgICBnZXRKU09OKCcvY29tbWVudHMnKVxuICAgIF0pLnRoZW4oZnVuY3Rpb24odmFsdWVzKXtcbiAgICAgIHZhbHVlc1swXSAvLyA9PiBwb3N0c0pTT05cbiAgICAgIHZhbHVlc1sxXSAvLyA9PiBjb21tZW50c0pTT05cbiAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgIH0pO1xuICAgIGBgYFxuICAgICBAY2xhc3MgUHJvbWlzZVxuICAgIEBwYXJhbSB7ZnVuY3Rpb259IHJlc29sdmVyXG4gICAgVXNlZnVsIGZvciB0b29saW5nLlxuICAgIEBjb25zdHJ1Y3RvclxuICAqL1xuICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZShyZXNvbHZlcikge1xuICAgIHRoaXMuX2lkID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkJGNvdW50ZXIrKztcbiAgICB0aGlzLl9zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9yZXN1bHQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fc3Vic2NyaWJlcnMgPSBbXTtcblxuICAgIGlmIChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wICE9PSByZXNvbHZlcikge1xuICAgICAgaWYgKCFsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzRnVuY3Rpb24ocmVzb2x2ZXIpKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc1Jlc29sdmVyKCk7XG4gICAgICB9XG5cbiAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZSkpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJG5lZWRzTmV3KCk7XG4gICAgICB9XG5cbiAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGluaXRpYWxpemVQcm9taXNlKHRoaXMsIHJlc29sdmVyKTtcbiAgICB9XG4gIH1cblxuICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5hbGwgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRhbGwkJGRlZmF1bHQ7XG4gIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLnJhY2UgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyYWNlJCRkZWZhdWx0O1xuICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5yZXNvbHZlID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkZGVmYXVsdDtcbiAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UucmVqZWN0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRkZWZhdWx0O1xuXG4gIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLnByb3RvdHlwZSA9IHtcbiAgICBjb25zdHJ1Y3RvcjogbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UsXG5cbiAgICAvKipcbiAgICAgIFRoZSBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLFxuICAgICAgd2hpY2ggcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGVcbiAgICAgIHJlYXNvbiB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC5cbiAgICAgICBgYGBqc1xuICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uKHVzZXIpe1xuICAgICAgICAvLyB1c2VyIGlzIGF2YWlsYWJsZVxuICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgICAgLy8gdXNlciBpcyB1bmF2YWlsYWJsZSwgYW5kIHlvdSBhcmUgZ2l2ZW4gdGhlIHJlYXNvbiB3aHlcbiAgICAgIH0pO1xuICAgICAgYGBgXG4gICAgICAgQ2hhaW5pbmdcbiAgICAgIC0tLS0tLS0tXG4gICAgICAgVGhlIHJldHVybiB2YWx1ZSBvZiBgdGhlbmAgaXMgaXRzZWxmIGEgcHJvbWlzZS4gIFRoaXMgc2Vjb25kLCAnZG93bnN0cmVhbSdcbiAgICAgIHByb21pc2UgaXMgcmVzb2x2ZWQgd2l0aCB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmaXJzdCBwcm9taXNlJ3MgZnVsZmlsbG1lbnRcbiAgICAgIG9yIHJlamVjdGlvbiBoYW5kbGVyLCBvciByZWplY3RlZCBpZiB0aGUgaGFuZGxlciB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuICAgICAgIGBgYGpzXG4gICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHVzZXIubmFtZTtcbiAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgcmV0dXJuICdkZWZhdWx0IG5hbWUnO1xuICAgICAgfSkudGhlbihmdW5jdGlvbiAodXNlck5hbWUpIHtcbiAgICAgICAgLy8gSWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGB1c2VyTmFtZWAgd2lsbCBiZSB0aGUgdXNlcidzIG5hbWUsIG90aGVyd2lzZSBpdFxuICAgICAgICAvLyB3aWxsIGJlIGAnZGVmYXVsdCBuYW1lJ2BcbiAgICAgIH0pO1xuICAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jyk7XG4gICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScpO1xuICAgICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgLy8gbmV2ZXIgcmVhY2hlZFxuICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICAvLyBpZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHJlYXNvbmAgd2lsbCBiZSAnRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknLlxuICAgICAgICAvLyBJZiBgZmluZFVzZXJgIHJlamVjdGVkLCBgcmVhc29uYCB3aWxsIGJlICdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jy5cbiAgICAgIH0pO1xuICAgICAgYGBgXG4gICAgICBJZiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIGRvZXMgbm90IHNwZWNpZnkgYSByZWplY3Rpb24gaGFuZGxlciwgcmVqZWN0aW9uIHJlYXNvbnMgd2lsbCBiZSBwcm9wYWdhdGVkIGZ1cnRoZXIgZG93bnN0cmVhbS5cbiAgICAgICBgYGBqc1xuICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIHRocm93IG5ldyBQZWRhZ29naWNhbEV4Y2VwdGlvbignVXBzdHJlYW0gZXJyb3InKTtcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgLy8gVGhlIGBQZWRnYWdvY2lhbEV4Y2VwdGlvbmAgaXMgcHJvcGFnYXRlZCBhbGwgdGhlIHdheSBkb3duIHRvIGhlcmVcbiAgICAgIH0pO1xuICAgICAgYGBgXG4gICAgICAgQXNzaW1pbGF0aW9uXG4gICAgICAtLS0tLS0tLS0tLS1cbiAgICAgICBTb21ldGltZXMgdGhlIHZhbHVlIHlvdSB3YW50IHRvIHByb3BhZ2F0ZSB0byBhIGRvd25zdHJlYW0gcHJvbWlzZSBjYW4gb25seSBiZVxuICAgICAgcmV0cmlldmVkIGFzeW5jaHJvbm91c2x5LiBUaGlzIGNhbiBiZSBhY2hpZXZlZCBieSByZXR1cm5pbmcgYSBwcm9taXNlIGluIHRoZVxuICAgICAgZnVsZmlsbG1lbnQgb3IgcmVqZWN0aW9uIGhhbmRsZXIuIFRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCB0aGVuIGJlIHBlbmRpbmdcbiAgICAgIHVudGlsIHRoZSByZXR1cm5lZCBwcm9taXNlIGlzIHNldHRsZWQuIFRoaXMgaXMgY2FsbGVkICphc3NpbWlsYXRpb24qLlxuICAgICAgIGBgYGpzXG4gICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuICAgICAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHtcbiAgICAgICAgLy8gVGhlIHVzZXIncyBjb21tZW50cyBhcmUgbm93IGF2YWlsYWJsZVxuICAgICAgfSk7XG4gICAgICBgYGBcbiAgICAgICBJZiB0aGUgYXNzaW1saWF0ZWQgcHJvbWlzZSByZWplY3RzLCB0aGVuIHRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCBhbHNvIHJlamVjdC5cbiAgICAgICBgYGBqc1xuICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG4gICAgICAgIC8vIElmIGBmaW5kQ29tbWVudHNCeUF1dGhvcmAgZnVsZmlsbHMsIHdlJ2xsIGhhdmUgdGhlIHZhbHVlIGhlcmVcbiAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCByZWplY3RzLCB3ZSdsbCBoYXZlIHRoZSByZWFzb24gaGVyZVxuICAgICAgfSk7XG4gICAgICBgYGBcbiAgICAgICBTaW1wbGUgRXhhbXBsZVxuICAgICAgLS0tLS0tLS0tLS0tLS1cbiAgICAgICBTeW5jaHJvbm91cyBFeGFtcGxlXG4gICAgICAgYGBgamF2YXNjcmlwdFxuICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICB0cnkge1xuICAgICAgICByZXN1bHQgPSBmaW5kUmVzdWx0KCk7XG4gICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAgIC8vIGZhaWx1cmVcbiAgICAgIH1cbiAgICAgIGBgYFxuICAgICAgIEVycmJhY2sgRXhhbXBsZVxuICAgICAgIGBgYGpzXG4gICAgICBmaW5kUmVzdWx0KGZ1bmN0aW9uKHJlc3VsdCwgZXJyKXtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIC8vIGZhaWx1cmVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBzdWNjZXNzXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgYGBgXG4gICAgICAgUHJvbWlzZSBFeGFtcGxlO1xuICAgICAgIGBgYGphdmFzY3JpcHRcbiAgICAgIGZpbmRSZXN1bHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAgIC8vIGZhaWx1cmVcbiAgICAgIH0pO1xuICAgICAgYGBgXG4gICAgICAgQWR2YW5jZWQgRXhhbXBsZVxuICAgICAgLS0tLS0tLS0tLS0tLS1cbiAgICAgICBTeW5jaHJvbm91cyBFeGFtcGxlXG4gICAgICAgYGBgamF2YXNjcmlwdFxuICAgICAgdmFyIGF1dGhvciwgYm9va3M7XG4gICAgICAgdHJ5IHtcbiAgICAgICAgYXV0aG9yID0gZmluZEF1dGhvcigpO1xuICAgICAgICBib29rcyAgPSBmaW5kQm9va3NCeUF1dGhvcihhdXRob3IpO1xuICAgICAgICAvLyBzdWNjZXNzXG4gICAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgICAvLyBmYWlsdXJlXG4gICAgICB9XG4gICAgICBgYGBcbiAgICAgICBFcnJiYWNrIEV4YW1wbGVcbiAgICAgICBgYGBqc1xuICAgICAgIGZ1bmN0aW9uIGZvdW5kQm9va3MoYm9va3MpIHtcbiAgICAgICB9XG4gICAgICAgZnVuY3Rpb24gZmFpbHVyZShyZWFzb24pIHtcbiAgICAgICB9XG4gICAgICAgZmluZEF1dGhvcihmdW5jdGlvbihhdXRob3IsIGVycil7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgICAgLy8gZmFpbHVyZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmaW5kQm9vb2tzQnlBdXRob3IoYXV0aG9yLCBmdW5jdGlvbihib29rcywgZXJyKSB7XG4gICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgIGZvdW5kQm9va3MoYm9va3MpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAgICAgICAgICAgICBmYWlsdXJlKHJlYXNvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGNhdGNoKGVycm9yKSB7XG4gICAgICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBgYGBcbiAgICAgICBQcm9taXNlIEV4YW1wbGU7XG4gICAgICAgYGBgamF2YXNjcmlwdFxuICAgICAgZmluZEF1dGhvcigpLlxuICAgICAgICB0aGVuKGZpbmRCb29rc0J5QXV0aG9yKS5cbiAgICAgICAgdGhlbihmdW5jdGlvbihib29rcyl7XG4gICAgICAgICAgLy8gZm91bmQgYm9va3NcbiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gICAgICB9KTtcbiAgICAgIGBgYFxuICAgICAgIEBtZXRob2QgdGhlblxuICAgICAgQHBhcmFtIHtGdW5jdGlvbn0gb25GdWxmaWxsZWRcbiAgICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0ZWRcbiAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgICAgIEByZXR1cm4ge1Byb21pc2V9XG4gICAgKi9cbiAgICB0aGVuOiBmdW5jdGlvbiB0aGVuKG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKSB7XG4gICAgICB2YXIgcGFyZW50ID0gdGhpcztcbiAgICAgIHZhciBzdGF0ZSA9IHBhcmVudC5fc3RhdGU7XG5cbiAgICAgIGlmIChzdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVEICYmICFvbkZ1bGZpbGxtZW50IHx8IHN0YXRlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRCAmJiAhb25SZWplY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIHZhciBjaGlsZCA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3ApO1xuICAgICAgdmFyIHJlc3VsdCA9IHBhcmVudC5fcmVzdWx0O1xuXG4gICAgICBpZiAoc3RhdGUpIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gYXJndW1lbnRzW3N0YXRlIC0gMV07XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRkZWZhdWx0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpbnZva2VDYWxsYmFjayhzdGF0ZSwgY2hpbGQsIGNhbGxiYWNrLCByZXN1bHQpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjaGlsZDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICBgY2F0Y2hgIGlzIHNpbXBseSBzdWdhciBmb3IgYHRoZW4odW5kZWZpbmVkLCBvblJlamVjdGlvbilgIHdoaWNoIG1ha2VzIGl0IHRoZSBzYW1lXG4gICAgICBhcyB0aGUgY2F0Y2ggYmxvY2sgb2YgYSB0cnkvY2F0Y2ggc3RhdGVtZW50LlxuICAgICAgIGBgYGpzXG4gICAgICBmdW5jdGlvbiBmaW5kQXV0aG9yKCl7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignY291bGRuJ3QgZmluZCB0aGF0IGF1dGhvcicpO1xuICAgICAgfVxuICAgICAgIC8vIHN5bmNocm9ub3VzXG4gICAgICB0cnkge1xuICAgICAgICBmaW5kQXV0aG9yKCk7XG4gICAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICAgICAgfVxuICAgICAgIC8vIGFzeW5jIHdpdGggcHJvbWlzZXNcbiAgICAgIGZpbmRBdXRob3IoKS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuICAgICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICAgICAgfSk7XG4gICAgICBgYGBcbiAgICAgICBAbWV0aG9kIGNhdGNoXG4gICAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGlvblxuICAgICAgVXNlZnVsIGZvciB0b29saW5nLlxuICAgICAgQHJldHVybiB7UHJvbWlzZX1cbiAgICAqL1xuICAgICdjYXRjaCc6IGZ1bmN0aW9uIF9jYXRjaChvblJlamVjdGlvbikge1xuICAgICAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJlamVjdGlvbik7XG4gICAgfVxuICB9O1xuICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJHBvbHlmaWxsKCkge1xuICAgIHZhciBsb2NhbDtcblxuICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgbG9jYWwgPSBnbG9iYWw7XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGxvY2FsID0gc2VsZjtcbiAgICB9IGVsc2Uge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbG9jYWwgPSBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BvbHlmaWxsIGZhaWxlZCBiZWNhdXNlIGdsb2JhbCBvYmplY3QgaXMgdW5hdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudCcpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBQID0gbG9jYWwuUHJvbWlzZTtcblxuICAgIGlmIChQICYmIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChQLnJlc29sdmUoKSkgPT09ICdbb2JqZWN0IFByb21pc2VdJyAmJiAhUC5jYXN0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbG9jYWwuUHJvbWlzZSA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRkZWZhdWx0O1xuICB9XG4gIHZhciBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJHBvbHlmaWxsO1xuXG4gIHZhciBsaWIkZXM2JHByb21pc2UkdW1kJCRFUzZQcm9taXNlID0ge1xuICAgICdQcm9taXNlJzogbGliJGVzNiRwcm9taXNlJHByb21pc2UkJGRlZmF1bHQsXG4gICAgJ3BvbHlmaWxsJzogbGliJGVzNiRwcm9taXNlJHBvbHlmaWxsJCRkZWZhdWx0XG4gIH07XG5cbiAgLyogZ2xvYmFsIGRlZmluZTp0cnVlIG1vZHVsZTp0cnVlIHdpbmRvdzogdHJ1ZSAqL1xuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmVbJ2FtZCddKSB7XG4gICAgZGVmaW5lKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBsaWIkZXM2JHByb21pc2UkdW1kJCRFUzZQcm9taXNlO1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZVsnZXhwb3J0cyddKSB7XG4gICAgbW9kdWxlWydleHBvcnRzJ10gPSBsaWIkZXM2JHByb21pc2UkdW1kJCRFUzZQcm9taXNlO1xuICB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzICE9PSAndW5kZWZpbmVkJykge1xuICAgIHRoaXNbJ0VTNlByb21pc2UnXSA9IGxpYiRlczYkcHJvbWlzZSR1bWQkJEVTNlByb21pc2U7XG4gIH1cblxuICBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJGRlZmF1bHQoKTtcbn0pLmNhbGwodW5kZWZpbmVkKTtcblxuLy8gbm9vcCIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0XHR2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuLyoqXHJcbiAgKiBAUHJlZml4IENsYXNzXHJcbiAgKlxyXG4gICogQGRlc2NyaXB0aW9uIEhhbmRsZXMgcHJlZml4aW5nIGZvciBDU1MgcHJvcGVydGllcyBhbmQgRE9NIGV2ZW50cy5cclxuICAqIEByZXR1cm5zIHtPYmplY3R9XHJcbiAgKi9cblxudmFyIFByZWZpeCA9IChmdW5jdGlvbiAoKSB7XG5cblx0XHQvKipcclxuICAgICogQGNvbnN0cnVjdG9yIGZ1bmN0aW9uXHJcbiAgICAqXHJcbiAgICAqIEBkZXNjcmlwdGlvbiBDcmVhdGVzIGEgbWFwIHRoYXQgaG9sZHMgbm9uLXByZWZpeGVkIHByb3BlcnRpZXMgYW5kIGV2ZW50IG5hbWVzIGFzIGtleXMgYW5kIGFzc29jaWF0ZWQgcHJlZml4ZXMgYXMgdmFsdWVzIHRvIHRlc3QgYWdhaW5zdC5cclxuICAgICovXG5cblx0XHRmdW5jdGlvbiBQcmVmaXgoKSB7XG5cdFx0XHRcdF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcmVmaXgpO1xuXG5cdFx0XHRcdHRoaXMudGVzdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRcdFx0XHR0aGlzLnByZWZpeGVzID0gbmV3IE1hcCgpO1xuXG5cdFx0XHRcdC8vIFRyYW5zZm9ybXNcblx0XHRcdFx0dGhpcy5wcmVmaXhlcy5zZXQoXCJ0cmFuc2Zvcm1cIiwgW1wiLXdlYmtpdC10cmFuc2Zvcm1cIiwgXCJ0cmFuc2Zvcm1cIl0pO1xuXHRcdFx0XHR0aGlzLnByZWZpeGVzLnNldChcInRyYW5zZm9ybS1vcmlnaW5cIiwgW1wiLXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luXCIsIFwidHJhbnNmb3JtLW9yaWdpblwiXSk7XG5cdFx0XHRcdHRoaXMucHJlZml4ZXMuc2V0KFwidHJhbnNmb3JtLXN0eWxlXCIsIFtcIi13ZWJraXQtdHJhbnNmb3JtLXN0eWxlXCIsIFwidHJhbnNmb3JtLXN0eWxlXCJdKTtcblxuXHRcdFx0XHQvLyBUcmFuc2l0aW9uc1xuXHRcdFx0XHR0aGlzLnByZWZpeGVzLnNldChcInRyYW5zaXRpb25cIiwgW1wiLXdlYmtpdC10cmFuc2l0aW9uXCIsIFwidHJhbnNpdGlvblwiXSk7XG5cdFx0XHRcdHRoaXMucHJlZml4ZXMuc2V0KFwidHJhbnNpdGlvbi1kZWxheVwiLCBbXCItd2Via2l0LXRyYW5zaXRpb24tZGVsYXlcIiwgXCJ0cmFuc2l0aW9uLWRlbGF5XCJdKTtcblx0XHRcdFx0dGhpcy5wcmVmaXhlcy5zZXQoXCJ0cmFuc2l0aW9uLWR1cmF0aW9uXCIsIFtcIi13ZWJraXQtdHJhbnNpdGlvbi1kdXJhdGlvblwiLCBcInRyYW5zaXRpb24tZHVyYXRpb25cIl0pO1xuXHRcdFx0XHR0aGlzLnByZWZpeGVzLnNldChcInRyYW5zaXRpb24tcHJvcGVydHlcIiwgW1wiLXdlYmtpdC10cmFuc2l0aW9uLXByb3BlcnR5XCIsIFwidHJhbnNpdGlvbi1wcm9wZXJ0eVwiXSk7XG5cdFx0XHRcdHRoaXMucHJlZml4ZXMuc2V0KFwidHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb25cIiwgW1wiLXdlYmtpdC10cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvblwiLCBcInRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uXCJdKTtcblxuXHRcdFx0XHQvLyBBbmltYXRpb25zXG5cdFx0XHRcdHRoaXMucHJlZml4ZXMuc2V0KFwia2V5ZnJhbWVzXCIsIFtcIi13ZWJraXQtXCIsIFwiLW1zLVwiLCBcIi1tb3otXCIsIFwiXCJdKTtcblx0XHRcdFx0dGhpcy5wcmVmaXhlcy5zZXQoXCJhbmltYXRpb25cIiwgW1wiLXdlYmtpdC1hbmltYXRpb25cIiwgXCItbXMtYW5pbWF0aW9uXCIsIFwiLW1vei1hbmltYXRpb25cIiwgXCJhbmltYXRpb25cIl0pO1xuXHRcdFx0XHR0aGlzLnByZWZpeGVzLnNldChcImFuaW1hdGlvbi1uYW1lXCIsIFtcIi13ZWJraXQtYW5pbWF0aW9uLW5hbWVcIiwgXCItbXMtYW5pbWF0aW9uLW5hbWVcIiwgXCItbW96LWFuaW1hdGlvbi1uYW1lXCIsIFwiYW5pbWF0aW9uLW5hbWVcIl0pO1xuXHRcdFx0XHR0aGlzLnByZWZpeGVzLnNldChcImFuaW1hdGlvbi1pdGVyYXRpb24tY291bnRcIiwgW1wiLXdlYmtpdC1hbmltYXRpb24taXRlcmF0aW9uLWNvdW50XCIsIFwiLW1zLWFuaW1hdGlvbi1pdGVyYXRpb24tY291bnRcIiwgXCItbW96LWFuaW1hdGlvbi1pdGVyYXRpb24tY291bnRcIiwgXCJhbmltYXRpb24taXRlcmF0aW9uLWNvdW50XCJdKTtcblx0XHRcdFx0dGhpcy5wcmVmaXhlcy5zZXQoXCJhbmltYXRpb24tcGxheS1zdGF0ZVwiLCBbXCItd2Via2l0LWFuaW1hdGlvbi1wbGF5LXN0YXRlXCIsIFwiLW1zLWFuaW1hdGlvbi1wbGF5LXN0YXRlXCIsIFwiLW1vei1hbmltYXRpb24tcGxheS1zdGF0ZVwiLCBcImFuaW1hdGlvbi1wbGF5LXN0YXRlXCJdKTtcblx0XHRcdFx0dGhpcy5wcmVmaXhlcy5zZXQoXCJhbmltYXRpb24tZHVyYXRpb25cIiwgW1wiLXdlYmtpdC1hbmltYXRpb24tZHVyYXRpb25cIiwgXCItbXMtYW5pbWF0aW9uLWR1cmF0aW9uXCIsIFwiLW1vei1hbmltYXRpb24tZHVyYXRpb25cIiwgXCJhbmltYXRpb24tZHVyYXRpb25cIl0pO1xuXHRcdFx0XHR0aGlzLnByZWZpeGVzLnNldChcImFuaW1hdGlvbi1kZWxheVwiLCBbXCItd2Via2l0LWFuaW1hdGlvbi1kZWxheVwiLCBcIi1tcy1hbmltYXRpb24tZGVsYXlcIiwgXCItbW96LWFuaW1hdGlvbi1kZWxheVwiLCBcImFuaW1hdGlvbi1kZWxheVwiXSk7XG5cdFx0XHRcdHRoaXMucHJlZml4ZXMuc2V0KFwiYW5pbWF0aW9uLWRpcmVjdGlvblwiLCBbXCItd2Via2l0LWFuaW1hdGlvbi1kaXJlY3Rpb25cIiwgXCItbXMtYW5pbWF0aW9uLWRpcmVjdGlvblwiLCBcIi1tb3otYW5pbWF0aW9uLWRpcmVjdGlvblwiLCBcImFuaW1hdGlvbi1kaXJlY3Rpb25cIl0pO1xuXHRcdFx0XHR0aGlzLnByZWZpeGVzLnNldChcImFuaW1hdGlvbi1maWxsLW1vZGVcIiwgW1wiLXdlYmtpdC1hbmltYXRpb24tZmlsbC1tb2RlXCIsIFwiLW1zLWFuaW1hdGlvbi1maWxsLW1vZGVcIiwgXCItbW96LWFuaW1hdGlvbi1maWxsLW1vZGVcIiwgXCJhbmltYXRpb24tZmlsbC1tb2RlXCJdKTtcblxuXHRcdFx0XHQvLyBUcmFuc2l0aW9uIC8gQW5pbWF0aW9uIGVuZFxuXHRcdFx0XHR2YXIgV2Via2l0VHJhbnNpdGlvbiA9IFwid2Via2l0VHJhbnNpdGlvbkVuZFwiO1xuXHRcdFx0XHR2YXIgdHJhbnNpdGlvbiA9IFwidHJhbnNpdGlvbmVuZFwiO1xuXHRcdFx0XHR2YXIgV2Via2l0QW5pbWF0aW9uID0gXCJ3ZWJraXRBbmltYXRpb25FbmRcIjtcblx0XHRcdFx0dmFyIGFuaW1hdGlvbiA9IFwiYW5pbWF0aW9uZW5kXCI7XG5cblx0XHRcdFx0dmFyIHRyYW5zaXRpb25lbmQgPSB7IFdlYmtpdFRyYW5zaXRpb246IFdlYmtpdFRyYW5zaXRpb24sIHRyYW5zaXRpb246IHRyYW5zaXRpb24gfTtcblx0XHRcdFx0dmFyIGFuaW1hdGlvbmVuZCA9IHsgV2Via2l0QW5pbWF0aW9uOiBXZWJraXRBbmltYXRpb24sIGFuaW1hdGlvbjogYW5pbWF0aW9uIH07XG5cblx0XHRcdFx0dGhpcy5wcmVmaXhlcy5zZXQoXCJ0cmFuc2l0aW9uZW5kXCIsIHRyYW5zaXRpb25lbmQpO1xuXHRcdFx0XHR0aGlzLnByZWZpeGVzLnNldChcImFuaW1hdGlvbmVuZFwiLCBhbmltYXRpb25lbmQpO1xuXHRcdH1cblxuXHRcdF9jcmVhdGVDbGFzcyhQcmVmaXgsIFt7XG5cdFx0XHRcdGtleTogXCJnZXRQcmVmaXhcIixcblxuXHRcdFx0XHQvKipcclxuICAgICAgKiBAZ2V0UHJlZml4IGZ1bmN0aW9uXHJcbiAgICAgICpcclxuICAgICAgKiBAcGFyYW1zIHtTdHJpbmd9IFRoZSBub24tcHJlZml4ZWQgQ1NTIHByb3BlcnR5IC8gRE9NIGV2ZW50IG5hbWUgdG8gc2VhcmNoIHRoZSBwcmVmaXggbWFwIGZvci5cclxuICAgICAgKiBAZGVzY3JpcHRpb24gSGFuZGxlcyBwcmVmaXggcXVlcmllcyBieSBzZWFyY2hpbmcgYW5kIHRlc3RpbmcgcHJvcGVydGllcyBhbmQgdmFsdWVzIGluIHRoZSBwcmVmaXggbWFwIGFnYWluc3QgYSBIVE1MRWxlbWVudCdzIENTU1N0eWxlRGVjbGFyYXRpb24uXHJcbiAgICAgICogQHJldHVybnMge1N0cmluZ30gVGhlIHF1ZXJpZWQgcHJlZml4LlxyXG4gICAgICAqIEBnbG9iYWwgeWVzXHJcbiAgICAgICovXG5cblx0XHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGdldFByZWZpeChwcmVmaXgpIHtcblx0XHRcdFx0XHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cblx0XHRcdFx0XHRcdGlmICghdGhpcy5wcmVmaXhlcy5oYXMocHJlZml4KSkge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAocHJlZml4ID09PSBcInRyYW5zaXRpb25lbmRcIiB8fCBwcmVmaXggPT09IFwiYW5pbWF0aW9uZW5kXCIpIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdGhpcy5nZXRQcmVmaXhlZEV2ZW50TmFtZShwcmVmaXgpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChwcmVmaXggPT09IFwia2V5ZnJhbWVzXCIpIHtcblx0XHRcdFx0XHRcdFx0XHR2YXIga2V5ZnJhbWVQcmVmaXggPSB0aGlzLnByZWZpeGVzLmdldChwcmVmaXgpLmZpbHRlcihmdW5jdGlvbiAoZikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gX3RoaXMudGVzdEVsZW1lbnQuc3R5bGVbZiArIFwiYW5pbWF0aW9uLW5hbWVcIl0gIT09IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdFx0XHR9KVswXTtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gXCJAXCIgKyBrZXlmcmFtZVByZWZpeCArIFwia2V5ZnJhbWVzXCI7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiB0aGlzLnByZWZpeGVzLmdldChwcmVmaXgpLmZpbHRlcihmdW5jdGlvbiAoZikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gX3RoaXMudGVzdEVsZW1lbnQuc3R5bGVbZl0gIT09IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdFx0XHR9KVswXTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdH0sIHtcblx0XHRcdFx0a2V5OiBcImdldFByZWZpeGVkRXZlbnROYW1lXCIsXG5cblx0XHRcdFx0LyoqXHJcbiAgICAgICogQGdldFByZWZpeGVkRXZlbnROYW1lIGZ1bmN0aW9uXHJcbiAgICAgICpcclxuICAgICAgKiBAcGFyYW1zIHtTdHJpbmd9IFRoZSBub24tcHJlZml4ZWQgRE9NIGV2ZW50IG5hbWUgdG8gc2VhcmNoIHRoZSBwcmVmaXggbWFwIGZvci5cclxuICAgICAgKiBAZGVzY3JpcHRpb24gVGVzdHMgYSBIVE1MRWxlbWVudCdzIENTU1N0eWxlRGVjbGFyYXRpb24gZm9yIHN1cHBvcnRlZCBET00gZXZlbnQgcHJlZml4ZXMuXHJcbiAgICAgICogQHJldHVybnMge1N0cmluZ30gVGhlIHF1ZXJpZWQgcHJlZml4LlxyXG4gICAgICAqIEBnbG9iYWwgbm9cclxuICAgICAgKi9cblxuXHRcdFx0XHR2YWx1ZTogZnVuY3Rpb24gZ2V0UHJlZml4ZWRFdmVudE5hbWUoZXZlbnROYW1lKSB7XG5cdFx0XHRcdFx0XHR2YXIgX3RoaXMyID0gdGhpcztcblxuXHRcdFx0XHRcdFx0dmFyIGV2dE5hbWVzID0gdGhpcy5wcmVmaXhlcy5nZXQoZXZlbnROYW1lKTtcblx0XHRcdFx0XHRcdHZhciBtYXRjaGVzID0gT2JqZWN0LmtleXMoZXZ0TmFtZXMpLmZpbHRlcihmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBfdGhpczIudGVzdEVsZW1lbnQuc3R5bGVbZV0gIT09IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGV2dE5hbWVzW21hdGNoZXNbMF1dO1xuXHRcdFx0XHR9XG5cdFx0fV0pO1xuXG5cdFx0cmV0dXJuIFByZWZpeDtcbn0pKCk7XG5cbjtcblxuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBQcmVmaXg7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbXCJkZWZhdWx0XCJdOyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0dmFsdWU6IHRydWVcbn0pO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG4vKipcclxuICAqIEBTZXF1ZW5jZVdyYXBwZXIgQ2xhc3NcclxuICAqXHJcbiAgKiBAZGVzY3JpcHRpb24gSW50ZXJjZXB0cyBhbGwgc2VxdWVuY2VzIGFuZCByZXR1cm5zIGEgc2luZ2xlIG9yIGNvbWJvIHNlcXVlbmNlIGRlcGVuZGluZyBvbiB3aGV0aGVyIGEgc2luZ2xlIEhUTUxFbGVtZW50IG9yIE5vZGVsaXN0IGlzIHVzZWQuXHJcbiAgKiBAcmV0dXJucyB7UHJvbWlzZX1cclxuICAqL1xuXG52YXIgU2VxdWVuY2VXcmFwcGVyID1cblxuLyoqXHJcbiAgKiBAY29uc3RydWN0b3IgZnVuY3Rpb25cclxuICAqXHJcbiAgKiBAcGFyYW1zIHtPYmplY3QsIENsYXNzLCBDbGFzcywgQ2xhc3MsIENsYXNzLCBDbGFzcywgQ2xhc3MsIE9iamVjdH0gICAgIFxyXG4gICogQGRlc2NyaXB0aW9uIEEgd3JhcHBlciB0aGF0IG9yZ2FuaXNlcyBhbGwgc2VxdWVuY2VzIGJlZm9yZSB0aGV5IGFyZSBsYXVuY2hlZC4gXHJcbiogQHBhcmFtcyBkZXNjcmlwdGlvblxyXG4tIG9wdGlvbnMge09iamVjdH0gT2JqZWN0IG9mIHNlcXVlbmNlIG9wdGlvbnMuXHJcbi0gRG9tVXRpbHMge0NsYXNzfSBET00gdXRpbGl0aWVzIGNsYXNzLlxyXG4tIFByZWZpeCB7Q2xhc3N9IFByZWZpeCBjbGFzcy5cclxuLSBDc3NVdGlscyB7Q2xhc3N9IENTUyBVdGlsaXRpZXMgY2xhc3MuXHJcbi0gUHJvbWlzZSB7Q2xhc3N9IFByb21pc2UgY2xhc3MuXHJcbi0gU2VxdWVuY2Uge0NsYXNzfSBUaGUgc2VxdWVuY2UgdHlwZSAoVHJhbnNpdGlvbiAvIEFuaW1hdGlvbikuXHJcbi0gQ29tYm8ge0NsYXNzfSBXcmFwcGVyIGZvciBtdWx0aXBsZSBzZXF1ZW5jZXMuXHJcbi0gVHJhY2tlciB7T2JqZWN0fSBPYmplY3QgdG8gc3RvcmUgYW5kIHRyYWNrIHNlcXVlbmNlcyB0aHJvdWdoLlxyXG4qIEByZXR1cm5zIHtQcm9taXNlfVxyXG4gICovXG5cbmZ1bmN0aW9uIFNlcXVlbmNlV3JhcHBlcihvcHRpb25zLCBEb21VdGlscywgUHJlZml4LCBDc3NVdGlscywgUHJvbWlzZSwgU2VxdWVuY2UsIENvbWJvLCBUcmFja2VyKSB7XG5cdF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTZXF1ZW5jZVdyYXBwZXIpO1xuXG5cdGlmIChvcHRpb25zLmVsZW1lbnQubGVuZ3RoKSB7XG5cdFx0dmFyIHRyYW5zaXRpb25zID0gQXJyYXkuZnJvbShvcHRpb25zLmVsZW1lbnQpLm1hcChmdW5jdGlvbiAoZWxlbWVudCkge1xuXHRcdFx0dmFyIG9wdHMgPSB7fTtcblx0XHRcdE9iamVjdC5rZXlzKG9wdGlvbnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHRcdFx0XHRvcHRzW2tleV0gPSBvcHRpb25zW2tleV07XG5cdFx0XHR9KTtcblx0XHRcdG9wdHMuZWxlbWVudCA9IGVsZW1lbnQ7XG5cdFx0XHRUcmFja2VyLnRyYWNrKG9wdHMsIFNlcXVlbmNlKTtcblx0XHRcdHJldHVybiBuZXcgU2VxdWVuY2Uob3B0cywgRG9tVXRpbHMsIFByZWZpeCwgQ3NzVXRpbHMsIFByb21pc2UsIFRyYWNrZXIpO1xuXHRcdH0pO1xuXHRcdHJldHVybiBuZXcgQ29tYm8odHJhbnNpdGlvbnMsIFByb21pc2UpO1xuXHR9IGVsc2Uge1xuXHRcdFRyYWNrZXIudHJhY2sob3B0aW9ucywgU2VxdWVuY2UpO1xuXHRcdHJldHVybiBuZXcgU2VxdWVuY2Uob3B0aW9ucywgRG9tVXRpbHMsIFByZWZpeCwgQ3NzVXRpbHMsIFByb21pc2UsIFRyYWNrZXIpO1xuXHR9XG59O1xuXG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IFNlcXVlbmNlV3JhcHBlcjtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1tcImRlZmF1bHRcIl07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHR2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIGFycjJbaV0gPSBhcnJbaV07IHJldHVybiBhcnIyOyB9IGVsc2UgeyByZXR1cm4gQXJyYXkuZnJvbShhcnIpOyB9IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuLyoqXHJcbiAgKiBAVHJhY2tlciBDbGFzc1xyXG4gICpcclxuICAqIEBkZXNjcmlwdGlvbiBUcmFjayBhbGwgc2VxdWVuY2VkIGVsZW1lbnRzIHRvIGFsbG93IHNlcXVlbmNlcyB0byBiZSBwbGF5ZWQgLyBwYXVzZWQuXHJcbiAgKiBAcmV0dXJucyB7T2JqZWN0fVxyXG4gICovXG5cbnZhciBUcmFja2VyID0gKGZ1bmN0aW9uICgpIHtcblxuXHQvKipcclxuICAgKiBAY29uc3RydWN0b3IgZnVuY3Rpb25cclxuICAgKlxyXG4gICAqIEBwYXJhbXMge0NsYXNzLCBDbGFzcywgQ2xhc3MsIENsYXNzfSAgICBcclxuICAgKiBAZGVzY3JpcHRpb24gSW5pdGlhbGlzZSBhIHNpbmdsZSBNYXAgb2JqZWN0IHRvIHN0b3JlIHNlcXVlbmNlZCBlbGVtZW50cy4gT25seSBvbmUgaW5zdGFuY2UgcGVyIEFuaW1hdG9yIGlzIGNyZWF0ZWQuICBcclxuICogQHBhcmFtcyBkZXNjcmlwdGlvblxyXG4gLSBEb21VdGlscyB7Q2xhc3N9IERPTSB1dGlsaXRpZXMgY2xhc3MuXHJcbiAtIFByZWZpeCB7Q2xhc3N9IFByZWZpeCBjbGFzcy5cclxuIC0gQ3NzVXRpbHMge0NsYXNzfSBDU1MgVXRpbGl0aWVzIGNsYXNzLlxyXG4gLSBUcmFuc2l0aW9uIHtDbGFzc30gU3RvcmUgdGhlIFRyYW5zaXRpb24gcHJvdG95cGUgdG8gY29tcGFyZSBhZ2FpbnN0IG5ldyBzZXF1ZW5jZSB0eXBlcyBwYXNzZWQgaW4gdG8gdGhlIFRyYWNrZXIuXHJcbiAgICovXG5cblx0ZnVuY3Rpb24gVHJhY2tlcihEb21VdGlscywgUHJlZml4LCBDc3NVdGlscywgVHJhbnNpdGlvbikge1xuXHRcdF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUcmFja2VyKTtcblxuXHRcdHRoaXMudHJhY2tlciA9IG5ldyBNYXAoKTtcblx0XHR0aGlzLnRyYWNrZXIuc2V0KFwiVHJhbnNpdGlvbnNcIiwgbmV3IE1hcCgpKTtcblx0XHR0aGlzLnRyYWNrZXIuc2V0KFwiQW5pbWF0aW9uc1wiLCBuZXcgTWFwKCkpO1xuXHRcdHRoaXMuZG9tVXRpbHMgPSBuZXcgRG9tVXRpbHMoKTtcblx0XHR0aGlzLnByZWZpeCA9IG5ldyBQcmVmaXgoKTtcblx0XHR0aGlzLmNzc1V0aWxzID0gbmV3IENzc1V0aWxzKCk7XG5cdFx0dGhpcy50cmFuc2l0aW9uUHJvdG90eXBlID0gVHJhbnNpdGlvbi5wcm90b3R5cGU7XG5cdH1cblxuXHRfY3JlYXRlQ2xhc3MoVHJhY2tlciwgW3tcblx0XHRrZXk6IFwidHJhY2tcIixcblxuXHRcdC8qKlxyXG4gICAgKiBAdHJhY2sgZnVuY3Rpb25cclxuICAgICpcclxuICAgICogQHBhcmFtcyB7T2JqZWN0LCBDbGFzc31cclxuICAgICogQGRlc2NyaXB0aW9uIFNlYXJjaGVzIHRoZSBNYXAgZm9yIHRoZSBlbGVtZW50IHBhc3NlZCBpbiBhbmQgZWl0aGVyIHVwZGF0ZXMgaXQgaWYgZm91bmQgb3IgY3JlYXRlcyBhIG5ldyBlbnRyeSBpbiB0aGUgTWFwIGZvciBpdC5cclxuICAgICogQHBhcmFtcyBkZXNjcmlwdGlvbiAgICAgIFxyXG4gICAgKiAgLSBvcHRpb25zOiB7T2JqZWN0fSBUaGUgc2VxdWVuY2Ugb3B0aW9ucy5cclxuICAgICAgIC0gU2VxdWVuY2UgOiB7Q2xhc3N9IEVpdGhlciBhIFRyYW5zaXRpb24gb3IgQW5pbWF0aW9uIGNsYXNzLlxyXG4gICAgKiBAZ2xvYmFsIG5vXHJcbiAgICAqL1xuXG5cdFx0dmFsdWU6IGZ1bmN0aW9uIHRyYWNrKG9wdGlvbnMsIFNlcXVlbmNlKSB7XG5cblx0XHRcdHZhciB0cmFuc2l0aW9uID0gdGhpcy50cmFja2VyLmdldChcIlRyYW5zaXRpb25zXCIpLmdldChvcHRpb25zLmVsZW1lbnQpO1xuXHRcdFx0dmFyIGFuaW1hdGlvbiA9IHRoaXMudHJhY2tlci5nZXQoXCJBbmltYXRpb25zXCIpLmdldChvcHRpb25zLmVsZW1lbnQpO1xuXG5cdFx0XHRpZiAoU2VxdWVuY2UucHJvdG90eXBlID09PSB0aGlzLnRyYW5zaXRpb25Qcm90b3R5cGUpIHtcblx0XHRcdFx0aWYgKCF0cmFuc2l0aW9uKSB7XG5cdFx0XHRcdFx0dGhpcy50cmFja1RyYW5zaXRpb24ob3B0aW9ucyk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhpcy51cGRhdGVUcmFuc2l0aW9uUmVjb3JkKHRyYW5zaXRpb24sIG9wdGlvbnMpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdC8vIEEgcmVmZXJlbmNlIHRvIHRoZSBlbGVtZW50IHdpbGwgc3VmZmljZSBpZiB0aGUgc2VxdWVuY2UgdHlwZSBpcyBhbiBBbmltYXRpb24uXG5cdFx0XHRcdC8vIENTUyBBbmltYXRpb25zIGNhbiBiZSBwYXVzZWQgYW5kIHBsYXllZCBlYXNpbHkgdW5saWtlIHRyYW5zaXRpb25zIHdoaWNoIGFyZSBhIGJpdCB0cmlja2llci5cblx0XHRcdFx0aWYgKCFhbmltYXRpb24pIHtcblx0XHRcdFx0XHR0aGlzLnRyYWNrQW5pbWF0aW9uKG9wdGlvbnMpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9LCB7XG5cdFx0a2V5OiBcInRyYWNrVHJhbnNpdGlvblwiLFxuXG5cdFx0LyoqXHJcbiAgICAqIEB0cmFja1RyYW5zaXRpb24gZnVuY3Rpb25cclxuICAgICpcclxuICAgICogQHBhcmFtcyB7T2JqZWN0fVxyXG4gICAgKiBAZGVzY3JpcHRpb24gU3RvcmVzIHRoZSBlbGVtZW50IHVuZGVyIHRoZSBUcmFuc2l0aW9ucyBrZXkgaW4gdGhlIFRyYWNrZXIgTWFwIFxyXG4gICAgKiBcdFx0YW5kIHRoZSB0cmFuc2l0aW9uZWQgcHJvcGVydGllcyAvIHZhbHVlcyBzZXQgYWdhaW5zdCB0aGUgZWxlbWVudC5cclxuICAgICogQHBhcmFtcyBkZXNjcmlwdGlvbiAgICAgIFxyXG4gICAgKiAgLSBvcHRpb25zOiB7T2JqZWN0fSBUaGUgdHJhbnNpdGlvbiBzZXF1ZW5jZSBvcHRpb25zLlxyXG4gICAgKiBAZ2xvYmFsIG5vXHJcbiAgICAqL1xuXG5cdFx0dmFsdWU6IGZ1bmN0aW9uIHRyYWNrVHJhbnNpdGlvbihvcHRpb25zKSB7XG5cblx0XHRcdHZhciBkYXRhID0ge307XG5cdFx0XHR2YXIgdHJhbnNpdGlvbnMgPSB0aGlzLnRyYWNrZXIuZ2V0KFwiVHJhbnNpdGlvbnNcIik7XG5cdFx0XHR2YXIgdHJhbnNpdGlvblN0eWxlcyA9IHt9O1xuXHRcdFx0dmFyIHRwID0gQW5pbWF0b3IuZ2V0UHJlZml4KFwidHJhbnNpdGlvbi1wcm9wZXJ0eVwiKSxcblx0XHRcdCAgICB0ZHVyID0gQW5pbWF0b3IuZ2V0UHJlZml4KFwidHJhbnNpdGlvbi1kdXJhdGlvblwiKSxcblx0XHRcdCAgICB0dGYgPSBBbmltYXRvci5nZXRQcmVmaXgoXCJ0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvblwiKSxcblx0XHRcdCAgICB0ZGVsID0gQW5pbWF0b3IuZ2V0UHJlZml4KFwidHJhbnNpdGlvbi1kZWxheVwiKTtcblxuXHRcdFx0dHJhbnNpdGlvblN0eWxlc1t0cF0gPSBvcHRpb25zLmVsZW1lbnQuc3R5bGVbdHBdO1xuXHRcdFx0dHJhbnNpdGlvblN0eWxlc1t0ZHVyXSA9IG9wdGlvbnMuZWxlbWVudC5zdHlsZVt0ZHVyXTtcblx0XHRcdHRyYW5zaXRpb25TdHlsZXNbdHRmXSA9IG9wdGlvbnMuZWxlbWVudC5zdHlsZVt0dGZdO1xuXHRcdFx0dHJhbnNpdGlvblN0eWxlc1t0ZGVsXSA9IG9wdGlvbnMuZWxlbWVudC5zdHlsZVt0ZGVsXTtcblx0XHRcdGRhdGEudHJhbnNpdGlvblN0eWxlcyA9IHRyYW5zaXRpb25TdHlsZXM7XG5cblx0XHRcdGlmIChvcHRpb25zLnNldFN0eWxlcyAmJiBvcHRpb25zLnNldFN0eWxlcy5iZWZvcmUpIHtcblx0XHRcdFx0ZGF0YS5zdHlsZXMgPSBvcHRpb25zLnNldFN0eWxlcy5iZWZvcmU7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChvcHRpb25zLmFkZENsYXNzICYmIG9wdGlvbnMuYWRkQ2xhc3MuYmVmb3JlKSB7XG5cblx0XHRcdFx0ZGF0YS5jbGFzc05hbWUgPSB7XG5cdFx0XHRcdFx0YmVmb3JlOiBvcHRpb25zLmVsZW1lbnQuY2xhc3NOYW1lLFxuXHRcdFx0XHRcdGFmdGVyOiBvcHRpb25zLmFkZENsYXNzLmJlZm9yZVxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXG5cdFx0XHRkYXRhLnByb3BlcnRpZXMgPSBBcnJheS5pc0FycmF5KG9wdGlvbnMucHJvcGVydGllcykgPyBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KG9wdGlvbnMucHJvcGVydGllcykpIDogW29wdGlvbnMucHJvcGVydGllc107XG5cdFx0XHR0cmFuc2l0aW9ucy5zZXQob3B0aW9ucy5lbGVtZW50LCBkYXRhKTtcblx0XHR9XG5cdH0sIHtcblx0XHRrZXk6IFwidHJhY2tBbmltYXRpb25cIixcblxuXHRcdC8qKlxyXG4gICAgKiBAdHJhY2tBbmltYXRpb24gZnVuY3Rpb25cclxuICAgICpcclxuICAgICogQHBhcmFtcyB7T2JqZWN0fVxyXG4gICAgKiBAZGVzY3JpcHRpb24gU3RvcmVzIGFuIGVsZW1lbnQgdW5kZXIgdGhlIEFuaW1hdGlvbnMga2V5IGluIHRoZSBUcmFja2VyIE1hcC5cclxuICAgICogQHBhcmFtcyBkZXNjcmlwdGlvbiAgICAgIFxyXG4gICAgKiAgLSBvcHRpb25zOiB7T2JqZWN0fSBUaGUgYW5pbWF0aW9uIHNlcXVlbmNlIG9wdGlvbnMuXHJcbiAgICAqIEBnbG9iYWwgbm9cclxuICAgICovXG5cblx0XHR2YWx1ZTogZnVuY3Rpb24gdHJhY2tBbmltYXRpb24ob3B0aW9ucykge1xuXG5cdFx0XHR2YXIgZGF0YSA9IHt9O1xuXHRcdFx0dmFyIGFuaW1hdGlvbnMgPSB0aGlzLnRyYWNrZXIuZ2V0KFwiQW5pbWF0aW9uc1wiKTtcblx0XHRcdGFuaW1hdGlvbnMuc2V0KG9wdGlvbnMuZWxlbWVudCwgZGF0YSk7XG5cdFx0fVxuXHR9LCB7XG5cdFx0a2V5OiBcInVwZGF0ZVRyYW5zaXRpb25SZWNvcmRcIixcblxuXHRcdC8qKlxyXG4gICAgKiBAdXBkYXRlVHJhbnNpdGlvblJlY29yZCBmdW5jdGlvblxyXG4gICAgKlxyXG4gICAgKiBAcGFyYW1zIHtPYmplY3QsIE9iamVjdH1cclxuICAgICogQGRlc2NyaXB0aW9uIEluc2VydHMgYWRkaXRpb25hbCB0cmFuc2l0aW9uZWQgcHJvcGVydGllcyAvIHN0eWxlIHJ1bGVzIHNldCBpbnRvIGFuIGVsZW1lbnQncyByZWNvcmQuXHJcbiAgICAqIEBwYXJhbXMgZGVzY3JpcHRpb24gICAgICBcclxuICAgICogIC0gcmVjb3JkOiB7T2JqZWN0fSBUaGUgdHJhbnNpdGlvbiByZWNvcmQgZnJvbSB0aGUgVHJhY2tlciBNYXAuXHJcbiAgICAqICAtIG9wdGlvbnM6IHtPYmplY3R9IFRoZSB0cmFuc2l0aW9uIHNlcXVlbmNlIG9wdGlvbnMuXHJcbiAgICAqIEBnbG9iYWwgbm9cclxuICAgICovXG5cblx0XHR2YWx1ZTogZnVuY3Rpb24gdXBkYXRlVHJhbnNpdGlvblJlY29yZChyZWNvcmQsIG9wdGlvbnMpIHtcblxuXHRcdFx0dmFyIHByb3BlcnRpZXMgPSBBcnJheS5pc0FycmF5KG9wdGlvbnMucHJvcGVydGllcykgPyBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KG9wdGlvbnMucHJvcGVydGllcykpIDogW29wdGlvbnMucHJvcGVydGllc107XG5cdFx0XHRwcm9wZXJ0aWVzID0gcHJvcGVydGllcy5maWx0ZXIoZnVuY3Rpb24gKHByb3BlcnR5KSB7XG5cdFx0XHRcdHJldHVybiByZWNvcmQucHJvcGVydGllcy5pbmRleE9mKHByb3BlcnR5KSA9PT0gLTE7XG5cdFx0XHR9KTtcblx0XHRcdHJlY29yZC5wcm9wZXJ0aWVzID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShyZWNvcmQucHJvcGVydGllcyksIF90b0NvbnN1bWFibGVBcnJheShwcm9wZXJ0aWVzKSk7XG5cblx0XHRcdGlmIChvcHRpb25zLnNldFN0eWxlcyAmJiBvcHRpb25zLnNldFN0eWxlcy5iZWZvcmUpIHtcblx0XHRcdFx0aWYgKCFyZWNvcmQuc3R5bGVzKSB7XG5cdFx0XHRcdFx0cmVjb3JkLnN0eWxlcyA9IHt9O1xuXHRcdFx0XHR9XG5cdFx0XHRcdE9iamVjdC5rZXlzKG9wdGlvbnMuc2V0U3R5bGVzLmJlZm9yZSkuZm9yRWFjaChmdW5jdGlvbiAocHJvcGVydHkpIHtcblx0XHRcdFx0XHRyZWNvcmQuc3R5bGVzW3Byb3BlcnR5XSA9IG9wdGlvbnMuc2V0U3R5bGVzLmJlZm9yZVtwcm9wZXJ0eV07XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fSwge1xuXHRcdGtleTogXCJwYXVzZVwiLFxuXG5cdFx0LyoqXHJcbiAgICAqIEBwYXVzZSBmdW5jdGlvblxyXG4gICAgKlxyXG4gICAgKiBAZGVzY3JpcHRpb24gSXRlcmF0ZXMgdGhyb3VnaCBldmVyeSBzdG9yZWQgZWxlbWVudCBpbiB0aGUgVHJhY2tlciBhbmQgc2V0cyBpdHMgQ1NTIGFwcHJvcHJpYXRlbHkgdG8gZWZmZWN0aXZlbHkgcGF1c2UgYSBzZXF1ZW5jZS5cclxuICAgICogQGdsb2JhbCBub1xyXG4gICAgKi9cblxuXHRcdHZhbHVlOiBmdW5jdGlvbiBwYXVzZSgpIHtcblx0XHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cblx0XHRcdHZhciB0cmFuc2l0aW9ucyA9IHRoaXMudHJhY2tlci5nZXQoXCJUcmFuc2l0aW9uc1wiKTtcblx0XHRcdHZhciB0cmFuc2l0aW9uRWxlbWVudHMgPSB0cmFuc2l0aW9ucy5rZXlzKCk7XG5cdFx0XHR2YXIgYW5pbWF0aW9ucyA9IHRoaXMudHJhY2tlci5nZXQoXCJBbmltYXRpb25zXCIpO1xuXHRcdFx0dmFyIGFuaW1hdGlvbkVsZW1lbnRzID0gYW5pbWF0aW9ucy5rZXlzKCk7XG5cblx0XHRcdHdoaWxlICh0cnVlKSB7XG5cblx0XHRcdFx0dmFyIGVsZW1lbnQgPSBhbmltYXRpb25FbGVtZW50cy5uZXh0KCksXG5cdFx0XHRcdCAgICBydWxlID0ge307XG5cdFx0XHRcdGlmIChlbGVtZW50LmRvbmUpIHtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJ1bGVbdGhpcy5wcmVmaXguZ2V0UHJlZml4KFwiYW5pbWF0aW9uLXBsYXktc3RhdGVcIildID0gXCJwYXVzZWRcIjtcblx0XHRcdFx0dGhpcy5jc3NVdGlscy5zZXRTdHlsZXMoZWxlbWVudC52YWx1ZSwgcnVsZSk7XG5cdFx0XHR9XG5cblx0XHRcdHZhciBfbG9vcCA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHR2YXIgZWxlbWVudCA9IHRyYW5zaXRpb25FbGVtZW50cy5uZXh0KCksXG5cdFx0XHRcdCAgICByZWNvcmQgPSB1bmRlZmluZWQsXG5cdFx0XHRcdCAgICBydWxlID0ge307XG5cdFx0XHRcdGlmIChlbGVtZW50LmRvbmUpIHtcblx0XHRcdFx0XHRyZXR1cm4gXCJicmVha1wiO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmVjb3JkID0gdHJhbnNpdGlvbnMuZ2V0KGVsZW1lbnQudmFsdWUpO1xuXHRcdFx0XHRyZWNvcmQucHJvcGVydGllcy5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuXHRcdFx0XHRcdHZhciBydWxlID0gX3RoaXMuY3NzVXRpbHMuZ2V0U3R5bGVzKGVsZW1lbnQudmFsdWUsIHByb3BlcnR5KTtcblx0XHRcdFx0XHRfdGhpcy5jc3NVdGlscy5zZXRTdHlsZXMoZWxlbWVudC52YWx1ZSwgcnVsZSk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdHJ1bGUgPSB7fTtcblx0XHRcdFx0cnVsZVtfdGhpcy5wcmVmaXguZ2V0UHJlZml4KFwidHJhbnNpdGlvblwiKV0gPSBcIm5vbmVcIjtcblx0XHRcdFx0X3RoaXMuY3NzVXRpbHMuc2V0U3R5bGVzKGVsZW1lbnQudmFsdWUsIHJ1bGUpO1xuXHRcdFx0fTtcblxuXHRcdFx0d2hpbGUgKHRydWUpIHtcblx0XHRcdFx0dmFyIF9yZXQgPSBfbG9vcCgpO1xuXG5cdFx0XHRcdGlmIChfcmV0ID09PSBcImJyZWFrXCIpIGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblx0fSwge1xuXHRcdGtleTogXCJwbGF5XCIsXG5cblx0XHQvKipcclxuICAgICogQHBsYXkgZnVuY3Rpb25cclxuICAgICpcclxuICAgICogQGRlc2NyaXB0aW9uIEl0ZXJhdGVzIHRocm91Z2ggZXZlcnkgc3RvcmVkIGVsZW1lbnQgaW4gdGhlIFRyYWNrZXIgYW5kIHNldHMgQ1NTIHN0eWxlIHJ1bGVzIHRvIGNvbnRpbnVlIGEgcGF1c2VkIHNlcXVlbmNlLlxyXG4gICAgKiBAZ2xvYmFsIG5vXHJcbiAgICAqL1xuXG5cdFx0dmFsdWU6IGZ1bmN0aW9uIHBsYXkoKSB7XG5cdFx0XHR2YXIgX3RoaXMyID0gdGhpcztcblxuXHRcdFx0dmFyIHRyYW5zaXRpb25zID0gdGhpcy50cmFja2VyLmdldChcIlRyYW5zaXRpb25zXCIpO1xuXHRcdFx0dmFyIHRyYW5zaXRpb25FbGVtZW50cyA9IHRyYW5zaXRpb25zLmtleXMoKTtcblx0XHRcdHZhciBhbmltYXRpb25zID0gdGhpcy50cmFja2VyLmdldChcIkFuaW1hdGlvbnNcIik7XG5cdFx0XHR2YXIgYW5pbWF0aW9uRWxlbWVudHMgPSBhbmltYXRpb25zLmtleXMoKTtcblxuXHRcdFx0d2hpbGUgKHRydWUpIHtcblxuXHRcdFx0XHR2YXIgZWxlbWVudCA9IGFuaW1hdGlvbkVsZW1lbnRzLm5leHQoKSxcblx0XHRcdFx0ICAgIHJ1bGUgPSB7fTtcblx0XHRcdFx0aWYgKGVsZW1lbnQuZG9uZSkge1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cnVsZVt0aGlzLnByZWZpeC5nZXRQcmVmaXgoXCJhbmltYXRpb24tcGxheS1zdGF0ZVwiKV0gPSBcInJ1bm5pbmdcIjtcblx0XHRcdFx0dGhpcy5jc3NVdGlscy5zZXRTdHlsZXMoZWxlbWVudC52YWx1ZSwgcnVsZSk7XG5cdFx0XHR9XG5cblx0XHRcdHZhciBfbG9vcDIgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0dmFyIGVsZW1lbnQgPSB0cmFuc2l0aW9uRWxlbWVudHMubmV4dCgpO1xuXHRcdFx0XHRpZiAoZWxlbWVudC5kb25lKSB7XG5cdFx0XHRcdFx0cmV0dXJuIFwiYnJlYWtcIjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciByZWNvcmQgPSB0cmFuc2l0aW9ucy5nZXQoZWxlbWVudC52YWx1ZSk7XG5cdFx0XHRcdF90aGlzMi5jc3NVdGlscy5zZXRTdHlsZXMoZWxlbWVudC52YWx1ZSwgcmVjb3JkLnRyYW5zaXRpb25TdHlsZXMpO1xuXHRcdFx0XHRpZiAocmVjb3JkLmNsYXNzTmFtZSkge1xuXHRcdFx0XHRcdHJlY29yZC5wcm9wZXJ0aWVzLmZvckVhY2goZnVuY3Rpb24gKHByb3ApIHtcblx0XHRcdFx0XHRcdGVsZW1lbnQudmFsdWUuc3R5bGUucmVtb3ZlUHJvcGVydHkocHJvcCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAocmVjb3JkLnN0eWxlcykge1xuXHRcdFx0XHRcdF90aGlzMi5jc3NVdGlscy5zZXRTdHlsZXMoZWxlbWVudC52YWx1ZSwgcmVjb3JkLnN0eWxlcyk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cblx0XHRcdHdoaWxlICh0cnVlKSB7XG5cdFx0XHRcdHZhciBfcmV0MiA9IF9sb29wMigpO1xuXG5cdFx0XHRcdGlmIChfcmV0MiA9PT0gXCJicmVha1wiKSBicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdH0sIHtcblx0XHRrZXk6IFwicmVtb3ZlXCIsXG5cblx0XHQvKipcclxuICAgICogQHJlbW92ZSBmdW5jdGlvblxyXG4gICAgKlxyXG4gICAgKiBAcGFyYW1zIHtTdHJpbmcsIEhUTUxFbGVtZW50fVxyXG4gICAgKiBAZGVzY3JpcHRpb24gUmVtb3ZlcyBhIHN0b3JlZCBlbGVtZW50IGZyb20gdGhlIFRyYWNrZXIgb25jZSBhIHNlcXVlbmNlIGlzIGNvbXBsZXRlLlxyXG4gICAgKiBAcGFyYW1zIGRlc2NyaXB0aW9uICAgICAgXHJcbiAgICAqICAtIHR5cGU6IHtTdHJpbmd9IE1hcCBrZXksIGVpdGhlciBUcmFuc2l0aW9ucyBvciBBbmltYXRpb25zLlxyXG4gICAgKiAgLSBlbGVtZW50OiB7SFRNTEVsZW1lbnR9IFRoZSBlbGVtZW50IHRvIHJlbW92ZSBmcm9tIHRoZSBUcmFja2VyLlxyXG4gICAgKiBAZ2xvYmFsIG5vXHJcbiAgICAqL1xuXG5cdFx0dmFsdWU6IGZ1bmN0aW9uIHJlbW92ZSh0eXBlLCBlbGVtZW50KSB7XG5cdFx0XHR0aGlzLnRyYWNrZXIuZ2V0KHR5cGUpW1wiZGVsZXRlXCJdKGVsZW1lbnQpO1xuXHRcdH1cblx0fV0pO1xuXG5cdHJldHVybiBUcmFja2VyO1xufSkoKTtcblxuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBUcmFja2VyO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzW1wiZGVmYXVsdFwiXTsiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG4vKipcclxuICAqIEBUcmFuc2l0aW9uIENsYXNzXHJcbiAgKlxyXG4gICogQGRlc2NyaXB0aW9uIFByb21pc2UgYmFzZWQgdHJhbnNpdGlvbiBoYW5kbGVyIHRoYXQgcmVzb2x2ZXMgd2hlbiBhbGwgdHJhbnNpdGlvbnMgb24gYW4gZWxlbWVudCBhcmUgY29tcGxldGUuXHJcbiAgKiBAcmV0dXJucyB7UmVzb2x2ZWQgUHJvbWlzZX1cclxuICAqL1xuXG52YXIgVHJhbnNpdGlvbiA9IChmdW5jdGlvbiAoKSB7XG5cblx0LyoqXHJcbiAgICogQGNvbnN0cnVjdG9yIGZ1bmN0aW9uXHJcbiAgICpcclxuICAgKiBAcGFyYW1zIHtPYmplY3QsIENsYXNzLCBDbGFzcywgQ2xhc3MsIENsYXNzLCBPYmplY3R9ICBcclxuICAgKiBAZGVzY3JpcHRpb24gQ3JlYXRlcyBhIG5ldyB0cmFuc2l0aW9uIHNlcXVlbmNlLiAgICBcclxuICogQHBhcmFtcyBkZXNjcmlwdGlvblxyXG4gLSBvcHRpb25zIHtPYmplY3R9IFRyYW5zaXRpb24gb3B0aW9ucy5cclxuIFx0LSBlbGVtZW50IHtIVE1MRWxlbWVudH0gVGhlIGVsZW1lbnQgdG8gc2V0IHRoZSB0cmFuc2l0aW9uIG9uLlxyXG4gXHQtIHByb3BlcnRpZXMge1N0cmluZyAvIEFycmF5fSBBIHN0cmluZyBvciBhcnJheSBvZiBzdHJpbmdzIG9mIENTUyBwcm9wZXJ0aWVzIHRoYXQgYXJlIGJlaW5nIHRyYW5zaXRpb25lZC5cclxuIFx0LSBzZXRTdHlsZXMge09iamVjdH0gU3R5bGVzIHRvIGJlIHNldCBiZWZvcmUgLyBhZnRlciB0aGUgdHJhbnNpdGlvbi5cclxuIFx0XHQtIGJlZm9yZSB7T2JqZWN0fSBPYmplY3Qgb2YgQ1NTIHByb3BlcnR5IC8gdmFsdWUgcGFpcnMgdG8gYmUgc2V0IGJlZm9yZSB0aGUgdHJhbnNpdGlvbi5cclxuIFx0XHQtIGFmdGVyIHtPYmplY3R9IE9iamVjdCBvZiBDU1MgcHJvcGVydHkgLyB2YWx1ZSBwYWlycyB0byBiZSBzZXQgYWZ0ZXIgdGhlIHRyYW5zaXRpb24uXHJcbiBcdC0gYWRkQ2xhc3Mge09iamVjdH0gT2JqZWN0IG9mIGNsYXNzbmFtZXMgdG8gYmUgc2V0IGJlZm9yZSAvIGFmdGVyIHRoZSB0cmFuc2l0aW9uLlxyXG4gXHRcdC0gYmVmb3JlIHtTdHJpbmd9IENsYXNzbmFtZSB0byBzZXQgYmVmb3JlIHRoZSB0cmFuc2l0aW9uLlxyXG4gXHRcdC0gYWZ0ZXIge1N0cmluZ30gQ2xhc3NuYW1lIHRvIHNldCBhZnRlciB0aGUgdHJhbnNpdGlvbi5cclxuIFx0LSByZW1vdmVDbGFzcyB7T2JqZWN0fSBPYmplY3Qgb2YgY2xhc3NuYW1lcyB0byBiZSByZW1vdmVkIGJlZm9yZSAvIGFmdGVyIHRoZSB0cmFuc2l0aW9uLlxyXG4gXHRcdC0gYmVmb3JlIHtTdHJpbmd9IENsYXNzbmFtZSB0byBiZSByZW1vdmVkIGJlZm9yZSB0aGUgdHJhbnNpdGlvbi5cclxuIFx0XHQtIGFmdGVyIHtTdHJpbmd9IENsYXNzbmFtZSB0byBiZSByZW1vdmVkIGFmdGVyIHRoZSB0cmFuc2l0aW9uLlxyXG4gLSBEb21VdGlscyB7Q2xhc3N9IERvbSB1dGlsaXR5IGNsYXNzLlxyXG4gLSBQcmVmaXgge0NsYXNzfSBQcmVmaXggY2xhc3MuXHJcbiAtIENzc1V0aWxzIHtDbGFzc30gQ1NTIFV0aWxpdGllcyBjbGFzcy5cclxuIC0gUHJvbWlzZSB7Q2xhc3N9IFByb21pc2UgY2xhc3MuXHJcbiAtIFRyYWNrZXIge09iamVjdH0gT2JqZWN0IHRoYXQgdHJhY2tzIGFuZCBtb25pdG9ycyBzZXF1ZW5jZXMuXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlfVxyXG4gICAqL1xuXG5cdGZ1bmN0aW9uIFRyYW5zaXRpb24ob3B0aW9ucywgRG9tVXRpbHMsIFByZWZpeCwgQ3NzVXRpbHMsIFByb21pc2UsIFRyYWNrZXIpIHtcblx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdFx0X2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRyYW5zaXRpb24pO1xuXG5cdFx0dGhpcy5vcHRpb25zID0gb3B0aW9ucztcblx0XHR0aGlzLmRvbVV0aWxzID0gbmV3IERvbVV0aWxzKCk7XG5cdFx0dGhpcy5wcmVmaXggPSBuZXcgUHJlZml4KCkuZ2V0UHJlZml4KFwidHJhbnNpdGlvbmVuZFwiKTtcblx0XHR0aGlzLmNzc1V0aWxzID0gbmV3IENzc1V0aWxzKCk7XG5cdFx0dGhpcy5vblRyYW5zaXRpb25FbmQgPSB0aGlzLnRyYW5zaXRpb25FbmQuYmluZCh0aGlzKTtcblx0XHR0aGlzLnRvdGFsdHJhbnNpdGlvbnMgPSBBcnJheS5pc0FycmF5KG9wdGlvbnMucHJvcGVydGllcykgPyBvcHRpb25zLnByb3BlcnRpZXMubGVuZ3RoIDogMTtcblx0XHR0aGlzLnRyYW5zaXRpb25lbmRDb3VudCA9IDA7XG5cdFx0dGhpcy50cmFja2VyID0gVHJhY2tlcjtcblxuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRfdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTtcblx0XHRcdF90aGlzLnJlamVjdCA9IHJlamVjdDtcblx0XHRcdF90aGlzLmFuaW1hdGlvbkZyYW1lID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKF90aGlzLnRyYW5zaXRpb25TdGFydC5iaW5kKF90aGlzKSk7XG5cdFx0fSk7XG5cdH1cblxuXHRfY3JlYXRlQ2xhc3MoVHJhbnNpdGlvbiwgW3tcblx0XHRrZXk6IFwidHJhbnNpdGlvblN0YXJ0XCIsXG5cblx0XHQvKipcclxuICAgICogQHRyYW5zaXRpb25TdGFydCBmdW5jdGlvblxyXG4gICAgKlxyXG4gICAgKiBAZGVzY3JpcHRpb24gU2V0cyBjbGFzc25hbWVzIC8gc3R5bGUgcnVsZXMgdG8gdHJpZ2dlciB0aGUgdHJhbnNpdGlvbi5cclxuICAgICogQGdsb2JhbCBub1xyXG4gICAgKi9cblxuXHRcdHZhbHVlOiBmdW5jdGlvbiB0cmFuc2l0aW9uU3RhcnQoKSB7XG5cblx0XHRcdHZhciBvcHRzID0gdGhpcy5vcHRpb25zO1xuXHRcdFx0b3B0cy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIodGhpcy5wcmVmaXgsIHRoaXMub25UcmFuc2l0aW9uRW5kLCBmYWxzZSk7XG5cblx0XHRcdGlmIChvcHRzLnNldFN0eWxlcyAmJiBvcHRzLnNldFN0eWxlcy5iZWZvcmUpIHtcblx0XHRcdFx0dGhpcy5jc3NVdGlscy5zZXRTdHlsZXMob3B0cy5lbGVtZW50LCBvcHRzLnNldFN0eWxlcy5iZWZvcmUpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAob3B0cy5yZW1vdmVDbGFzcyAmJiBvcHRzLnJlbW92ZUNsYXNzLmJlZm9yZSkge1xuXHRcdFx0XHR0aGlzLmRvbVV0aWxzLnNldENsYXNzKG9wdHMuZWxlbWVudCwgb3B0cy5yZW1vdmVDbGFzcy5iZWZvcmUsIGZhbHNlKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKG9wdHMuYWRkQ2xhc3MgJiYgb3B0cy5hZGRDbGFzcy5iZWZvcmUpIHtcblx0XHRcdFx0dGhpcy5kb21VdGlscy5zZXRDbGFzcyhvcHRzLmVsZW1lbnQsIG9wdHMuYWRkQ2xhc3MuYmVmb3JlLCB0cnVlKTtcblx0XHRcdH1cblx0XHR9XG5cdH0sIHtcblx0XHRrZXk6IFwidHJhbnNpdGlvbkVuZFwiLFxuXG5cdFx0LyoqXHJcbiAgICAqIEB0cmFuc2l0aW9uRW5kIGZ1bmN0aW9uXHJcbiAgICAqXHJcbiAgICAqIEBkZXNjcmlwdGlvbiBTZXRzIGNsYXNzbmFtZXMgLyBzdHlsZSBydWxlcyBhZnRlciBhbGwgdHJhbnNpdGlvbnMgaGF2ZSBvY2N1cnJlZCBhbmQgcmVtb3ZlcyB0aGUgZWxlbWVudCBmcm9tIHRoZSB0cmFja2VyLlxyXG4gICAgKiBAZ2xvYmFsIG5vXHJcbiAgICAqIEByZXR1cm5zIHtSZXNvbHZlZCBQcm9taXNlfVxyXG4gICAgKi9cblxuXHRcdHZhbHVlOiBmdW5jdGlvbiB0cmFuc2l0aW9uRW5kKCkge1xuXG5cdFx0XHR2YXIgb3B0cyA9IHRoaXMub3B0aW9ucztcblx0XHRcdHRoaXMudHJhbnNpdGlvbmVuZENvdW50Kys7XG5cblx0XHRcdGlmICh0aGlzLnRyYW5zaXRpb25lbmRDb3VudCA9PT0gdGhpcy50b3RhbHRyYW5zaXRpb25zKSB7XG5cblx0XHRcdFx0b3B0cy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5wcmVmaXgsIHRoaXMub25UcmFuc2l0aW9uRW5kLCBmYWxzZSk7XG5cdFx0XHRcdGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uRnJhbWUpO1xuXG5cdFx0XHRcdGlmIChvcHRzLnNldFN0eWxlcyAmJiBvcHRzLnNldFN0eWxlcy5hZnRlcikge1xuXHRcdFx0XHRcdHRoaXMuY3NzVXRpbHMuc2V0U3R5bGVzKG9wdHMuZWxlbWVudCwgb3B0cy5zZXRTdHlsZXMuYWZ0ZXIpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKG9wdHMucmVtb3ZlQ2xhc3MgJiYgb3B0cy5yZW1vdmVDbGFzcy5hZnRlcikge1xuXHRcdFx0XHRcdHRoaXMuZG9tVXRpbHMuc2V0Q2xhc3Mob3B0cy5lbGVtZW50LCBvcHRzLnJlbW92ZUNsYXNzLmFmdGVyLCBmYWxzZSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAob3B0cy5hZGRDbGFzcyAmJiBvcHRzLmFkZENsYXNzLmFmdGVyKSB7XG5cdFx0XHRcdFx0dGhpcy5kb21VdGlscy5zZXRDbGFzcyhvcHRzLmVsZW1lbnQsIG9wdHMuYWRkQ2xhc3MuYWZ0ZXIsIHRydWUpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGhpcy50cmFja2VyLnJlbW92ZShcIlRyYW5zaXRpb25zXCIsIG9wdHMuZWxlbWVudCk7XG5cdFx0XHRcdHRoaXMucmVzb2x2ZShvcHRzLmVsZW1lbnQpO1xuXHRcdFx0fVxuXHRcdH1cblx0fV0pO1xuXG5cdHJldHVybiBUcmFuc2l0aW9uO1xufSkoKTtcblxuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBUcmFuc2l0aW9uO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzW1wiZGVmYXVsdFwiXTsiLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcblxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gc2V0VGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAoIWRyYWluaW5nKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZHJhaW5RdWV1ZSwgMCk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG4vLyBUT0RPKHNodHlsbWFuKVxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIl19
